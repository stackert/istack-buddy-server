
> istack-buddy-server-take1@0.0.1 start:dev
> nest start --watch

[2J[3J[H[[90m2:35:44 AM[0m] Starting compilation in watch mode...

[96msrc/robots/SlackyOpenAiAgent.ts[0m:[93m51[0m:[93m7[0m - [91merror[0m[90m TS2654: [0mNon-abstract class 'ObservationMakerViewer' is missing implementations for the following members of 'AbstractObservationMaker': 'getRequiredResources', 'makeObservation'.

[7m51[0m class ObservationMakerViewer extends ObservationMakers.AbstractObservationMaker {
[7m  [0m [91m      ~~~~~~~~~~~~~~~~~~~~~~[0m

[96msrc/robots/SlackyOpenAiAgent.ts[0m:[93m83[0m:[93m14[0m - [91merror[0m[90m TS2551: [0mProperty 'setLogItems' does not exist on type 'ObservationMakerViewer'. Did you mean 'logItems'?

[7m83[0m       viewer.setLogItems(logItems);
[7m  [0m [91m             ~~~~~~~~~~~[0m

  [96msrc/robots/SlackyOpenAiAgent.ts[0m:[93m55[0m:[93m11[0m
    [7m55[0m   private logItems: IObservationLogItem[] = [];
    [7m  [0m [96m          ~~~~~~~~[0m
    'logItems' is declared here.

[96msrc/robots/SlackyOpenAiAgent.ts[0m:[93m253[0m:[93m45[0m - [91merror[0m[90m TS2554: [0mExpected 0 arguments, but got 1.

[7m253[0m   const viewer = new ObservationMakerViewer(result);
[7m   [0m [91m                                            ~~~~~~[0m

[[90m2:35:46 AM[0m] Found 3 errors. Watching for file changes.

[2J[3J[H[[90m2:39:00 AM[0m] File change detected. Starting incremental compilation...

[96msrc/robots/SlackyOpenAiAgent.ts[0m:[93m51[0m:[93m7[0m - [91merror[0m[90m TS2654: [0mNon-abstract class 'ObservationMakerViewer' is missing implementations for the following members of 'AbstractObservationMaker': 'getRequiredResources', 'makeObservation'.

[7m51[0m class ObservationMakerViewer extends ObservationMakers.AbstractObservationMaker {
[7m  [0m [91m      ~~~~~~~~~~~~~~~~~~~~~~[0m

[96msrc/robots/SlackyOpenAiAgent.ts[0m:[93m83[0m:[93m14[0m - [91merror[0m[90m TS2551: [0mProperty 'setLogItems' does not exist on type 'ObservationMakerViewer'. Did you mean 'logItems'?

[7m83[0m       viewer.setLogItems(logItems);
[7m  [0m [91m             ~~~~~~~~~~~[0m

  [96msrc/robots/SlackyOpenAiAgent.ts[0m:[93m55[0m:[93m11[0m
    [7m55[0m   private logItems: IObservationLogItem[] = [];
    [7m  [0m [96m          ~~~~~~~~[0m
    'logItems' is declared here.

[96msrc/robots/SlackyOpenAiAgent.ts[0m:[93m257[0m:[93m45[0m - [91merror[0m[90m TS2554: [0mExpected 0 arguments, but got 1.

[7m257[0m   const viewer = new ObservationMakerViewer(result);
[7m   [0m [91m                                            ~~~~~~[0m

[[90m2:39:00 AM[0m] Found 3 errors. Watching for file changes.

[2J[3J[H[[90m2:39:13 AM[0m] File change detected. Starting incremental compilation...

[96msrc/robots/SlackyOpenAiAgent.ts[0m:[93m51[0m:[93m7[0m - [91merror[0m[90m TS2654: [0mNon-abstract class 'ObservationMakerViewer' is missing implementations for the following members of 'AbstractObservationMaker': 'getRequiredResources', 'makeObservation'.

[7m51[0m class ObservationMakerViewer extends ObservationMakers.AbstractObservationMaker {
[7m  [0m [91m      ~~~~~~~~~~~~~~~~~~~~~~[0m

[96msrc/robots/SlackyOpenAiAgent.ts[0m:[93m83[0m:[93m14[0m - [91merror[0m[90m TS2551: [0mProperty 'setLogItems' does not exist on type 'ObservationMakerViewer'. Did you mean 'logItems'?

[7m83[0m       viewer.setLogItems(logItems);
[7m  [0m [91m             ~~~~~~~~~~~[0m

  [96msrc/robots/SlackyOpenAiAgent.ts[0m:[93m55[0m:[93m11[0m
    [7m55[0m   private logItems: IObservationLogItem[] = [];
    [7m  [0m [96m          ~~~~~~~~[0m
    'logItems' is declared here.

[96msrc/robots/SlackyOpenAiAgent.ts[0m:[93m271[0m:[93m45[0m - [91merror[0m[90m TS2554: [0mExpected 0 arguments, but got 1.

[7m271[0m   const viewer = new ObservationMakerViewer(result);
[7m   [0m [91m                                            ~~~~~~[0m

[[90m2:39:13 AM[0m] Found 3 errors. Watching for file changes.

[2J[3J[H[[90m2:39:18 AM[0m] File change detected. Starting incremental compilation...

[96msrc/robots/SlackyOpenAiAgent.ts[0m:[93m51[0m:[93m7[0m - [91merror[0m[90m TS2654: [0mNon-abstract class 'ObservationMakerViewer' is missing implementations for the following members of 'AbstractObservationMaker': 'getRequiredResources', 'makeObservation'.

[7m51[0m class ObservationMakerViewer extends ObservationMakers.AbstractObservationMaker {
[7m  [0m [91m      ~~~~~~~~~~~~~~~~~~~~~~[0m

[96msrc/robots/SlackyOpenAiAgent.ts[0m:[93m83[0m:[93m14[0m - [91merror[0m[90m TS2551: [0mProperty 'setLogItems' does not exist on type 'ObservationMakerViewer'. Did you mean 'logItems'?

[7m83[0m       viewer.setLogItems(logItems);
[7m  [0m [91m             ~~~~~~~~~~~[0m

  [96msrc/robots/SlackyOpenAiAgent.ts[0m:[93m55[0m:[93m11[0m
    [7m55[0m   private logItems: IObservationLogItem[] = [];
    [7m  [0m [96m          ~~~~~~~~[0m
    'logItems' is declared here.

[[90m2:39:19 AM[0m] Found 2 errors. Watching for file changes.

[2J[3J[H[[90m2:39:33 AM[0m] File change detected. Starting incremental compilation...

[96msrc/robots/SlackyOpenAiAgent.ts[0m:[93m51[0m:[93m7[0m - [91merror[0m[90m TS2654: [0mNon-abstract class 'ObservationMakerViewer' is missing implementations for the following members of 'AbstractObservationMaker': 'getRequiredResources', 'makeObservation'.

[7m51[0m class ObservationMakerViewer extends ObservationMakers.AbstractObservationMaker {
[7m  [0m [91m      ~~~~~~~~~~~~~~~~~~~~~~[0m

[96msrc/robots/SlackyOpenAiAgent.ts[0m:[93m83[0m:[93m14[0m - [91merror[0m[90m TS2551: [0mProperty 'setLogItems' does not exist on type 'ObservationMakerViewer'. Did you mean 'logItems'?

[7m83[0m       viewer.setLogItems(logItems);
[7m  [0m [91m             ~~~~~~~~~~~[0m

  [96msrc/robots/SlackyOpenAiAgent.ts[0m:[93m55[0m:[93m11[0m
    [7m55[0m   private logItems: IObservationLogItem[] = [];
    [7m  [0m [96m          ~~~~~~~~[0m
    'logItems' is declared here.

[96msrc/robots/SlackyOpenAiAgent.ts[0m:[93m232[0m:[93m23[0m - [91merror[0m[90m TS2339: [0mProperty 'messagePrimary' does not exist on type 'IObservationLogItem'.

[7m232[0m       } else if (item.messagePrimary) {
[7m   [0m [91m                      ~~~~~~~~~~~~~~[0m

[96msrc/robots/SlackyOpenAiAgent.ts[0m:[93m233[0m:[93m43[0m - [91merror[0m[90m TS2339: [0mProperty 'messagePrimary' does not exist on type 'IObservationLogItem'.

[7m233[0m         formatted += `• *Message:* ${item.messagePrimary}\n`;
[7m   [0m [91m                                          ~~~~~~~~~~~~~~[0m

[96msrc/robots/SlackyOpenAiAgent.ts[0m:[93m237[0m:[93m16[0m - [91merror[0m[90m TS2339: [0mProperty 'messagePrimary' does not exist on type 'IObservationLogItem'.

[7m237[0m       if (item.messagePrimary && item.messageSecondary && item.messagePrimary !== item.messageSecondary) {
[7m   [0m [91m               ~~~~~~~~~~~~~~[0m

[96msrc/robots/SlackyOpenAiAgent.ts[0m:[93m237[0m:[93m64[0m - [91merror[0m[90m TS2339: [0mProperty 'messagePrimary' does not exist on type 'IObservationLogItem'.

[7m237[0m       if (item.messagePrimary && item.messageSecondary && item.messagePrimary !== item.messageSecondary) {
[7m   [0m [91m                                                               ~~~~~~~~~~~~~~[0m

[96msrc/robots/SlackyOpenAiAgent.ts[0m:[93m238[0m:[93m43[0m - [91merror[0m[90m TS2339: [0mProperty 'messagePrimary' does not exist on type 'IObservationLogItem'.

[7m238[0m         formatted += `• *Context:* ${item.messagePrimary}\n`;
[7m   [0m [91m                                          ~~~~~~~~~~~~~~[0m

[[90m2:39:34 AM[0m] Found 7 errors. Watching for file changes.

[2J[3J[H[[90m2:39:47 AM[0m] File change detected. Starting incremental compilation...

[96msrc/robots/SlackyOpenAiAgent.ts[0m:[93m51[0m:[93m7[0m - [91merror[0m[90m TS2654: [0mNon-abstract class 'ObservationMakerViewer' is missing implementations for the following members of 'AbstractObservationMaker': 'getRequiredResources', 'makeObservation'.

[7m51[0m class ObservationMakerViewer extends ObservationMakers.AbstractObservationMaker {
[7m  [0m [91m      ~~~~~~~~~~~~~~~~~~~~~~[0m

[96msrc/robots/SlackyOpenAiAgent.ts[0m:[93m83[0m:[93m14[0m - [91merror[0m[90m TS2551: [0mProperty 'setLogItems' does not exist on type 'ObservationMakerViewer'. Did you mean 'logItems'?

[7m83[0m       viewer.setLogItems(logItems);
[7m  [0m [91m             ~~~~~~~~~~~[0m

  [96msrc/robots/SlackyOpenAiAgent.ts[0m:[93m55[0m:[93m11[0m
    [7m55[0m   private logItems: IObservationLogItem[] = [];
    [7m  [0m [96m          ~~~~~~~~[0m
    'logItems' is declared here.

[96msrc/robots/SlackyOpenAiAgent.ts[0m:[93m225[0m:[93m23[0m - [91merror[0m[90m TS2339: [0mProperty 'messagePrimary' does not exist on type 'IObservationLogItem'.

[7m225[0m       } else if (item.messagePrimary) {
[7m   [0m [91m                      ~~~~~~~~~~~~~~[0m

[96msrc/robots/SlackyOpenAiAgent.ts[0m:[93m226[0m:[93m43[0m - [91merror[0m[90m TS2339: [0mProperty 'messagePrimary' does not exist on type 'IObservationLogItem'.

[7m226[0m         formatted += `• *Message:* ${item.messagePrimary}\n`;
[7m   [0m [91m                                          ~~~~~~~~~~~~~~[0m

[96msrc/robots/SlackyOpenAiAgent.ts[0m:[93m230[0m:[93m16[0m - [91merror[0m[90m TS2339: [0mProperty 'messagePrimary' does not exist on type 'IObservationLogItem'.

[7m230[0m       if (item.messagePrimary && item.messageSecondary && item.messagePrimary !== item.messageSecondary) {
[7m   [0m [91m               ~~~~~~~~~~~~~~[0m

[96msrc/robots/SlackyOpenAiAgent.ts[0m:[93m230[0m:[93m64[0m - [91merror[0m[90m TS2339: [0mProperty 'messagePrimary' does not exist on type 'IObservationLogItem'.

[7m230[0m       if (item.messagePrimary && item.messageSecondary && item.messagePrimary !== item.messageSecondary) {
[7m   [0m [91m                                                               ~~~~~~~~~~~~~~[0m

[96msrc/robots/SlackyOpenAiAgent.ts[0m:[93m231[0m:[93m43[0m - [91merror[0m[90m TS2339: [0mProperty 'messagePrimary' does not exist on type 'IObservationLogItem'.

[7m231[0m         formatted += `• *Context:* ${item.messagePrimary}\n`;
[7m   [0m [91m                                          ~~~~~~~~~~~~~~[0m

[[90m2:39:47 AM[0m] Found 7 errors. Watching for file changes.

[2J[3J[H[[90m2:39:53 AM[0m] File change detected. Starting incremental compilation...

[96msrc/robots/SlackyOpenAiAgent.ts[0m:[93m51[0m:[93m7[0m - [91merror[0m[90m TS2654: [0mNon-abstract class 'ObservationMakerViewer' is missing implementations for the following members of 'AbstractObservationMaker': 'getRequiredResources', 'makeObservation'.

[7m51[0m class ObservationMakerViewer extends ObservationMakers.AbstractObservationMaker {
[7m  [0m [91m      ~~~~~~~~~~~~~~~~~~~~~~[0m

[96msrc/robots/SlackyOpenAiAgent.ts[0m:[93m83[0m:[93m14[0m - [91merror[0m[90m TS2551: [0mProperty 'setLogItems' does not exist on type 'ObservationMakerViewer'. Did you mean 'logItems'?

[7m83[0m       viewer.setLogItems(logItems);
[7m  [0m [91m             ~~~~~~~~~~~[0m

  [96msrc/robots/SlackyOpenAiAgent.ts[0m:[93m55[0m:[93m11[0m
    [7m55[0m   private logItems: IObservationLogItem[] = [];
    [7m  [0m [96m          ~~~~~~~~[0m
    'logItems' is declared here.

[[90m2:39:53 AM[0m] Found 2 errors. Watching for file changes.

[2J[3J[H[[90m2:39:57 AM[0m] File change detected. Starting incremental compilation...

[96msrc/robots/SlackyOpenAiAgent.ts[0m:[93m51[0m:[93m7[0m - [91merror[0m[90m TS2654: [0mNon-abstract class 'ObservationMakerViewer' is missing implementations for the following members of 'AbstractObservationMaker': 'getRequiredResources', 'makeObservation'.

[7m51[0m class ObservationMakerViewer extends ObservationMakers.AbstractObservationMaker {
[7m  [0m [91m      ~~~~~~~~~~~~~~~~~~~~~~[0m

[96msrc/robots/SlackyOpenAiAgent.ts[0m:[93m83[0m:[93m14[0m - [91merror[0m[90m TS2551: [0mProperty 'setLogItems' does not exist on type 'ObservationMakerViewer'. Did you mean 'logItems'?

[7m83[0m       viewer.setLogItems(logItems);
[7m  [0m [91m             ~~~~~~~~~~~[0m

  [96msrc/robots/SlackyOpenAiAgent.ts[0m:[93m55[0m:[93m11[0m
    [7m55[0m   private logItems: IObservationLogItem[] = [];
    [7m  [0m [96m          ~~~~~~~~[0m
    'logItems' is declared here.

[[90m2:39:57 AM[0m] Found 2 errors. Watching for file changes.

[2J[3J[H[[90m2:40:05 AM[0m] File change detected. Starting incremental compilation...

[96msrc/robots/SlackyOpenAiAgent.ts[0m:[93m51[0m:[93m7[0m - [91merror[0m[90m TS2654: [0mNon-abstract class 'ObservationMakerViewer' is missing implementations for the following members of 'AbstractObservationMaker': 'getRequiredResources', 'makeObservation'.

[7m51[0m class ObservationMakerViewer extends ObservationMakers.AbstractObservationMaker {
[7m  [0m [91m      ~~~~~~~~~~~~~~~~~~~~~~[0m

[96msrc/robots/SlackyOpenAiAgent.ts[0m:[93m83[0m:[93m14[0m - [91merror[0m[90m TS2551: [0mProperty 'setLogItems' does not exist on type 'ObservationMakerViewer'. Did you mean 'logItems'?

[7m83[0m       viewer.setLogItems(logItems);
[7m  [0m [91m             ~~~~~~~~~~~[0m

  [96msrc/robots/SlackyOpenAiAgent.ts[0m:[93m55[0m:[93m11[0m
    [7m55[0m   private logItems: IObservationLogItem[] = [];
    [7m  [0m [96m          ~~~~~~~~[0m
    'logItems' is declared here.

[[90m2:40:05 AM[0m] Found 2 errors. Watching for file changes.

[2J[3J[H[[90m2:40:21 AM[0m] File change detected. Starting incremental compilation...

[[90m2:40:21 AM[0m] Found 0 errors. Watching for file changes.

[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[NestFactory] [39m[32mStarting Nest application...[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mRobotModule dependencies initialized[39m[38;5;3m +8ms[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConversationListServiceModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mLoggerModule dependencies initialized[39m[38;5;3m +0ms[39m
[95m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.constructor] [39m[95mFile-based permissions loaded successfully[39m
[95m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.constructor] [39m[95mData: {
  "userPermissionsCount": 0,
  "groupPermissionsCount": 0,
  "userGroupMembershipsCount": 0
}[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAuthorizationPermissionsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAppModule dependencies initialized[39m[38;5;3m +0ms[39m
[95m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [95m  DEBUG[39m [38;5;3m[AuthenticationService.constructor] [39m[95mAuthentication service initialized with configuration[39m
[95m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [95m  DEBUG[39m [38;5;3m[AuthenticationService.constructor] [39m[95mData: {
  "sessionTimeoutSeconds": 28800
}[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAuthenticationModule dependencies initialized[39m[38;5;3m +2ms[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mGuardsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mIstackBuddySlackApiModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mDevDebugModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mPublicInterfaceModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mChatManagerModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mUserProfileModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "join_room" message[39m[38;5;3m +13ms[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "leave_room" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "send_message" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "typing_start" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "typing_stop" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "get_messages" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "share_robot_message" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "join_dashboard" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "leave_dashboard" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAppController {/}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAuthenticationController {/auth}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/user, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/profile/me, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mUserProfileController {/user-profiles}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/user-profiles/me, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mDevDebugController {/dev-debug}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/auth, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/user-details/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/users, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/auth-status/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mChatManagerController {/chat}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/messages, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/messages, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/messages/last/:count, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/join, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/participants, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/dashboard/stats, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/start, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/leave, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mIstackBuddySlackApiController {/}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/istack-buddy/slack-integration/health, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/istack-buddy/slack-integration/debug, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/istack-buddy/slack-integration/slack/events, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mPublicInterfaceController {/public}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/debug-create, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId/:formId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId/:formId/chat-messages, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId/:formId/chat-messages, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[SlackyAnthropicAgent] [39m[32mSlackyAnthropicAgent constructor called - class loaded[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mSlackyOpenAiAgent constructor called - class loaded[39m
[95m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: ChatRobotParrot v1.0.0[39m
[95m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: AgentRobotParrot v1.0.0[39m
[95m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: RobotChatOpenAI v1.0.0-test-dev[39m
[95m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: RobotChatAnthropic v1.0.0[39m
[95m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackyAnthropicAgent v1.0.0[39m
[95m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: MarvOpenAiAgent v1.0.0[39m
[95m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackyOpenAiAgent v1.0.0[39m
[95m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: AnthropicMarv v1.0.0[39m
[95m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackAgentCoreFormsParrot v1.0.0[39m
[95m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackAgentCoreFormsSsoAutofillParrot v1.0.0[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[RobotService] [39m[32mInitialized 10 robots[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[NestApplication] [39m[32mNest application successfully started[39m[38;5;3m +0ms[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[Bootstrap] [39m[32miStack Buddy Server running on: http://localhost:3500[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [32m    LOG[39m [38;5;3m[Bootstrap] [39m[32mAPI Documentation available at: http://localhost:3500/api[39m
[33m[Nest] 1946705  - [39m08/10/2025, 2:40:21 AM [33m   WARN[39m [38;5;3m[Bootstrap] [39m[33mCORS enabled for ALL origins (temporary)[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:22 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: fdaKuPDFjb2yoMM9AAAB[39m
[95m[Nest] 1946705  - [39m08/10/2025, 2:40:22 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mJoin room data received[39m
[95m[Nest] 1946705  - [39m08/10/2025, 2:40:22 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "data": {
    "conversationId": "321d767c-fa29-4565-88b7-bf2a9c237bc4",
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[95m[Nest] 1946705  - [39m08/10/2025, 2:40:22 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mApplied default joinData[39m
[95m[Nest] 1946705  - [39m08/10/2025, 2:40:22 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "joinData": {
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[ChatManagerService] Attempting to join conversation: 321d767c-fa29-4565-88b7-bf2a9c237bc4
[ChatManagerService] Available conversations: []
[31m[Nest] 1946705  - [39m08/10/2025, 2:40:22 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError in handleJoinRoom[39m
[31m[Nest] 1946705  - [39m08/10/2025, 2:40:22 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError: Conversation 321d767c-fa29-4565-88b7-bf2a9c237bc4 not found[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:27 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: G-hKcXtlMtd4V54cAAAD[39m
[95m[Nest] 1946705  - [39m08/10/2025, 2:40:27 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mJoin room data received[39m
[95m[Nest] 1946705  - [39m08/10/2025, 2:40:27 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "data": {
    "conversationId": "bb9a404c-d7f8-48e3-88e7-5824edcee08c",
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[95m[Nest] 1946705  - [39m08/10/2025, 2:40:27 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mApplied default joinData[39m
[95m[Nest] 1946705  - [39m08/10/2025, 2:40:27 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "joinData": {
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[ChatManagerService] Attempting to join conversation: bb9a404c-d7f8-48e3-88e7-5824edcee08c
[ChatManagerService] Available conversations: []
[31m[Nest] 1946705  - [39m08/10/2025, 2:40:27 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError in handleJoinRoom[39m
[31m[Nest] 1946705  - [39m08/10/2025, 2:40:27 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError: Conversation bb9a404c-d7f8-48e3-88e7-5824edcee08c not found[39m
[32m[Nest] 1946705  - [39m08/10/2025, 2:40:27 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: U7BgBz-5IC--LkXZAAAF[39m
[95m[Nest] 1946705  - [39m08/10/2025, 2:40:27 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mJoin room data received[39m
[95m[Nest] 1946705  - [39m08/10/2025, 2:40:27 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "data": {
    "conversationId": "cae98459-9ded-42e1-bef7-31628f344b65",
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[95m[Nest] 1946705  - [39m08/10/2025, 2:40:27 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mApplied default joinData[39m
[95m[Nest] 1946705  - [39m08/10/2025, 2:40:27 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "joinData": {
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[ChatManagerService] Attempting to join conversation: cae98459-9ded-42e1-bef7-31628f344b65
[ChatManagerService] Available conversations: []
[31m[Nest] 1946705  - [39m08/10/2025, 2:40:27 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError in handleJoinRoom[39m
[31m[Nest] 1946705  - [39m08/10/2025, 2:40:27 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError: Conversation cae98459-9ded-42e1-bef7-31628f344b65 not found[39m
[2J[3J[H[[90m2:40:43 AM[0m] File change detected. Starting incremental compilation...

[[90m2:40:43 AM[0m] Found 0 errors. Watching for file changes.

[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[NestFactory] [39m[32mStarting Nest application...[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mRobotModule dependencies initialized[39m[38;5;3m +8ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConversationListServiceModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mLoggerModule dependencies initialized[39m[38;5;3m +0ms[39m
[95m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.constructor] [39m[95mFile-based permissions loaded successfully[39m
[95m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.constructor] [39m[95mData: {
  "userPermissionsCount": 0,
  "groupPermissionsCount": 0,
  "userGroupMembershipsCount": 0
}[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAuthorizationPermissionsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAppModule dependencies initialized[39m[38;5;3m +1ms[39m
[95m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [95m  DEBUG[39m [38;5;3m[AuthenticationService.constructor] [39m[95mAuthentication service initialized with configuration[39m
[95m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [95m  DEBUG[39m [38;5;3m[AuthenticationService.constructor] [39m[95mData: {
  "sessionTimeoutSeconds": 28800
}[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAuthenticationModule dependencies initialized[39m[38;5;3m +2ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mGuardsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mIstackBuddySlackApiModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mDevDebugModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mPublicInterfaceModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mChatManagerModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mUserProfileModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "join_room" message[39m[38;5;3m +12ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "leave_room" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "send_message" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "typing_start" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "typing_stop" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "get_messages" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "share_robot_message" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "join_dashboard" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "leave_dashboard" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAppController {/}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAuthenticationController {/auth}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/user, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/profile/me, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mUserProfileController {/user-profiles}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/user-profiles/me, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mDevDebugController {/dev-debug}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/auth, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/user-details/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/users, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/auth-status/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mChatManagerController {/chat}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/messages, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/messages, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/messages/last/:count, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/join, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/participants, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/dashboard/stats, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/start, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/leave, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mIstackBuddySlackApiController {/}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/istack-buddy/slack-integration/health, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/istack-buddy/slack-integration/debug, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/istack-buddy/slack-integration/slack/events, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mPublicInterfaceController {/public}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/debug-create, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId/:formId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId/:formId/chat-messages, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId/:formId/chat-messages, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[SlackyAnthropicAgent] [39m[32mSlackyAnthropicAgent constructor called - class loaded[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mSlackyOpenAiAgent constructor called - class loaded[39m
[95m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: ChatRobotParrot v1.0.0[39m
[95m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: AgentRobotParrot v1.0.0[39m
[95m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: RobotChatOpenAI v1.0.0-test-dev[39m
[95m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: RobotChatAnthropic v1.0.0[39m
[95m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackyAnthropicAgent v1.0.0[39m
[95m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: MarvOpenAiAgent v1.0.0[39m
[95m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackyOpenAiAgent v1.0.0[39m
[95m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: AnthropicMarv v1.0.0[39m
[95m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackAgentCoreFormsParrot v1.0.0[39m
[95m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackAgentCoreFormsSsoAutofillParrot v1.0.0[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[RobotService] [39m[32mInitialized 10 robots[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[NestApplication] [39m[32mNest application successfully started[39m[38;5;3m +0ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[Bootstrap] [39m[32miStack Buddy Server running on: http://localhost:3500[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [32m    LOG[39m [38;5;3m[Bootstrap] [39m[32mAPI Documentation available at: http://localhost:3500/api[39m
[33m[Nest] 1947011  - [39m08/10/2025, 2:40:44 AM [33m   WARN[39m [38;5;3m[Bootstrap] [39m[33mCORS enabled for ALL origins (temporary)[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:47 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: 5XGMVjbNvYAjnuEsAAAB[39m
[95m[Nest] 1947011  - [39m08/10/2025, 2:40:47 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mJoin room data received[39m
[95m[Nest] 1947011  - [39m08/10/2025, 2:40:47 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "data": {
    "conversationId": "cae98459-9ded-42e1-bef7-31628f344b65",
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[95m[Nest] 1947011  - [39m08/10/2025, 2:40:47 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mApplied default joinData[39m
[95m[Nest] 1947011  - [39m08/10/2025, 2:40:47 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "joinData": {
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[ChatManagerService] Attempting to join conversation: cae98459-9ded-42e1-bef7-31628f344b65
[ChatManagerService] Available conversations: []
[31m[Nest] 1947011  - [39m08/10/2025, 2:40:47 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError in handleJoinRoom[39m
[31m[Nest] 1947011  - [39m08/10/2025, 2:40:47 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError: Conversation cae98459-9ded-42e1-bef7-31628f344b65 not found[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:47 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: AtaV1VrppcSoHP72AAAD[39m
[95m[Nest] 1947011  - [39m08/10/2025, 2:40:47 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mJoin room data received[39m
[95m[Nest] 1947011  - [39m08/10/2025, 2:40:47 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "data": {
    "conversationId": "bb9a404c-d7f8-48e3-88e7-5824edcee08c",
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[95m[Nest] 1947011  - [39m08/10/2025, 2:40:47 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mApplied default joinData[39m
[95m[Nest] 1947011  - [39m08/10/2025, 2:40:47 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "joinData": {
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[ChatManagerService] Attempting to join conversation: bb9a404c-d7f8-48e3-88e7-5824edcee08c
[ChatManagerService] Available conversations: []
[31m[Nest] 1947011  - [39m08/10/2025, 2:40:47 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError in handleJoinRoom[39m
[31m[Nest] 1947011  - [39m08/10/2025, 2:40:47 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError: Conversation bb9a404c-d7f8-48e3-88e7-5824edcee08c not found[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:40:47 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: Mu0c2wOXirTZrvtvAAAF[39m
[95m[Nest] 1947011  - [39m08/10/2025, 2:40:47 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mJoin room data received[39m
[95m[Nest] 1947011  - [39m08/10/2025, 2:40:47 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "data": {
    "conversationId": "321d767c-fa29-4565-88b7-bf2a9c237bc4",
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[95m[Nest] 1947011  - [39m08/10/2025, 2:40:47 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mApplied default joinData[39m
[95m[Nest] 1947011  - [39m08/10/2025, 2:40:47 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "joinData": {
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[ChatManagerService] Attempting to join conversation: 321d767c-fa29-4565-88b7-bf2a9c237bc4
[ChatManagerService] Available conversations: []
[31m[Nest] 1947011  - [39m08/10/2025, 2:40:47 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError in handleJoinRoom[39m
[31m[Nest] 1947011  - [39m08/10/2025, 2:40:47 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError: Conversation 321d767c-fa29-4565-88b7-bf2a9c237bc4 not found[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:41:44 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:42:44 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:43:44 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:44:21 AM [32m    LOG[39m [38;5;3m[SlackSignatureGuard] [39m[32mSlack signature verified successfully[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:44:21 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32m[6227c817-419c-4fa1-a766-175f812ed514] Incoming POST /istack-buddy/slack-integration/slack/events[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:44:21 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32mData: {
  "userAgent": "Slackbot 1.0 (+https://api.slack.com/robots)",
  "ip": "::ffff:127.0.0.1",
  "params": {},
  "query": {}
}[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:44:21 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mReceived app mention event[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:44:21 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mDEBUG: Event text: "<@U092RRN555X> logic observations for 5375703", trimmed: "<@U092RRN555X> logic observations for 5375703"[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:44:21 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mAdding reaction :thinking_face: to message 1754811860.029799 in channel C091Y5UNA1M[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:44:21 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mAdded reaction :thinking_face: to message in channel C091Y5UNA1M[39m
[95m[Nest] 1947011  - [39m08/10/2025, 2:44:21 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mBroadcasting dashboard event: conversation_created[39m
{
  allConversationMessages: [
    {
      id: '5e30ad71-ad74-4fe2-84d9-b13296b755e9',
      content: [Object],
      conversationId: '0361113d-da19-4235-bee4-20ef02694ed8',
      fromUserId: 'cx-slack-robot',
      fromRole: 'cx-customer',
      toRole: 'cx-agent',
      messageType: 'text',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T07:44:21.914Z,
      updatedAt: 2025-08-10T07:44:21.914Z
    }
  ]
}
[95m[Nest] 1947011  - [39m08/10/2025, 2:44:21 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mBroadcasting dashboard event: conversation_updated[39m
Gateway: Broadcasting new_message to conversation 0361113d-da19-4235-bee4-20ef02694ed8: {
  message: {
    id: '5e30ad71-ad74-4fe2-84d9-b13296b755e9',
    content: {
      type: 'text/plain',
      payload: '<@U092RRN555X> logic observations for 5375703'
    },
    conversationId: '0361113d-da19-4235-bee4-20ef02694ed8',
    fromUserId: 'cx-slack-robot',
    fromRole: 'cx-customer',
    toRole: 'cx-agent',
    messageType: 'text',
    threadId: undefined,
    originalMessageId: undefined,
    createdAt: 2025-08-10T07:44:21.914Z,
    updatedAt: 2025-08-10T07:44:21.914Z
  },
  timestamp: '2025-08-10T07:44:21.914Z'
}
Gateway: Broadcast completed
[32m[Nest] 1947011  - [39m08/10/2025, 2:44:21 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mMessage 1: [cx-customer] [object Object][39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:44:21 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mBuilding OpenAI message history:[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:44:21 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mObject:[39m
{
  "historyLength": 0,
  "historyRoles": [],
  "currentMessage": "<@U092RRN555X> logic observations for 5375703"
}

[32m[Nest] 1947011  - [39m08/10/2025, 2:44:21 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mAdding current message: <@U092RRN555X> logic observations for 5375703...[39m
[95m[Nest] 1947011  - [39m08/10/2025, 2:44:21 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mConversation being sent to robot:[39m
[95m[Nest] 1947011  - [39m08/10/2025, 2:44:21 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
[
  {
    "author": "user",
    "content": "<@U092RRN555X> logic observations for 5375703..."
  }
]

[32m[Nest] 1947011  - [39m08/10/2025, 2:44:24 AM [32m    LOG[39m [38;5;3m[SlackSignatureGuard] [39m[32mSlack signature verified successfully[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:44:24 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32m[3c8923ed-c00f-456a-84a6-35adb072333b] Incoming POST /istack-buddy/slack-integration/slack/events[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:44:24 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32mData: {
  "userAgent": "Slackbot 1.0 (+https://api.slack.com/robots)",
  "ip": "::ffff:127.0.0.1",
  "params": {},
  "query": {}
}[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:44:24 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mReceived app mention event[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:44:24 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mDuplicate event detected: Ev09AGQ8C03A[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:44:24 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32m[3c8923ed-c00f-456a-84a6-35adb072333b] Response POST /istack-buddy/slack-integration/slack/events 200 - 4ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:44:24 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32mData: {
  "statusCode": 200,
  "elapsed": "4ms"
}[39m
[95m[Nest] 1947011  - [39m08/10/2025, 2:44:24 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mTool call completion detected[39m
[95m[Nest] 1947011  - [39m08/10/2025, 2:44:24 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormLogicValidation",
  "finishReason": "tool_calls",
  "functionArgs": "{\"formId\":\"5375703\"}"
}

[95m[Nest] 1947011  - [39m08/10/2025, 2:44:24 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mExecuting function call[39m
[95m[Nest] 1947011  - [39m08/10/2025, 2:44:24 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormLogicValidation",
  "functionArgs": {
    "formId": "5375703"
  }
}

[95m[Nest] 1947011  - [39m08/10/2025, 2:44:24 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mChecking onFullMessageReceived callback[39m
[95m[Nest] 1947011  - [39m08/10/2025, 2:44:24 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "hasCallback": true,
  "callbackType": "function"
}

[95m[Nest] 1947011  - [39m08/10/2025, 2:44:24 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mCalling onFullMessageReceived for tool start[39m
[95m[Nest] 1947011  - [39m08/10/2025, 2:44:24 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormLogicValidation",
  "message": "Starting execution of fsRestrictedApiFormLogicValidation..."
}

[95m[Nest] 1947011  - [39m08/10/2025, 2:44:24 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mExecuting tool: fsRestrictedApiFormLogicValidation[39m
[95m[Nest] 1947011  - [39m08/10/2025, 2:44:24 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "toolArgs": {
    "formId": "5375703"
  }
}

[32m[Nest] 1947011  - [39m08/10/2025, 2:44:24 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mTool status updated: fsRestrictedApiFormLogicValidation -> executing[39m
[95m[Nest] 1947011  - [39m08/10/2025, 2:44:24 AM [95m  DEBUG[39m [38;5;3m[MarvToolCall] [39m[95mMarv tool call log[39m
[95m[Nest] 1947011  - [39m08/10/2025, 2:44:24 AM [95m  DEBUG[39m [38;5;3m[MarvToolCall] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormLogicValidation",
  "fnParamsJson": {
    "formId": "5375703"
  }
}

[32m[Nest] 1947011  - [39m08/10/2025, 2:44:26 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mTool fsRestrictedApiFormLogicValidation result: "[object Object]"[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:44:26 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mTool status updated: fsRestrictedApiFormLogicValidation -> completed[39m
[95m[Nest] 1947011  - [39m08/10/2025, 2:44:26 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mTool execution completed[39m
[95m[Nest] 1947011  - [39m08/10/2025, 2:44:26 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "toolName": "fsRestrictedApiFormLogicValidation",
  "resultType": "object",
  "isMarvTool": true
}

ObservationMakerViewer.fromObservationResults called with: {
  hasResult: true,
  hasResponse: true,
  resultType: 'object',
  responseType: 'object'
}
extractLogItems called with: {
  responseType: 'object',
  isArray: false,
  hasLogItems: true,
  hasObservations: false,
  hasData: false,
  responseKeys: [ 'isObservationTrue', 'logItems' ]
}
Extracting from response.logItems, length: 119
Final log items count: 119
Extracted log items: {
  count: 119,
  logItems: '[\n' +
    '  {\n' +
    '    "subjectId": "148456734",\n' +
    '    "logLevel": "warn",\n' +
    '    "subjectType": "field",\n' +
    '    "observationClass": "ObservationMakerLogicValidation",\n' +
    '    "observationMakerClass": "ObservationMakerLogicValidation",\n' +
    '    "message": "Field Logic Validation Check",\n' +
    `    "messageSecondary": "Logic error: \\n     Field '(E) A->B->C-D->E->A (logi...' (148456739) is attempting to  add logic branch which would create circular reference to itself (it's logic includes a check for 148456734).\\n\\n    The logic condition is 'own logic'.\\n\\n    Path to root (dependency chain): [\\n  {\\n    \\"virtualRoot\\": true,\\n    \\"directOwnerFieldId\\": \\"148456734\\",\\n    \\"nodeId\\": \\"148456734\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456734\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456734:0\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456742\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456734:0:2\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456741\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456734:0:2:4\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456740\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456734:0:2:4:6\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456739\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456734:0:2:4:6:8\\"\\n  }\\n]. \\n    ",\n` +
    '    "relatedEntityIds": [\n' +
    '      "148456734",\n' +
    '      "148456734",\n' +
    '      "148456742",\n' +
    '      "148456741",\n' +
    '      "148456740",\n' +
    '      "148456739"\n' +
    '    ],\n' +
    '    "isObservationTrue": true,\n' +
    '    "additionalDetails": {\n' +
    `      "message": "\\n     Field '(E) A->B->C-D->E->A (logi...' (148456739) is attempting to  add logic branch which would create circular reference to itself (it's logic includes a check for 148456734).\\n\\n    The logic condition is 'own logic'.\\n\\n    Path to root (dependency chain): [\\n  {\\n    \\"virtualRoot\\": true,\\n    \\"directOwnerFieldId\\": \\"148456734\\",\\n    \\"nodeId\\": \\"148456734\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456734\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456734:0\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456742\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456734:0:2\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456741\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456734:0:2:4\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456740\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456734:0:2:4:6\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456739\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456734:0:2:4:6:8\\"\\n  }\\n]. \\n    ",\n` +
    '      "existingCheckFieldId": "148456734",\n' +
    '      "logicExpressionString": "{\\"violatingShallowLogic\\":null}",\n' +
    '      "dependencyChainFieldIds": [\n' +
    '        {\n' +
    '          "directOwnerFieldId": "148456734",\n' +
    '          "nodeId": "148456734"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "148456734",\n' +
    '          "nodeId": "148456734:0"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "148456742",\n' +
    '          "nodeId": "148456734:0:2"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "148456741",\n' +
    '          "nodeId": "148456734:0:2:4"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "148456740",\n' +
    '          "nodeId": "148456734:0:2:4:6"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "148456739",\n' +
    '          "nodeId": "148456734:0:2:4:6:8"\n' +
    '        }\n' +
    '      ]\n' +
    '    }\n' +
    '  },\n' +
    '  {\n' +
    '    "subjectId": "148456739",\n' +
    '    "logLevel": "warn",\n' +
    '    "subjectType": "field",\n' +
    '    "observationClass": "ObservationMakerLogicValidation",\n' +
    '    "observationMakerClass": "ObservationMakerLogicValidation",\n' +
    '    "message": "Field Logic Validation Check",\n' +
    `    "messageSecondary": "Logic error: \\n     Field '(D) A->B->C-D->E->A (logi...' (148456740) is attempting to  add logic branch which would create circular reference to itself (it's logic includes a check for 148456739).\\n\\n    The logic condition is 'own logic'.\\n\\n    Path to root (dependency chain): [\\n  {\\n    \\"virtualRoot\\": true,\\n    \\"directOwnerFieldId\\": \\"148456739\\",\\n    \\"nodeId\\": \\"148456739\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456739\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456739:0\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456734\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456739:0:2\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456742\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456739:0:2:4\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456741\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456739:0:2:4:6\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456740\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456739:0:2:4:6:8\\"\\n  }\\n]. \\n    ",\n` +
    '    "relatedEntityIds": [\n' +
    '      "148456739",\n' +
    '      "148456739",\n' +
    '      "148456734",\n' +
    '      "148456742",\n' +
    '      "148456741",\n' +
    '      "148456740"\n' +
    '    ],\n' +
    '    "isObservationTrue": true,\n' +
    '    "additionalDetails": {\n' +
    `      "message": "\\n     Field '(D) A->B->C-D->E->A (logi...' (148456740) is attempting to  add logic branch which would create circular reference to itself (it's logic includes a check for 148456739).\\n\\n    The logic condition is 'own logic'.\\n\\n    Path to root (dependency chain): [\\n  {\\n    \\"virtualRoot\\": true,\\n    \\"directOwnerFieldId\\": \\"148456739\\",\\n    \\"nodeId\\": \\"148456739\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456739\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456739:0\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456734\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456739:0:2\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456742\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456739:0:2:4\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456741\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456739:0:2:4:6\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456740\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456739:0:2:4:6:8\\"\\n  }\\n]. \\n    ",\n` +
    '      "existingCheckFieldId": "148456739",\n' +
    '      "logicExpressionString": "{\\"violatingShallowLogic\\":null}",\n' +
    '      "dependencyChainFieldIds": [\n' +
    '        {\n' +
    '          "directOwnerFieldId": "148456739",\n' +
    '          "nodeId": "148456739"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "148456739",\n' +
    '          "nodeId": "148456739:0"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "148456734",\n' +
    '          "nodeId": "148456739:0:2"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "148456742",\n' +
    '          "nodeId": "148456739:0:2:4"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "148456741",\n' +
    '          "nodeId": "148456739:0:2:4:6"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "148456740",\n' +
    '          "nodeId": "148456739:0:2:4:6:8"\n' +
    '        }\n' +
    '      ]\n' +
    '    }\n' +
    '  }\n' +
    ']'
}
[95m[Nest] 1947011  - [39m08/10/2025, 2:44:26 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mCalling onFullMessageReceived for tool completion[39m
[95m[Nest] 1947011  - [39m08/10/2025, 2:44:26 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormLogicValidation",
  "message": "Finished running fsRestrictedApiFormLogicValidation. Analysis complete."
}

[32m[Nest] 1947011  - [39m08/10/2025, 2:44:26 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mBuilding OpenAI message history:[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:44:26 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mObject:[39m
{
  "historyLength": 1,
  "historyRoles": [
    {
      "fromRole": "cx-customer",
      "content": "<@U092RRN555X> logic observations for 5375703..."
    }
  ],
  "currentMessage": "<@U092RRN555X> logic observations for 5375703"
}

[32m[Nest] 1947011  - [39m08/10/2025, 2:44:26 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mProcessing message with role: cx-customer[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:44:26 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mAdding customer message: <@U092RRN555X> logic observations for 5375703...[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:44:26 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mCurrent message already in history, skipping[39m
[95m[Nest] 1947011  - [39m08/10/2025, 2:44:26 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mConversation being sent to robot:[39m
[95m[Nest] 1947011  - [39m08/10/2025, 2:44:26 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
[
  {
    "author": "user",
    "content": "<@U092RRN555X> logic observations for 5375703..."
  }
]

[32m[Nest] 1947011  - [39m08/10/2025, 2:44:26 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32m[6227c817-419c-4fa1-a766-175f812ed514] Response POST /istack-buddy/slack-integration/slack/events 200 - 5188ms[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:44:26 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32mData: {
  "statusCode": 200,
  "elapsed": "5188ms"
}[39m
[95m[Nest] 1947011  - [39m08/10/2025, 2:44:29 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mTool call completion detected[39m
[95m[Nest] 1947011  - [39m08/10/2025, 2:44:29 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormLogicValidation",
  "finishReason": "tool_calls",
  "functionArgs": "{\"formId\":\"5375703\"}"
}

[95m[Nest] 1947011  - [39m08/10/2025, 2:44:29 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mExecuting function call[39m
[95m[Nest] 1947011  - [39m08/10/2025, 2:44:29 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormLogicValidation",
  "functionArgs": {
    "formId": "5375703"
  }
}

[95m[Nest] 1947011  - [39m08/10/2025, 2:44:29 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mChecking onFullMessageReceived callback[39m
[95m[Nest] 1947011  - [39m08/10/2025, 2:44:29 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "hasCallback": true,
  "callbackType": "function"
}

[95m[Nest] 1947011  - [39m08/10/2025, 2:44:29 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mCalling onFullMessageReceived for tool start[39m
[95m[Nest] 1947011  - [39m08/10/2025, 2:44:29 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormLogicValidation",
  "message": "Starting execution of fsRestrictedApiFormLogicValidation..."
}

[95m[Nest] 1947011  - [39m08/10/2025, 2:44:29 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95monFullMessageReceived called in multi-part response[39m
[95m[Nest] 1947011  - [39m08/10/2025, 2:44:29 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "contentLength": 59,
  "contentType": "text/plain"
}

[95m[Nest] 1947011  - [39m08/10/2025, 2:44:29 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mSending intermediate message via delayedMessageCallback[39m
[95m[Nest] 1947011  - [39m08/10/2025, 2:44:29 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "content": "Starting execution of fsRestrictedApiFormLogicValidation......",
  "contentType": "text/plain"
}

{
  allConversationMessages: [
    {
      id: '5e30ad71-ad74-4fe2-84d9-b13296b755e9',
      content: [Object],
      conversationId: '0361113d-da19-4235-bee4-20ef02694ed8',
      fromUserId: 'cx-slack-robot',
      fromRole: 'cx-customer',
      toRole: 'cx-agent',
      messageType: 'text',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T07:44:21.914Z,
      updatedAt: 2025-08-10T07:44:21.914Z
    },
    {
      id: '8055ce4e-0e94-4da2-a1db-140ed3fce791',
      content: [Object],
      conversationId: '0361113d-da19-4235-bee4-20ef02694ed8',
      fromUserId: 'cx-slack-robot',
      fromRole: 'robot',
      toRole: 'cx-customer',
      messageType: 'robot',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T07:44:29.356Z,
      updatedAt: 2025-08-10T07:44:29.356Z
    }
  ]
}
[95m[Nest] 1947011  - [39m08/10/2025, 2:44:29 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mBroadcasting dashboard event: conversation_updated[39m
[95m[Nest] 1947011  - [39m08/10/2025, 2:44:29 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mExecuting tool: fsRestrictedApiFormLogicValidation[39m
[95m[Nest] 1947011  - [39m08/10/2025, 2:44:29 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "toolArgs": {
    "formId": "5375703"
  }
}

[32m[Nest] 1947011  - [39m08/10/2025, 2:44:29 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mTool status updated: fsRestrictedApiFormLogicValidation -> executing[39m
Gateway: Broadcasting new_message to conversation 0361113d-da19-4235-bee4-20ef02694ed8: {
  message: {
    id: '8055ce4e-0e94-4da2-a1db-140ed3fce791',
    content: {
      type: 'text/plain',
      payload: 'Starting execution of fsRestrictedApiFormLogicValidation...'
    },
    conversationId: '0361113d-da19-4235-bee4-20ef02694ed8',
    fromUserId: 'cx-slack-robot',
    fromRole: 'robot',
    toRole: 'cx-customer',
    messageType: 'robot',
    threadId: undefined,
    originalMessageId: undefined,
    createdAt: 2025-08-10T07:44:29.356Z,
    updatedAt: 2025-08-10T07:44:29.356Z
  },
  timestamp: '2025-08-10T07:44:29.356Z'
}
Gateway: Broadcast completed
[95m[Nest] 1947011  - [39m08/10/2025, 2:44:29 AM [95m  DEBUG[39m [38;5;3m[MarvToolCall] [39m[95mMarv tool call log[39m
[95m[Nest] 1947011  - [39m08/10/2025, 2:44:29 AM [95m  DEBUG[39m [38;5;3m[MarvToolCall] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormLogicValidation",
  "fnParamsJson": {
    "formId": "5375703"
  }
}

[32m[Nest] 1947011  - [39m08/10/2025, 2:44:29 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mMessage sent to Slack channel C091Y5UNA1M[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:44:29 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mTool fsRestrictedApiFormLogicValidation result: "[object Object]"[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:44:29 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mTool status updated: fsRestrictedApiFormLogicValidation -> completed[39m
[95m[Nest] 1947011  - [39m08/10/2025, 2:44:29 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mTool execution completed[39m
[95m[Nest] 1947011  - [39m08/10/2025, 2:44:29 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "toolName": "fsRestrictedApiFormLogicValidation",
  "resultType": "object",
  "isMarvTool": true
}

ObservationMakerViewer.fromObservationResults called with: {
  hasResult: true,
  hasResponse: true,
  resultType: 'object',
  responseType: 'object'
}
extractLogItems called with: {
  responseType: 'object',
  isArray: false,
  hasLogItems: true,
  hasObservations: false,
  hasData: false,
  responseKeys: [ 'isObservationTrue', 'logItems' ]
}
Extracting from response.logItems, length: 119
Final log items count: 119
Extracted log items: {
  count: 119,
  logItems: '[\n' +
    '  {\n' +
    '    "subjectId": "148456734",\n' +
    '    "logLevel": "warn",\n' +
    '    "subjectType": "field",\n' +
    '    "observationClass": "ObservationMakerLogicValidation",\n' +
    '    "observationMakerClass": "ObservationMakerLogicValidation",\n' +
    '    "message": "Field Logic Validation Check",\n' +
    `    "messageSecondary": "Logic error: \\n     Field '(E) A->B->C-D->E->A (logi...' (148456739) is attempting to  add logic branch which would create circular reference to itself (it's logic includes a check for 148456734).\\n\\n    The logic condition is 'own logic'.\\n\\n    Path to root (dependency chain): [\\n  {\\n    \\"virtualRoot\\": true,\\n    \\"directOwnerFieldId\\": \\"148456734\\",\\n    \\"nodeId\\": \\"148456734\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456734\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456734:0\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456742\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456734:0:2\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456741\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456734:0:2:4\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456740\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456734:0:2:4:6\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456739\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456734:0:2:4:6:8\\"\\n  }\\n]. \\n    ",\n` +
    '    "relatedEntityIds": [\n' +
    '      "148456734",\n' +
    '      "148456734",\n' +
    '      "148456742",\n' +
    '      "148456741",\n' +
    '      "148456740",\n' +
    '      "148456739"\n' +
    '    ],\n' +
    '    "isObservationTrue": true,\n' +
    '    "additionalDetails": {\n' +
    `      "message": "\\n     Field '(E) A->B->C-D->E->A (logi...' (148456739) is attempting to  add logic branch which would create circular reference to itself (it's logic includes a check for 148456734).\\n\\n    The logic condition is 'own logic'.\\n\\n    Path to root (dependency chain): [\\n  {\\n    \\"virtualRoot\\": true,\\n    \\"directOwnerFieldId\\": \\"148456734\\",\\n    \\"nodeId\\": \\"148456734\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456734\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456734:0\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456742\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456734:0:2\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456741\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456734:0:2:4\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456740\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456734:0:2:4:6\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456739\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456734:0:2:4:6:8\\"\\n  }\\n]. \\n    ",\n` +
    '      "existingCheckFieldId": "148456734",\n' +
    '      "logicExpressionString": "{\\"violatingShallowLogic\\":null}",\n' +
    '      "dependencyChainFieldIds": [\n' +
    '        {\n' +
    '          "directOwnerFieldId": "148456734",\n' +
    '          "nodeId": "148456734"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "148456734",\n' +
    '          "nodeId": "148456734:0"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "148456742",\n' +
    '          "nodeId": "148456734:0:2"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "148456741",\n' +
    '          "nodeId": "148456734:0:2:4"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "148456740",\n' +
    '          "nodeId": "148456734:0:2:4:6"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "148456739",\n' +
    '          "nodeId": "148456734:0:2:4:6:8"\n' +
    '        }\n' +
    '      ]\n' +
    '    }\n' +
    '  },\n' +
    '  {\n' +
    '    "subjectId": "148456739",\n' +
    '    "logLevel": "warn",\n' +
    '    "subjectType": "field",\n' +
    '    "observationClass": "ObservationMakerLogicValidation",\n' +
    '    "observationMakerClass": "ObservationMakerLogicValidation",\n' +
    '    "message": "Field Logic Validation Check",\n' +
    `    "messageSecondary": "Logic error: \\n     Field '(D) A->B->C-D->E->A (logi...' (148456740) is attempting to  add logic branch which would create circular reference to itself (it's logic includes a check for 148456739).\\n\\n    The logic condition is 'own logic'.\\n\\n    Path to root (dependency chain): [\\n  {\\n    \\"virtualRoot\\": true,\\n    \\"directOwnerFieldId\\": \\"148456739\\",\\n    \\"nodeId\\": \\"148456739\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456739\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456739:0\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456734\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456739:0:2\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456742\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456739:0:2:4\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456741\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456739:0:2:4:6\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456740\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456739:0:2:4:6:8\\"\\n  }\\n]. \\n    ",\n` +
    '    "relatedEntityIds": [\n' +
    '      "148456739",\n' +
    '      "148456739",\n' +
    '      "148456734",\n' +
    '      "148456742",\n' +
    '      "148456741",\n' +
    '      "148456740"\n' +
    '    ],\n' +
    '    "isObservationTrue": true,\n' +
    '    "additionalDetails": {\n' +
    `      "message": "\\n     Field '(D) A->B->C-D->E->A (logi...' (148456740) is attempting to  add logic branch which would create circular reference to itself (it's logic includes a check for 148456739).\\n\\n    The logic condition is 'own logic'.\\n\\n    Path to root (dependency chain): [\\n  {\\n    \\"virtualRoot\\": true,\\n    \\"directOwnerFieldId\\": \\"148456739\\",\\n    \\"nodeId\\": \\"148456739\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456739\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456739:0\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456734\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456739:0:2\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456742\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456739:0:2:4\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456741\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456739:0:2:4:6\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456740\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456739:0:2:4:6:8\\"\\n  }\\n]. \\n    ",\n` +
    '      "existingCheckFieldId": "148456739",\n' +
    '      "logicExpressionString": "{\\"violatingShallowLogic\\":null}",\n' +
    '      "dependencyChainFieldIds": [\n' +
    '        {\n' +
    '          "directOwnerFieldId": "148456739",\n' +
    '          "nodeId": "148456739"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "148456739",\n' +
    '          "nodeId": "148456739:0"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "148456734",\n' +
    '          "nodeId": "148456739:0:2"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "148456742",\n' +
    '          "nodeId": "148456739:0:2:4"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "148456741",\n' +
    '          "nodeId": "148456739:0:2:4:6"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "148456740",\n' +
    '          "nodeId": "148456739:0:2:4:6:8"\n' +
    '        }\n' +
    '      ]\n' +
    '    }\n' +
    '  }\n' +
    ']'
}
[95m[Nest] 1947011  - [39m08/10/2025, 2:44:29 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mCalling onFullMessageReceived for tool completion[39m
[95m[Nest] 1947011  - [39m08/10/2025, 2:44:29 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormLogicValidation",
  "message": "Finished running fsRestrictedApiFormLogicValidation. Analysis complete."
}

[95m[Nest] 1947011  - [39m08/10/2025, 2:44:29 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95monFullMessageReceived called in multi-part response[39m
[95m[Nest] 1947011  - [39m08/10/2025, 2:44:29 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "contentLength": 71,
  "contentType": "text/plain"
}

[95m[Nest] 1947011  - [39m08/10/2025, 2:44:29 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mSending intermediate message via delayedMessageCallback[39m
[95m[Nest] 1947011  - [39m08/10/2025, 2:44:29 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "content": "Finished running fsRestrictedApiFormLogicValidation. Analysis complete....",
  "contentType": "text/plain"
}

{
  allConversationMessages: [
    {
      id: '5e30ad71-ad74-4fe2-84d9-b13296b755e9',
      content: [Object],
      conversationId: '0361113d-da19-4235-bee4-20ef02694ed8',
      fromUserId: 'cx-slack-robot',
      fromRole: 'cx-customer',
      toRole: 'cx-agent',
      messageType: 'text',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T07:44:21.914Z,
      updatedAt: 2025-08-10T07:44:21.914Z
    },
    {
      id: '8055ce4e-0e94-4da2-a1db-140ed3fce791',
      content: [Object],
      conversationId: '0361113d-da19-4235-bee4-20ef02694ed8',
      fromUserId: 'cx-slack-robot',
      fromRole: 'robot',
      toRole: 'cx-customer',
      messageType: 'robot',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T07:44:29.356Z,
      updatedAt: 2025-08-10T07:44:29.356Z
    },
    {
      id: '7313aea3-4423-453e-bb71-a5cb59a9f549',
      content: [Object],
      conversationId: '0361113d-da19-4235-bee4-20ef02694ed8',
      fromUserId: 'cx-slack-robot',
      fromRole: 'robot',
      toRole: 'cx-customer',
      messageType: 'robot',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T07:44:29.906Z,
      updatedAt: 2025-08-10T07:44:29.906Z
    }
  ]
}
[95m[Nest] 1947011  - [39m08/10/2025, 2:44:29 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mBroadcasting dashboard event: conversation_updated[39m
Gateway: Broadcasting new_message to conversation 0361113d-da19-4235-bee4-20ef02694ed8: {
  message: {
    id: '7313aea3-4423-453e-bb71-a5cb59a9f549',
    content: {
      type: 'text/plain',
      payload: 'Finished running fsRestrictedApiFormLogicValidation. Analysis complete.'
    },
    conversationId: '0361113d-da19-4235-bee4-20ef02694ed8',
    fromUserId: 'cx-slack-robot',
    fromRole: 'robot',
    toRole: 'cx-customer',
    messageType: 'robot',
    threadId: undefined,
    originalMessageId: undefined,
    createdAt: 2025-08-10T07:44:29.906Z,
    updatedAt: 2025-08-10T07:44:29.906Z
  },
  timestamp: '2025-08-10T07:44:29.906Z'
}
Gateway: Broadcast completed
[95m[Nest] 1947011  - [39m08/10/2025, 2:44:29 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95monStreamFinished called[39m
[95m[Nest] 1947011  - [39m08/10/2025, 2:44:29 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "contentLength": 243526,
  "authorRole": "assistant",
  "contentPreview": "To analyze the logic for form `5375703`, I'll run a logic validation check. Please hold on for a mom..."
}

[95m[Nest] 1947011  - [39m08/10/2025, 2:44:29 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mCalling delayedMessageCallback with finished message[39m
{
  allConversationMessages: [
    {
      id: '5e30ad71-ad74-4fe2-84d9-b13296b755e9',
      content: [Object],
      conversationId: '0361113d-da19-4235-bee4-20ef02694ed8',
      fromUserId: 'cx-slack-robot',
      fromRole: 'cx-customer',
      toRole: 'cx-agent',
      messageType: 'text',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T07:44:21.914Z,
      updatedAt: 2025-08-10T07:44:21.914Z
    },
    {
      id: '8055ce4e-0e94-4da2-a1db-140ed3fce791',
      content: [Object],
      conversationId: '0361113d-da19-4235-bee4-20ef02694ed8',
      fromUserId: 'cx-slack-robot',
      fromRole: 'robot',
      toRole: 'cx-customer',
      messageType: 'robot',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T07:44:29.356Z,
      updatedAt: 2025-08-10T07:44:29.356Z
    },
    {
      id: '7313aea3-4423-453e-bb71-a5cb59a9f549',
      content: [Object],
      conversationId: '0361113d-da19-4235-bee4-20ef02694ed8',
      fromUserId: 'cx-slack-robot',
      fromRole: 'robot',
      toRole: 'cx-customer',
      messageType: 'robot',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T07:44:29.906Z,
      updatedAt: 2025-08-10T07:44:29.906Z
    },
    {
      id: '9ea65d09-f1e2-4c9b-a8ad-8f4d3709931c',
      content: [Object],
      conversationId: '0361113d-da19-4235-bee4-20ef02694ed8',
      fromUserId: 'cx-slack-robot',
      fromRole: 'robot',
      toRole: 'cx-customer',
      messageType: 'robot',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T07:44:29.910Z,
      updatedAt: 2025-08-10T07:44:29.910Z
    }
  ]
}
[95m[Nest] 1947011  - [39m08/10/2025, 2:44:29 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mBroadcasting dashboard event: conversation_updated[39m
Gateway: Broadcasting new_message to conversation 0361113d-da19-4235-bee4-20ef02694ed8: {
  message: {
    id: '9ea65d09-f1e2-4c9b-a8ad-8f4d3709931c',
    content: {
      type: 'text/plain',
      payload: "To analyze the logic for form `5375703`, I'll run a logic validation check. Please hold on for a moment while I process this.\n" +
        '🔍 *Logic Validation Results*\n' +
        '\n' +
        '📊 *Summary:* 119 total log items\n' +
        '• ❌ 0 errors\n' +
        '• ⚠️ 115 warnings\n' +
        '• ℹ️ 4 info\n' +
        '• 🔍 0 debug\n' +
        '\n' +
        '⚠️ *Found 115 issue(s):*\n' +
        '\n' +
        '⚠️ *WARNING* (1/115)\n' +
        '• *Message:* Logic error: \n' +
        "     Field '(E) A->B->C-D->E->A (logi...' (148456739) is attempting to  add logic branch which would create circular reference to itself (it's logic includes a check for 148456734).\n" +
        '\n' +
        "    The logic condition is 'own logic'.\n" +
        '\n' +
        '    Path to root (dependency chain): [\n' +
        '  {\n' +
        '    "virtualRoot": true,\n' +
        '    "directOwnerFieldId": "148456734",\n' +
        '    "nodeId": "148456734"\n' +
        '  },\n' +
        '  {\n' +
        '    "operator": "$and",\n' +
        '    "directOwnerFieldId": "148456734",\n' +
        '    "isOwnBranch": true,\n' +
        '    "nodeId": "148456734:0"\n' +
        '  },\n' +
        '  {\n' +
        '    "operator": "$and",\n' +
        '    "directOwnerFieldId": "148456742",\n' +
        '    "isOwnBranch": true,\n' +
        '    "nodeId": "148456734:0:2"\n' +
        '  },\n' +
        '  {\n' +
        '    "operator": "$and",\n' +
        '    "directOwnerFieldId": "148456741",\n' +
        '    "isOwnBranch": true,\n' +
        '    "nodeId": "148456734:0:2:4"\n' +
        '  },\n' +
        '  {\n' +
        '    "operator": "$and",\n' +
        '    "directOwnerFieldId": "148456740",\n' +
        '    "isOwnBranch": true,\n' +
        '    "nodeId": "148456734:0:2:4:6"\n' +
        '  },\n' +
        '  {\n' +
        '    "operator": "$and",\n' +
        '    "directOwnerFieldId": "148456739",\n' +
        '    "isOwnBranch": true,\n' +
        '    "nodeId": "148456734:0:2:4:6:8"\n' +
        '  }\n' +
        ']. \n' +
        '    \n' +
        '• *Subject ID:* `148456734`\n' +
        `• *Additional Details:* {"message":"\\n     Field '(E) A->B->C-D->E->A (logi...' (148456739) is attempting to  add logic branch which would create circular reference to itself (it's logic includes a check for 148456734).\\n\\n    The logic condition is 'own logic'.\\n\\n    Path to root (dependency chain): [\\n  {\\n    \\"virtualRoot\\": true,\\n    \\"directOwnerFieldId\\": \\"148456734\\",\\n    \\"nodeId\\": \\"148456734\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456734\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456734:0\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456742\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456734:0:2\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456741\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456734:0:2:4\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456740\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456734:0:2:4:6\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456739\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456734:0:2:4:6:8\\"\\n  }\\n]. \\n    ","existingCheckFieldId":"148456734","logicExpressionString":"{\\"violatingShallowLogic\\":null}","dependencyChainFieldIds":[{"directOwnerFieldId":"148456734","nodeId":"148456734"},{"directOwnerFieldId":"148456734","nodeId":"148456734:0"},{"directOwnerFieldId":"148456742","nodeId":"148456734:0:2"},{"directOwnerFieldId":"148456741","nodeId":"148456734:0:2:4"},{"directOwnerFieldId":"148456740","nodeId":"148456734:0:2:4:6"},{"directOwnerFieldId":"148456739","nodeId":"148456734:0:2:4:6:8"}]}\n` +
        '\n' +
        '⚠️ *WARNING* (2/115)\n' +
        '• *Message:* Logic error: \n' +
        "     Field '(D) A->B->C-D->E->A (logi...' (148456740) is attempting to  add logic branch which would create circular reference to itself (it's logic includes a check for 148456739).\n" +
        '\n' +
        "    The logic condition is 'own logic'.\n" +
        '\n' +
        '    Path to root (dependency chain): [\n' +
        '  {\n' +
        '    "virtualRoot": true,\n' +
        '    "directOwnerFieldId": "148456739",\n' +
        '    "nodeId": "148456739"\n' +
        '  },\n' +
        '  {\n' +
        '    "operator": "$and",\n' +
        '    "directOwnerFieldId": "148456739",\n' +
        '    "isOwnBranch": true,\n' +
        '    "nodeId": "148456739:0"\n' +
        '  },\n' +
        '  {\n' +
        '    "operator": "$and",\n' +
        '    "directOwnerFieldId": "148456734",\n' +
        '    "isOwnBranch": true,\n' +
        '    "nodeId": "148456739:0:2"\n' +
        '  },\n' +
        '  {\n' +
        '    "operator": "$and",\n' +
        '    "directOwnerFieldId": "148456742",\n' +
        '    "isOwnBranch": true,\n' +
        '    "nodeId": "148456739:0:2:4"\n' +
        '  },\n' +
        '  {\n' +
        '    "operator": "$and",\n' +
        '    "directOwnerFieldId": "148456741",\n' +
        '    "isOwnBranch": true,\n' +
        '    "nodeId": "148456739:0:2:4:6"\n' +
        '  },\n' +
        '  {\n' +
        '    "operator": "$and",\n' +
        '    "directOwnerFieldId": "148456740",\n' +
        '    "isOwnBranch": true,\n' +
        '    "nodeId": "148456739:0:2:4:6:8"\n' +
        '  }\n' +
        ']. \n' +
        '    \n' +
        '• *Subject ID:* `148456739`\n' +
        `• *Additional Details:* {"message":"\\n     Field '(D) A->B->C-D->E->A (logi...' (148456740) is attempting to  add logic branch which would create circular reference to itself (it's logic includes a check for 148456739).\\n\\n    The logic condition is 'own logic'.\\n\\n    Path to root (dependency chain): [\\n  {\\n    \\"virtualRoot\\": true,\\n    \\"directOwnerFieldId\\": \\"148456739\\",\\n    \\"nodeId\\": \\"148456739\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456739\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456739:0\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456734\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456739:0:2\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456742\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456739:0:2:4\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456741\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456739:0:2:4:6\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456740\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456739:0:2:4:6:8\\"\\n  }\\n]. \\n    ","existingCheckFieldId":"148456739","logicExpressionString":"{\\"violatingShallowLogic\\":null}","dependencyChainFieldIds":[{"directOwnerFieldId":"148456739","nodeId":"148456739"},{"directOwnerFieldId":"148456739","nodeId":"148456739:0"},{"directOwnerFieldId":"148456734","nodeId":"148456739:0:2"},{"directOwnerFieldId":"148456742","nodeId":"148456739:0:2:4"},{"directOwnerFieldId":"148456741","nodeId":"148456739:0:2:4:6"},{"directOwnerFieldId":"148456740","nodeId":"148456739:0:2:4:6:8"}]}\n` +
        '\n' +
        '⚠️ *WARNING* (3/115)\n' +
        '• *Message:* Logic error: \n' +
        "     Field '(C) A->B->C-D->E->A (logi...' (148456741) is attempting to  add logic branch which would create circular reference to itself (it's logic includes a check for 148456740).\n" +
        '\n' +
        "    The logic condition is 'own logic'.\n" +
        '\n' +
        '    Path to root (dependency chain): [\n' +
        '  {\n' +
        '    "virtualRoot": true,\n' +
        '    "directOwnerFieldId": "148456740",\n' +
        '    "nodeId": "148456740"\n' +
        '  },\n' +
        '  {\n' +
        '    "operator": "$and",\n' +
        '    "directOwnerFieldId": "148456740",\n' +
        '    "isOwnBranch": true,\n' +
        '    "nodeId": "148456740:0"\n' +
        '  },\n' +
        '  {\n' +
        '    "operator": "$and",\n' +
        '    "directOwnerFieldId": "148456739",\n' +
        '    "isOwnBranch": true,\n' +
        '    "nodeId": "148456740:0:2"\n' +
        '  },\n' +
        '  {\n' +
        '    "operator": "$and",\n' +
        '    "directOwnerFieldId": "148456734",\n' +
        '    "isOwnBranch": true,\n' +
        '    "nodeId": "148456740:0:2:4"\n' +
        '  },\n' +
        '  {\n' +
        '    "operator": "$and",\n' +
        '    "directOwnerFieldId": "148456742",\n' +
        '    "isOwnBranch": true,\n' +
        '    "nodeId": "148456740:0:2:4:6"\n' +
        '  },\n' +
        '  {\n' +
        '    "operator": "$and",\n' +
        '    "directOwnerFieldId": "148456741",\n' +
        '    "isOwnBranch": true,\n' +
        '    "nodeId": "148456740:0:2:4:6:8"\n' +
        '  }\n' +
        ']. \n' +
        '    \n' +
        '• *Subject ID:* `148456740`\n' +
        `• *Additional Details:* {"message":"\\n     Field '(C) A->B->C-D->E->A (logi...' (148456741) is attempting to  add logic branch which would create circular reference to itself (it's logic includes a check for 148456740).\\n\\n    The logic condition is 'own logic'.\\n\\n    Path to root (dependency chain): [\\n  {\\n    \\"virtualRoot\\": true,\\n    \\"directOwnerFieldId\\": \\"148456740\\",\\n    \\"nodeId\\": \\"148456740\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456740\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456740:0\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456739\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456740:0:2\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456734\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456740:0:2:4\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456742\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456740:0:2:4:6\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456741\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456740:0:2:4:6:8\\"\\n  }\\n]. \\n    ","existingCheckFieldId":"148456740","logicExpressionString":"{\\"violatingShallowLogic\\":null}","dependencyChainFieldIds":[{"directOwnerFieldId":"148456740","nodeId":"148456740"},{"directOwnerFieldId":"148456740","nodeId":"148456740:0"},{"directOwnerFieldId":"148456739","nodeId":"148456740:0:2"},{"directOwnerFieldId":"148456734","nodeId":"148456740:0:2:4"},{"directOwnerFieldId":"148456742","nodeId":"148456740:0:2:4:6"},{"directOwnerFieldId":"148456741","nodeId":"148456740:0:2:4:6:8"}]}\n` +
        '\n' +
        '⚠️ *WARNING* (4/115)\n' +
        '• *Message:* Logic error: \n' +
        "     Field '(B) A->B->C-D->E->A (logi...' (148456742) is attempting to  add logic branch which would create circular reference to itself (it's logic includes a check for 148456741).\n" +
        '\n' +
        "    The logic condition is 'own logic'.\n" +
        '\n' +
        '    Path to root (dependency chain): [\n' +
        '  {\n' +
        '    "virtualRoot": true,\n' +
        '    "directOwnerFieldId": "148456741",\n' +
        '    "nodeId": "148456741"\n' +
        '  },\n' +
        '  {\n' +
        '    "operator": "$and",\n' +
        '    "directOwnerFieldId": "148456741",\n' +
        '    "isOwnBranch": true,\n' +
        '    "nodeId": "148456741:0"\n' +
        '  },\n' +
        '  {\n' +
        '    "operator": "$and",\n' +
        '    "directOwnerFieldId": "148456740",\n' +
        '    "isOwnBranch": true,\n' +
        '    "nodeId": "148456741:0:2"\n' +
        '  },\n' +
        '  {\n' +
        '    "operator": "$and",\n' +
        '    "directOwnerFieldId": "148456739",\n' +
        '    "isOwnBranch": true,\n' +
        '    "nodeId": "148456741:0:2:4"\n' +
        '  },\n' +
        '  {\n' +
        '    "operator": "$and",\n' +
        '    "directOwnerFieldId": "148456734",\n' +
        '    "isOwnBranch": true,\n' +
        '    "nodeId": "148456741:0:2:4:6"\n' +
        '  },\n' +
        '  {\n' +
        '    "operator": "$and",\n' +
        '    "directOwnerFieldId": "148456742",\n' +
        '    "isOwnBranch": true,\n' +
        '    "nodeId": "148456741:0:2:4:6:8"\n' +
        '  }\n' +
        ']. \n' +
        '    \n' +
        '• *Subject ID:* `148456741`\n' +
        `• *Additional Details:* {"message":"\\n     Field '(B) A->B->C-D->E->A (logi...' (148456742) is attempting to  add logic branch which would create circular reference to itself (it's logic includes a check for 148456741).\\n\\n    The logic condition is 'own logic'.\\n\\n    Path to root (dependency chain): [\\n  {\\n    \\"virtualRoot\\": true,\\n    \\"directOwnerFieldId\\": `... 233526 more characters
    },
    conversationId: '0361113d-da19-4235-bee4-20ef02694ed8',
    fromUserId: 'cx-slack-robot',
    fromRole: 'robot',
    toRole: 'cx-customer',
    messageType: 'robot',
    threadId: undefined,
    originalMessageId: undefined,
    createdAt: 2025-08-10T07:44:29.910Z,
    updatedAt: 2025-08-10T07:44:29.910Z
  },
  timestamp: '2025-08-10T07:44:29.910Z'
}
Gateway: Broadcast completed
[32m[Nest] 1947011  - [39m08/10/2025, 2:44:30 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mMessage sent to Slack channel C091Y5UNA1M[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:44:31 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mMessage sent to Slack channel C091Y5UNA1M[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:44:44 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:45:44 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1947011  - [39m08/10/2025, 2:46:44 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[2J[3J[H[[90m2:47:19 AM[0m] File change detected. Starting incremental compilation...

[[90m2:47:19 AM[0m] Found 0 errors. Watching for file changes.

[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[NestFactory] [39m[32mStarting Nest application...[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mRobotModule dependencies initialized[39m[38;5;3m +11ms[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConversationListServiceModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mLoggerModule dependencies initialized[39m[38;5;3m +0ms[39m
[95m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.constructor] [39m[95mFile-based permissions loaded successfully[39m
[95m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.constructor] [39m[95mData: {
  "userPermissionsCount": 0,
  "groupPermissionsCount": 0,
  "userGroupMembershipsCount": 0
}[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAuthorizationPermissionsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAppModule dependencies initialized[39m[38;5;3m +0ms[39m
[95m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [95m  DEBUG[39m [38;5;3m[AuthenticationService.constructor] [39m[95mAuthentication service initialized with configuration[39m
[95m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [95m  DEBUG[39m [38;5;3m[AuthenticationService.constructor] [39m[95mData: {
  "sessionTimeoutSeconds": 28800
}[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAuthenticationModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mGuardsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mIstackBuddySlackApiModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mDevDebugModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mPublicInterfaceModule dependencies initialized[39m[38;5;3m +2ms[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mChatManagerModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mUserProfileModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "join_room" message[39m[38;5;3m +16ms[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "leave_room" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "send_message" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "typing_start" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "typing_stop" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "get_messages" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "share_robot_message" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "join_dashboard" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "leave_dashboard" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAppController {/}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAuthenticationController {/auth}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/user, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/profile/me, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mUserProfileController {/user-profiles}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/user-profiles/me, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mDevDebugController {/dev-debug}:[39m[38;5;3m +1ms[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/auth, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/user-details/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/users, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/auth-status/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mChatManagerController {/chat}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/messages, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/messages, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/messages/last/:count, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/join, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/participants, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/dashboard/stats, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/start, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/leave, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mIstackBuddySlackApiController {/}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/istack-buddy/slack-integration/health, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/istack-buddy/slack-integration/debug, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/istack-buddy/slack-integration/slack/events, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mPublicInterfaceController {/public}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/debug-create, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId/:formId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId/:formId/chat-messages, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId/:formId/chat-messages, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[SlackyAnthropicAgent] [39m[32mSlackyAnthropicAgent constructor called - class loaded[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mSlackyOpenAiAgent constructor called - class loaded[39m
[95m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: ChatRobotParrot v1.0.0[39m
[95m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: AgentRobotParrot v1.0.0[39m
[95m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: RobotChatOpenAI v1.0.0-test-dev[39m
[95m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: RobotChatAnthropic v1.0.0[39m
[95m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackyAnthropicAgent v1.0.0[39m
[95m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: MarvOpenAiAgent v1.0.0[39m
[95m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackyOpenAiAgent v1.0.0[39m
[95m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: AnthropicMarv v1.0.0[39m
[95m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackAgentCoreFormsParrot v1.0.0[39m
[95m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackAgentCoreFormsSsoAutofillParrot v1.0.0[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[RobotService] [39m[32mInitialized 10 robots[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[NestApplication] [39m[32mNest application successfully started[39m[38;5;3m +1ms[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[Bootstrap] [39m[32miStack Buddy Server running on: http://localhost:3500[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [32m    LOG[39m [38;5;3m[Bootstrap] [39m[32mAPI Documentation available at: http://localhost:3500/api[39m
[33m[Nest] 1948685  - [39m08/10/2025, 2:47:20 AM [33m   WARN[39m [38;5;3m[Bootstrap] [39m[33mCORS enabled for ALL origins (temporary)[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:21 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: 2peP5lYoMlRqkKucAAAB[39m
[95m[Nest] 1948685  - [39m08/10/2025, 2:47:21 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mJoin room data received[39m
[95m[Nest] 1948685  - [39m08/10/2025, 2:47:21 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "data": {
    "conversationId": "cae98459-9ded-42e1-bef7-31628f344b65",
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[95m[Nest] 1948685  - [39m08/10/2025, 2:47:21 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mApplied default joinData[39m
[95m[Nest] 1948685  - [39m08/10/2025, 2:47:21 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "joinData": {
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[ChatManagerService] Attempting to join conversation: cae98459-9ded-42e1-bef7-31628f344b65
[ChatManagerService] Available conversations: []
[31m[Nest] 1948685  - [39m08/10/2025, 2:47:21 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError in handleJoinRoom[39m
[31m[Nest] 1948685  - [39m08/10/2025, 2:47:21 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError: Conversation cae98459-9ded-42e1-bef7-31628f344b65 not found[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:21 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: 4RMAJ2QNpBeaMi2WAAAD[39m
[95m[Nest] 1948685  - [39m08/10/2025, 2:47:21 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mJoin room data received[39m
[95m[Nest] 1948685  - [39m08/10/2025, 2:47:21 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "data": {
    "conversationId": "bb9a404c-d7f8-48e3-88e7-5824edcee08c",
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[95m[Nest] 1948685  - [39m08/10/2025, 2:47:21 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mApplied default joinData[39m
[95m[Nest] 1948685  - [39m08/10/2025, 2:47:21 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "joinData": {
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[ChatManagerService] Attempting to join conversation: bb9a404c-d7f8-48e3-88e7-5824edcee08c
[ChatManagerService] Available conversations: []
[31m[Nest] 1948685  - [39m08/10/2025, 2:47:21 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError in handleJoinRoom[39m
[31m[Nest] 1948685  - [39m08/10/2025, 2:47:21 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError: Conversation bb9a404c-d7f8-48e3-88e7-5824edcee08c not found[39m
[32m[Nest] 1948685  - [39m08/10/2025, 2:47:21 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: nE1YXz1XZYuNIgP5AAAF[39m
[95m[Nest] 1948685  - [39m08/10/2025, 2:47:21 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mJoin room data received[39m
[95m[Nest] 1948685  - [39m08/10/2025, 2:47:21 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "data": {
    "conversationId": "321d767c-fa29-4565-88b7-bf2a9c237bc4",
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[95m[Nest] 1948685  - [39m08/10/2025, 2:47:21 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mApplied default joinData[39m
[95m[Nest] 1948685  - [39m08/10/2025, 2:47:21 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "joinData": {
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[ChatManagerService] Attempting to join conversation: 321d767c-fa29-4565-88b7-bf2a9c237bc4
[ChatManagerService] Available conversations: []
[31m[Nest] 1948685  - [39m08/10/2025, 2:47:21 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError in handleJoinRoom[39m
[31m[Nest] 1948685  - [39m08/10/2025, 2:47:21 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError: Conversation 321d767c-fa29-4565-88b7-bf2a9c237bc4 not found[39m
[2J[3J[H[[90m2:47:29 AM[0m] File change detected. Starting incremental compilation...

[[90m2:47:29 AM[0m] Found 0 errors. Watching for file changes.

[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[NestFactory] [39m[32mStarting Nest application...[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mRobotModule dependencies initialized[39m[38;5;3m +8ms[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConversationListServiceModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mLoggerModule dependencies initialized[39m[38;5;3m +0ms[39m
[95m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.constructor] [39m[95mFile-based permissions loaded successfully[39m
[95m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.constructor] [39m[95mData: {
  "userPermissionsCount": 0,
  "groupPermissionsCount": 0,
  "userGroupMembershipsCount": 0
}[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAuthorizationPermissionsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAppModule dependencies initialized[39m[38;5;3m +0ms[39m
[95m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [95m  DEBUG[39m [38;5;3m[AuthenticationService.constructor] [39m[95mAuthentication service initialized with configuration[39m
[95m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [95m  DEBUG[39m [38;5;3m[AuthenticationService.constructor] [39m[95mData: {
  "sessionTimeoutSeconds": 28800
}[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAuthenticationModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mGuardsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mIstackBuddySlackApiModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mDevDebugModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mPublicInterfaceModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mChatManagerModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mUserProfileModule dependencies initialized[39m[38;5;3m +2ms[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "join_room" message[39m[38;5;3m +14ms[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "leave_room" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "send_message" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "typing_start" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "typing_stop" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "get_messages" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "share_robot_message" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "join_dashboard" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "leave_dashboard" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAppController {/}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAuthenticationController {/auth}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/user, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/profile/me, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mUserProfileController {/user-profiles}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/user-profiles/me, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mDevDebugController {/dev-debug}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/auth, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/user-details/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/users, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/auth-status/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mChatManagerController {/chat}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/messages, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/messages, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/messages/last/:count, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/join, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/participants, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/dashboard/stats, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/start, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/leave, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mIstackBuddySlackApiController {/}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/istack-buddy/slack-integration/health, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/istack-buddy/slack-integration/debug, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/istack-buddy/slack-integration/slack/events, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mPublicInterfaceController {/public}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/debug-create, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId/:formId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId/:formId/chat-messages, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId/:formId/chat-messages, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[SlackyAnthropicAgent] [39m[32mSlackyAnthropicAgent constructor called - class loaded[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mSlackyOpenAiAgent constructor called - class loaded[39m
[95m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: ChatRobotParrot v1.0.0[39m
[95m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: AgentRobotParrot v1.0.0[39m
[95m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: RobotChatOpenAI v1.0.0-test-dev[39m
[95m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: RobotChatAnthropic v1.0.0[39m
[95m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackyAnthropicAgent v1.0.0[39m
[95m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: MarvOpenAiAgent v1.0.0[39m
[95m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackyOpenAiAgent v1.0.0[39m
[95m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: AnthropicMarv v1.0.0[39m
[95m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackAgentCoreFormsParrot v1.0.0[39m
[95m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackAgentCoreFormsSsoAutofillParrot v1.0.0[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[RobotService] [39m[32mInitialized 10 robots[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[NestApplication] [39m[32mNest application successfully started[39m[38;5;3m +0ms[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[Bootstrap] [39m[32miStack Buddy Server running on: http://localhost:3500[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [32m    LOG[39m [38;5;3m[Bootstrap] [39m[32mAPI Documentation available at: http://localhost:3500/api[39m
[33m[Nest] 1948700  - [39m08/10/2025, 2:47:30 AM [33m   WARN[39m [38;5;3m[Bootstrap] [39m[33mCORS enabled for ALL origins (temporary)[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:31 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: sFuKwrtzVc4EpVfXAAAB[39m
[95m[Nest] 1948700  - [39m08/10/2025, 2:47:31 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mJoin room data received[39m
[95m[Nest] 1948700  - [39m08/10/2025, 2:47:31 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "data": {
    "conversationId": "bb9a404c-d7f8-48e3-88e7-5824edcee08c",
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[95m[Nest] 1948700  - [39m08/10/2025, 2:47:31 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mApplied default joinData[39m
[95m[Nest] 1948700  - [39m08/10/2025, 2:47:31 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "joinData": {
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[ChatManagerService] Attempting to join conversation: bb9a404c-d7f8-48e3-88e7-5824edcee08c
[ChatManagerService] Available conversations: []
[31m[Nest] 1948700  - [39m08/10/2025, 2:47:31 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError in handleJoinRoom[39m
[31m[Nest] 1948700  - [39m08/10/2025, 2:47:31 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError: Conversation bb9a404c-d7f8-48e3-88e7-5824edcee08c not found[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:31 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: 2sJAPjfrnYb1KiN2AAAE[39m
[95m[Nest] 1948700  - [39m08/10/2025, 2:47:31 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mJoin room data received[39m
[95m[Nest] 1948700  - [39m08/10/2025, 2:47:31 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "data": {
    "conversationId": "cae98459-9ded-42e1-bef7-31628f344b65",
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[95m[Nest] 1948700  - [39m08/10/2025, 2:47:31 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mApplied default joinData[39m
[95m[Nest] 1948700  - [39m08/10/2025, 2:47:31 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "joinData": {
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[ChatManagerService] Attempting to join conversation: cae98459-9ded-42e1-bef7-31628f344b65
[ChatManagerService] Available conversations: []
[31m[Nest] 1948700  - [39m08/10/2025, 2:47:31 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError in handleJoinRoom[39m
[31m[Nest] 1948700  - [39m08/10/2025, 2:47:31 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError: Conversation cae98459-9ded-42e1-bef7-31628f344b65 not found[39m
[32m[Nest] 1948700  - [39m08/10/2025, 2:47:31 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: mHoNoojSiRXeUi5HAAAF[39m
[95m[Nest] 1948700  - [39m08/10/2025, 2:47:31 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mJoin room data received[39m
[95m[Nest] 1948700  - [39m08/10/2025, 2:47:31 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "data": {
    "conversationId": "321d767c-fa29-4565-88b7-bf2a9c237bc4",
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[95m[Nest] 1948700  - [39m08/10/2025, 2:47:31 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mApplied default joinData[39m
[95m[Nest] 1948700  - [39m08/10/2025, 2:47:31 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "joinData": {
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[ChatManagerService] Attempting to join conversation: 321d767c-fa29-4565-88b7-bf2a9c237bc4
[ChatManagerService] Available conversations: []
[31m[Nest] 1948700  - [39m08/10/2025, 2:47:31 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError in handleJoinRoom[39m
[31m[Nest] 1948700  - [39m08/10/2025, 2:47:31 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError: Conversation 321d767c-fa29-4565-88b7-bf2a9c237bc4 not found[39m
[2J[3J[H[[90m2:47:44 AM[0m] File change detected. Starting incremental compilation...

[[90m2:47:44 AM[0m] Found 0 errors. Watching for file changes.

[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[NestFactory] [39m[32mStarting Nest application...[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mRobotModule dependencies initialized[39m[38;5;3m +7ms[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConversationListServiceModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mLoggerModule dependencies initialized[39m[38;5;3m +0ms[39m
[95m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.constructor] [39m[95mFile-based permissions loaded successfully[39m
[95m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.constructor] [39m[95mData: {
  "userPermissionsCount": 0,
  "groupPermissionsCount": 0,
  "userGroupMembershipsCount": 0
}[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAuthorizationPermissionsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAppModule dependencies initialized[39m[38;5;3m +0ms[39m
[95m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [95m  DEBUG[39m [38;5;3m[AuthenticationService.constructor] [39m[95mAuthentication service initialized with configuration[39m
[95m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [95m  DEBUG[39m [38;5;3m[AuthenticationService.constructor] [39m[95mData: {
  "sessionTimeoutSeconds": 28800
}[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAuthenticationModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mGuardsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mIstackBuddySlackApiModule dependencies initialized[39m[38;5;3m +3ms[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mDevDebugModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mPublicInterfaceModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mChatManagerModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mUserProfileModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "join_room" message[39m[38;5;3m +22ms[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "leave_room" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "send_message" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "typing_start" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "typing_stop" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "get_messages" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "share_robot_message" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "join_dashboard" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "leave_dashboard" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAppController {/}:[39m[38;5;3m +1ms[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAuthenticationController {/auth}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/user, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/profile/me, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mUserProfileController {/user-profiles}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/user-profiles/me, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mDevDebugController {/dev-debug}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/auth, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/user-details/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/users, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/auth-status/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mChatManagerController {/chat}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/messages, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/messages, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/messages/last/:count, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/join, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/participants, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/dashboard/stats, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/start, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/leave, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mIstackBuddySlackApiController {/}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/istack-buddy/slack-integration/health, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/istack-buddy/slack-integration/debug, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/istack-buddy/slack-integration/slack/events, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mPublicInterfaceController {/public}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/debug-create, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId/:formId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId/:formId/chat-messages, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId/:formId/chat-messages, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[SlackyAnthropicAgent] [39m[32mSlackyAnthropicAgent constructor called - class loaded[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mSlackyOpenAiAgent constructor called - class loaded[39m
[95m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: ChatRobotParrot v1.0.0[39m
[95m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: AgentRobotParrot v1.0.0[39m
[95m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: RobotChatOpenAI v1.0.0-test-dev[39m
[95m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: RobotChatAnthropic v1.0.0[39m
[95m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackyAnthropicAgent v1.0.0[39m
[95m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: MarvOpenAiAgent v1.0.0[39m
[95m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackyOpenAiAgent v1.0.0[39m
[95m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: AnthropicMarv v1.0.0[39m
[95m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackAgentCoreFormsParrot v1.0.0[39m
[95m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackAgentCoreFormsSsoAutofillParrot v1.0.0[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[RobotService] [39m[32mInitialized 10 robots[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[NestApplication] [39m[32mNest application successfully started[39m[38;5;3m +1ms[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[Bootstrap] [39m[32miStack Buddy Server running on: http://localhost:3500[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[Bootstrap] [39m[32mAPI Documentation available at: http://localhost:3500/api[39m
[33m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [33m   WARN[39m [38;5;3m[Bootstrap] [39m[33mCORS enabled for ALL origins (temporary)[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: 4Alw5Ft9X4BlNPwcAAAB[39m
[95m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mJoin room data received[39m
[95m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "data": {
    "conversationId": "321d767c-fa29-4565-88b7-bf2a9c237bc4",
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[95m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mApplied default joinData[39m
[95m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "joinData": {
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[ChatManagerService] Attempting to join conversation: 321d767c-fa29-4565-88b7-bf2a9c237bc4
[ChatManagerService] Available conversations: []
[31m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError in handleJoinRoom[39m
[31m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError: Conversation 321d767c-fa29-4565-88b7-bf2a9c237bc4 not found[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: BtFvEzveGUrqUNLvAAAD[39m
[95m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mJoin room data received[39m
[95m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "data": {
    "conversationId": "bb9a404c-d7f8-48e3-88e7-5824edcee08c",
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[95m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mApplied default joinData[39m
[95m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "joinData": {
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[ChatManagerService] Attempting to join conversation: bb9a404c-d7f8-48e3-88e7-5824edcee08c
[ChatManagerService] Available conversations: []
[31m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError in handleJoinRoom[39m
[31m[Nest] 1949057  - [39m08/10/2025, 2:47:45 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError: Conversation bb9a404c-d7f8-48e3-88e7-5824edcee08c not found[39m
[32m[Nest] 1949057  - [39m08/10/2025, 2:47:46 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: wRXLrmhk7_00uig1AAAF[39m
[95m[Nest] 1949057  - [39m08/10/2025, 2:47:46 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mJoin room data received[39m
[95m[Nest] 1949057  - [39m08/10/2025, 2:47:46 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "data": {
    "conversationId": "cae98459-9ded-42e1-bef7-31628f344b65",
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[95m[Nest] 1949057  - [39m08/10/2025, 2:47:46 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mApplied default joinData[39m
[95m[Nest] 1949057  - [39m08/10/2025, 2:47:46 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "joinData": {
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[ChatManagerService] Attempting to join conversation: cae98459-9ded-42e1-bef7-31628f344b65
[ChatManagerService] Available conversations: []
[31m[Nest] 1949057  - [39m08/10/2025, 2:47:46 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError in handleJoinRoom[39m
[31m[Nest] 1949057  - [39m08/10/2025, 2:47:46 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError: Conversation cae98459-9ded-42e1-bef7-31628f344b65 not found[39m
[2J[3J[H[[90m2:47:57 AM[0m] File change detected. Starting incremental compilation...

[[90m2:47:57 AM[0m] Found 0 errors. Watching for file changes.

[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[NestFactory] [39m[32mStarting Nest application...[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mRobotModule dependencies initialized[39m[38;5;3m +9ms[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConversationListServiceModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mLoggerModule dependencies initialized[39m[38;5;3m +0ms[39m
[95m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.constructor] [39m[95mFile-based permissions loaded successfully[39m
[95m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.constructor] [39m[95mData: {
  "userPermissionsCount": 0,
  "groupPermissionsCount": 0,
  "userGroupMembershipsCount": 0
}[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAuthorizationPermissionsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAppModule dependencies initialized[39m[38;5;3m +0ms[39m
[95m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [95m  DEBUG[39m [38;5;3m[AuthenticationService.constructor] [39m[95mAuthentication service initialized with configuration[39m
[95m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [95m  DEBUG[39m [38;5;3m[AuthenticationService.constructor] [39m[95mData: {
  "sessionTimeoutSeconds": 28800
}[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAuthenticationModule dependencies initialized[39m[38;5;3m +3ms[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mGuardsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mIstackBuddySlackApiModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mDevDebugModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mPublicInterfaceModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mChatManagerModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mUserProfileModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "join_room" message[39m[38;5;3m +12ms[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "leave_room" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "send_message" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "typing_start" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "typing_stop" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "get_messages" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "share_robot_message" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "join_dashboard" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "leave_dashboard" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAppController {/}:[39m[38;5;3m +1ms[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAuthenticationController {/auth}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/user, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/profile/me, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mUserProfileController {/user-profiles}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/user-profiles/me, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mDevDebugController {/dev-debug}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/auth, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/user-details/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/users, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/auth-status/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mChatManagerController {/chat}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/messages, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/messages, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/messages/last/:count, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/join, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/participants, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/dashboard/stats, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/start, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/leave, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mIstackBuddySlackApiController {/}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/istack-buddy/slack-integration/health, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/istack-buddy/slack-integration/debug, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/istack-buddy/slack-integration/slack/events, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mPublicInterfaceController {/public}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/debug-create, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId/:formId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId/:formId/chat-messages, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId/:formId/chat-messages, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[SlackyAnthropicAgent] [39m[32mSlackyAnthropicAgent constructor called - class loaded[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mSlackyOpenAiAgent constructor called - class loaded[39m
[95m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: ChatRobotParrot v1.0.0[39m
[95m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: AgentRobotParrot v1.0.0[39m
[95m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: RobotChatOpenAI v1.0.0-test-dev[39m
[95m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: RobotChatAnthropic v1.0.0[39m
[95m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackyAnthropicAgent v1.0.0[39m
[95m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: MarvOpenAiAgent v1.0.0[39m
[95m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackyOpenAiAgent v1.0.0[39m
[95m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: AnthropicMarv v1.0.0[39m
[95m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackAgentCoreFormsParrot v1.0.0[39m
[95m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackAgentCoreFormsSsoAutofillParrot v1.0.0[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[RobotService] [39m[32mInitialized 10 robots[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[NestApplication] [39m[32mNest application successfully started[39m[38;5;3m +1ms[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[Bootstrap] [39m[32miStack Buddy Server running on: http://localhost:3500[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [32m    LOG[39m [38;5;3m[Bootstrap] [39m[32mAPI Documentation available at: http://localhost:3500/api[39m
[33m[Nest] 1949142  - [39m08/10/2025, 2:47:57 AM [33m   WARN[39m [38;5;3m[Bootstrap] [39m[33mCORS enabled for ALL origins (temporary)[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:58 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: P_hhaP_TD_DM4cPfAAAB[39m
[95m[Nest] 1949142  - [39m08/10/2025, 2:47:58 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mJoin room data received[39m
[95m[Nest] 1949142  - [39m08/10/2025, 2:47:58 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "data": {
    "conversationId": "cae98459-9ded-42e1-bef7-31628f344b65",
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[95m[Nest] 1949142  - [39m08/10/2025, 2:47:58 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mApplied default joinData[39m
[95m[Nest] 1949142  - [39m08/10/2025, 2:47:58 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "joinData": {
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[ChatManagerService] Attempting to join conversation: cae98459-9ded-42e1-bef7-31628f344b65
[ChatManagerService] Available conversations: []
[31m[Nest] 1949142  - [39m08/10/2025, 2:47:58 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError in handleJoinRoom[39m
[31m[Nest] 1949142  - [39m08/10/2025, 2:47:58 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError: Conversation cae98459-9ded-42e1-bef7-31628f344b65 not found[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:59 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: 5uYPOMqMskw3saw1AAAD[39m
[95m[Nest] 1949142  - [39m08/10/2025, 2:47:59 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mJoin room data received[39m
[95m[Nest] 1949142  - [39m08/10/2025, 2:47:59 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "data": {
    "conversationId": "bb9a404c-d7f8-48e3-88e7-5824edcee08c",
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[95m[Nest] 1949142  - [39m08/10/2025, 2:47:59 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mApplied default joinData[39m
[95m[Nest] 1949142  - [39m08/10/2025, 2:47:59 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "joinData": {
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[ChatManagerService] Attempting to join conversation: bb9a404c-d7f8-48e3-88e7-5824edcee08c
[ChatManagerService] Available conversations: []
[31m[Nest] 1949142  - [39m08/10/2025, 2:47:59 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError in handleJoinRoom[39m
[31m[Nest] 1949142  - [39m08/10/2025, 2:47:59 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError: Conversation bb9a404c-d7f8-48e3-88e7-5824edcee08c not found[39m
[32m[Nest] 1949142  - [39m08/10/2025, 2:47:59 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: mjf4H5CaTxsxQZPMAAAF[39m
[95m[Nest] 1949142  - [39m08/10/2025, 2:47:59 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mJoin room data received[39m
[95m[Nest] 1949142  - [39m08/10/2025, 2:47:59 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "data": {
    "conversationId": "321d767c-fa29-4565-88b7-bf2a9c237bc4",
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[95m[Nest] 1949142  - [39m08/10/2025, 2:47:59 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mApplied default joinData[39m
[95m[Nest] 1949142  - [39m08/10/2025, 2:47:59 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "joinData": {
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[ChatManagerService] Attempting to join conversation: 321d767c-fa29-4565-88b7-bf2a9c237bc4
[ChatManagerService] Available conversations: []
[31m[Nest] 1949142  - [39m08/10/2025, 2:47:59 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError in handleJoinRoom[39m
[31m[Nest] 1949142  - [39m08/10/2025, 2:47:59 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError: Conversation 321d767c-fa29-4565-88b7-bf2a9c237bc4 not found[39m
[2J[3J[H[[90m2:48:05 AM[0m] File change detected. Starting incremental compilation...

[[90m2:48:05 AM[0m] Found 0 errors. Watching for file changes.

[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[NestFactory] [39m[32mStarting Nest application...[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mRobotModule dependencies initialized[39m[38;5;3m +9ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConversationListServiceModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mLoggerModule dependencies initialized[39m[38;5;3m +0ms[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.constructor] [39m[95mFile-based permissions loaded successfully[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.constructor] [39m[95mData: {
  "userPermissionsCount": 0,
  "groupPermissionsCount": 0,
  "userGroupMembershipsCount": 0
}[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAuthorizationPermissionsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAppModule dependencies initialized[39m[38;5;3m +0ms[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [95m  DEBUG[39m [38;5;3m[AuthenticationService.constructor] [39m[95mAuthentication service initialized with configuration[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [95m  DEBUG[39m [38;5;3m[AuthenticationService.constructor] [39m[95mData: {
  "sessionTimeoutSeconds": 28800
}[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAuthenticationModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mGuardsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mIstackBuddySlackApiModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mDevDebugModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mPublicInterfaceModule dependencies initialized[39m[38;5;3m +4ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mChatManagerModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mUserProfileModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "join_room" message[39m[38;5;3m +18ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "leave_room" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "send_message" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "typing_start" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "typing_stop" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "get_messages" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "share_robot_message" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "join_dashboard" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "leave_dashboard" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAppController {/}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAuthenticationController {/auth}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/user, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/profile/me, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mUserProfileController {/user-profiles}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/user-profiles/me, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mDevDebugController {/dev-debug}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/auth, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/user-details/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/users, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/auth-status/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mChatManagerController {/chat}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/messages, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/messages, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/messages/last/:count, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/join, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/participants, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/dashboard/stats, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/start, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/leave, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mIstackBuddySlackApiController {/}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/istack-buddy/slack-integration/health, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/istack-buddy/slack-integration/debug, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/istack-buddy/slack-integration/slack/events, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mPublicInterfaceController {/public}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/debug-create, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId/:formId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId/:formId/chat-messages, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId/:formId/chat-messages, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[SlackyAnthropicAgent] [39m[32mSlackyAnthropicAgent constructor called - class loaded[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mSlackyOpenAiAgent constructor called - class loaded[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: ChatRobotParrot v1.0.0[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: AgentRobotParrot v1.0.0[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: RobotChatOpenAI v1.0.0-test-dev[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: RobotChatAnthropic v1.0.0[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackyAnthropicAgent v1.0.0[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: MarvOpenAiAgent v1.0.0[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackyOpenAiAgent v1.0.0[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: AnthropicMarv v1.0.0[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackAgentCoreFormsParrot v1.0.0[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackAgentCoreFormsSsoAutofillParrot v1.0.0[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[RobotService] [39m[32mInitialized 10 robots[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[NestApplication] [39m[32mNest application successfully started[39m[38;5;3m +1ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[Bootstrap] [39m[32miStack Buddy Server running on: http://localhost:3500[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [32m    LOG[39m [38;5;3m[Bootstrap] [39m[32mAPI Documentation available at: http://localhost:3500/api[39m
[33m[Nest] 1949267  - [39m08/10/2025, 2:48:06 AM [33m   WARN[39m [38;5;3m[Bootstrap] [39m[33mCORS enabled for ALL origins (temporary)[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:07 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: stg9lZ6ci9QAR4PIAAAB[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:48:07 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mJoin room data received[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:48:07 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "data": {
    "conversationId": "321d767c-fa29-4565-88b7-bf2a9c237bc4",
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[95m[Nest] 1949267  - [39m08/10/2025, 2:48:07 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mApplied default joinData[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:48:07 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "joinData": {
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[ChatManagerService] Attempting to join conversation: 321d767c-fa29-4565-88b7-bf2a9c237bc4
[ChatManagerService] Available conversations: []
[31m[Nest] 1949267  - [39m08/10/2025, 2:48:07 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError in handleJoinRoom[39m
[31m[Nest] 1949267  - [39m08/10/2025, 2:48:07 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError: Conversation 321d767c-fa29-4565-88b7-bf2a9c237bc4 not found[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:07 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: Sld3wznHY-5-4VYAAAAE[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:48:07 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: LSoka0k7RUOFC38vAAAF[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:48:07 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mJoin room data received[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:48:07 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "data": {
    "conversationId": "bb9a404c-d7f8-48e3-88e7-5824edcee08c",
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[95m[Nest] 1949267  - [39m08/10/2025, 2:48:07 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mApplied default joinData[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:48:07 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "joinData": {
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[ChatManagerService] Attempting to join conversation: bb9a404c-d7f8-48e3-88e7-5824edcee08c
[ChatManagerService] Available conversations: []
[31m[Nest] 1949267  - [39m08/10/2025, 2:48:07 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError in handleJoinRoom[39m
[31m[Nest] 1949267  - [39m08/10/2025, 2:48:07 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError: Conversation bb9a404c-d7f8-48e3-88e7-5824edcee08c not found[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:48:07 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mJoin room data received[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:48:07 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "data": {
    "conversationId": "cae98459-9ded-42e1-bef7-31628f344b65",
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[95m[Nest] 1949267  - [39m08/10/2025, 2:48:07 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mApplied default joinData[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:48:07 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "joinData": {
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[ChatManagerService] Attempting to join conversation: cae98459-9ded-42e1-bef7-31628f344b65
[ChatManagerService] Available conversations: []
[31m[Nest] 1949267  - [39m08/10/2025, 2:48:07 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError in handleJoinRoom[39m
[31m[Nest] 1949267  - [39m08/10/2025, 2:48:07 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError: Conversation cae98459-9ded-42e1-bef7-31628f344b65 not found[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:49:06 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:49:38 AM [32m    LOG[39m [38;5;3m[SlackSignatureGuard] [39m[32mSlack signature verified successfully[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:49:38 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32m[4b91dcb5-b6a7-4b95-a3d6-854f11529055] Incoming POST /istack-buddy/slack-integration/slack/events[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:49:38 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32mData: {
  "userAgent": "Slackbot 1.0 (+https://api.slack.com/robots)",
  "ip": "::ffff:127.0.0.1",
  "params": {},
  "query": {}
}[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:49:38 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mReceived app mention event[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:49:38 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mDEBUG: Event text: "<@U092RRN555X> logic observations for 5375703", trimmed: "<@U092RRN555X> logic observations for 5375703"[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:49:38 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mAdding reaction :thinking_face: to message 1754812177.045849 in channel C091Y5UNA1M[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:49:38 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mAdded reaction :thinking_face: to message in channel C091Y5UNA1M[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:49:38 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mBroadcasting dashboard event: conversation_created[39m
{
  allConversationMessages: [
    {
      id: '2f9dfc67-1296-451a-990f-947debec1e57',
      content: [Object],
      conversationId: '8aba496f-95ff-4b12-abc0-c7a319f1e501',
      fromUserId: 'cx-slack-robot',
      fromRole: 'cx-customer',
      toRole: 'cx-agent',
      messageType: 'text',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T07:49:38.829Z,
      updatedAt: 2025-08-10T07:49:38.829Z
    }
  ]
}
[95m[Nest] 1949267  - [39m08/10/2025, 2:49:38 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mBroadcasting dashboard event: conversation_updated[39m
Gateway: Broadcasting new_message to conversation 8aba496f-95ff-4b12-abc0-c7a319f1e501: {
  message: {
    id: '2f9dfc67-1296-451a-990f-947debec1e57',
    content: {
      type: 'text/plain',
      payload: '<@U092RRN555X> logic observations for 5375703'
    },
    conversationId: '8aba496f-95ff-4b12-abc0-c7a319f1e501',
    fromUserId: 'cx-slack-robot',
    fromRole: 'cx-customer',
    toRole: 'cx-agent',
    messageType: 'text',
    threadId: undefined,
    originalMessageId: undefined,
    createdAt: 2025-08-10T07:49:38.829Z,
    updatedAt: 2025-08-10T07:49:38.829Z
  },
  timestamp: '2025-08-10T07:49:38.829Z'
}
Gateway: Broadcast completed
[32m[Nest] 1949267  - [39m08/10/2025, 2:49:38 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mMessage 1: [cx-customer] [object Object][39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:49:38 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mBuilding OpenAI message history:[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:49:38 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mObject:[39m
{
  "historyLength": 0,
  "historyRoles": [],
  "currentMessage": "<@U092RRN555X> logic observations for 5375703"
}

[32m[Nest] 1949267  - [39m08/10/2025, 2:49:38 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mAdding current message: <@U092RRN555X> logic observations for 5375703...[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:49:38 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mConversation being sent to robot:[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:49:38 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
[
  {
    "author": "user",
    "content": "<@U092RRN555X> logic observations for 5375703..."
  }
]

[95m[Nest] 1949267  - [39m08/10/2025, 2:49:40 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mTool call completion detected[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:49:40 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormLogicValidation",
  "finishReason": "tool_calls",
  "functionArgs": "{\"formId\":\"5375703\"}"
}

[95m[Nest] 1949267  - [39m08/10/2025, 2:49:40 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mExecuting function call[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:49:40 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormLogicValidation",
  "functionArgs": {
    "formId": "5375703"
  }
}

[95m[Nest] 1949267  - [39m08/10/2025, 2:49:40 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mChecking onFullMessageReceived callback[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:49:40 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "hasCallback": true,
  "callbackType": "function"
}

[95m[Nest] 1949267  - [39m08/10/2025, 2:49:40 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mCalling onFullMessageReceived for tool start[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:49:40 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormLogicValidation",
  "message": "Starting execution of fsRestrictedApiFormLogicValidation..."
}

[95m[Nest] 1949267  - [39m08/10/2025, 2:49:40 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mExecuting tool: fsRestrictedApiFormLogicValidation[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:49:40 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "toolArgs": {
    "formId": "5375703"
  }
}

[32m[Nest] 1949267  - [39m08/10/2025, 2:49:40 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mTool status updated: fsRestrictedApiFormLogicValidation -> executing[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:49:40 AM [95m  DEBUG[39m [38;5;3m[MarvToolCall] [39m[95mMarv tool call log[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:49:40 AM [95m  DEBUG[39m [38;5;3m[MarvToolCall] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormLogicValidation",
  "fnParamsJson": {
    "formId": "5375703"
  }
}

[32m[Nest] 1949267  - [39m08/10/2025, 2:49:41 AM [32m    LOG[39m [38;5;3m[SlackSignatureGuard] [39m[32mSlack signature verified successfully[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:49:41 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32m[f4c59500-61e5-4e32-8884-7301dd854313] Incoming POST /istack-buddy/slack-integration/slack/events[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:49:41 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32mData: {
  "userAgent": "Slackbot 1.0 (+https://api.slack.com/robots)",
  "ip": "::ffff:127.0.0.1",
  "params": {},
  "query": {}
}[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:49:41 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mReceived app mention event[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:49:41 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mDuplicate event detected: Ev09AGQG3CU8[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:49:41 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32m[f4c59500-61e5-4e32-8884-7301dd854313] Response POST /istack-buddy/slack-integration/slack/events 200 - 2ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:49:41 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32mData: {
  "statusCode": 200,
  "elapsed": "2ms"
}[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:49:42 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mTool fsRestrictedApiFormLogicValidation result: "[object Object]"[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:49:42 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mTool status updated: fsRestrictedApiFormLogicValidation -> completed[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:49:42 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mTool execution completed[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:49:42 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "toolName": "fsRestrictedApiFormLogicValidation",
  "resultType": "object",
  "isMarvTool": true
}

ObservationMakerViewer.fromObservationResults called with: {
  hasResult: true,
  hasResponse: true,
  resultType: 'object',
  responseType: 'object'
}
extractLogItems called with: {
  responseType: 'object',
  isArray: false,
  hasLogItems: true,
  hasObservations: false,
  hasData: false,
  responseKeys: [ 'isObservationTrue', 'logItems' ]
}
Extracting from response.logItems, length: 119
Final log items count: 119
Extracted log items: {
  count: 119,
  logItems: '[\n' +
    '  {\n' +
    '    "subjectId": "148456734",\n' +
    '    "logLevel": "warn",\n' +
    '    "subjectType": "field",\n' +
    '    "observationClass": "ObservationMakerLogicValidation",\n' +
    '    "observationMakerClass": "ObservationMakerLogicValidation",\n' +
    '    "message": "Field Logic Validation Check",\n' +
    `    "messageSecondary": "Logic error: \\n     Field '(E) A->B->C-D->E->A (logi...' (148456739) is attempting to  add logic branch which would create circular reference to itself (it's logic includes a check for 148456734).\\n\\n    The logic condition is 'own logic'.\\n\\n    Path to root (dependency chain): [\\n  {\\n    \\"virtualRoot\\": true,\\n    \\"directOwnerFieldId\\": \\"148456734\\",\\n    \\"nodeId\\": \\"148456734\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456734\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456734:0\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456742\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456734:0:2\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456741\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456734:0:2:4\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456740\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456734:0:2:4:6\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456739\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456734:0:2:4:6:8\\"\\n  }\\n]. \\n    ",\n` +
    '    "relatedEntityIds": [\n' +
    '      "148456734",\n' +
    '      "148456734",\n' +
    '      "148456742",\n' +
    '      "148456741",\n' +
    '      "148456740",\n' +
    '      "148456739"\n' +
    '    ],\n' +
    '    "isObservationTrue": true,\n' +
    '    "additionalDetails": {\n' +
    `      "message": "\\n     Field '(E) A->B->C-D->E->A (logi...' (148456739) is attempting to  add logic branch which would create circular reference to itself (it's logic includes a check for 148456734).\\n\\n    The logic condition is 'own logic'.\\n\\n    Path to root (dependency chain): [\\n  {\\n    \\"virtualRoot\\": true,\\n    \\"directOwnerFieldId\\": \\"148456734\\",\\n    \\"nodeId\\": \\"148456734\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456734\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456734:0\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456742\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456734:0:2\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456741\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456734:0:2:4\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456740\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456734:0:2:4:6\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456739\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456734:0:2:4:6:8\\"\\n  }\\n]. \\n    ",\n` +
    '      "existingCheckFieldId": "148456734",\n' +
    '      "logicExpressionString": "{\\"violatingShallowLogic\\":null}",\n' +
    '      "dependencyChainFieldIds": [\n' +
    '        {\n' +
    '          "directOwnerFieldId": "148456734",\n' +
    '          "nodeId": "148456734"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "148456734",\n' +
    '          "nodeId": "148456734:0"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "148456742",\n' +
    '          "nodeId": "148456734:0:2"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "148456741",\n' +
    '          "nodeId": "148456734:0:2:4"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "148456740",\n' +
    '          "nodeId": "148456734:0:2:4:6"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "148456739",\n' +
    '          "nodeId": "148456734:0:2:4:6:8"\n' +
    '        }\n' +
    '      ]\n' +
    '    }\n' +
    '  },\n' +
    '  {\n' +
    '    "subjectId": "148456739",\n' +
    '    "logLevel": "warn",\n' +
    '    "subjectType": "field",\n' +
    '    "observationClass": "ObservationMakerLogicValidation",\n' +
    '    "observationMakerClass": "ObservationMakerLogicValidation",\n' +
    '    "message": "Field Logic Validation Check",\n' +
    `    "messageSecondary": "Logic error: \\n     Field '(D) A->B->C-D->E->A (logi...' (148456740) is attempting to  add logic branch which would create circular reference to itself (it's logic includes a check for 148456739).\\n\\n    The logic condition is 'own logic'.\\n\\n    Path to root (dependency chain): [\\n  {\\n    \\"virtualRoot\\": true,\\n    \\"directOwnerFieldId\\": \\"148456739\\",\\n    \\"nodeId\\": \\"148456739\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456739\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456739:0\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456734\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456739:0:2\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456742\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456739:0:2:4\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456741\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456739:0:2:4:6\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456740\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456739:0:2:4:6:8\\"\\n  }\\n]. \\n    ",\n` +
    '    "relatedEntityIds": [\n' +
    '      "148456739",\n' +
    '      "148456739",\n' +
    '      "148456734",\n' +
    '      "148456742",\n' +
    '      "148456741",\n' +
    '      "148456740"\n' +
    '    ],\n' +
    '    "isObservationTrue": true,\n' +
    '    "additionalDetails": {\n' +
    `      "message": "\\n     Field '(D) A->B->C-D->E->A (logi...' (148456740) is attempting to  add logic branch which would create circular reference to itself (it's logic includes a check for 148456739).\\n\\n    The logic condition is 'own logic'.\\n\\n    Path to root (dependency chain): [\\n  {\\n    \\"virtualRoot\\": true,\\n    \\"directOwnerFieldId\\": \\"148456739\\",\\n    \\"nodeId\\": \\"148456739\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456739\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456739:0\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456734\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456739:0:2\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456742\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456739:0:2:4\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456741\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456739:0:2:4:6\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456740\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456739:0:2:4:6:8\\"\\n  }\\n]. \\n    ",\n` +
    '      "existingCheckFieldId": "148456739",\n' +
    '      "logicExpressionString": "{\\"violatingShallowLogic\\":null}",\n' +
    '      "dependencyChainFieldIds": [\n' +
    '        {\n' +
    '          "directOwnerFieldId": "148456739",\n' +
    '          "nodeId": "148456739"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "148456739",\n' +
    '          "nodeId": "148456739:0"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "148456734",\n' +
    '          "nodeId": "148456739:0:2"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "148456742",\n' +
    '          "nodeId": "148456739:0:2:4"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "148456741",\n' +
    '          "nodeId": "148456739:0:2:4:6"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "148456740",\n' +
    '          "nodeId": "148456739:0:2:4:6:8"\n' +
    '        }\n' +
    '      ]\n' +
    '    }\n' +
    '  }\n' +
    ']'
}
[95m[Nest] 1949267  - [39m08/10/2025, 2:49:42 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mCalling onFullMessageReceived for tool completion[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:49:42 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormLogicValidation",
  "message": "Finished running fsRestrictedApiFormLogicValidation. Analysis complete."
}

[32m[Nest] 1949267  - [39m08/10/2025, 2:49:42 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mBuilding OpenAI message history:[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:49:42 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mObject:[39m
{
  "historyLength": 1,
  "historyRoles": [
    {
      "fromRole": "cx-customer",
      "content": "<@U092RRN555X> logic observations for 5375703..."
    }
  ],
  "currentMessage": "<@U092RRN555X> logic observations for 5375703"
}

[32m[Nest] 1949267  - [39m08/10/2025, 2:49:42 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mProcessing message with role: cx-customer[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:49:42 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mAdding customer message: <@U092RRN555X> logic observations for 5375703...[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:49:42 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mCurrent message already in history, skipping[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:49:42 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mConversation being sent to robot:[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:49:42 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
[
  {
    "author": "user",
    "content": "<@U092RRN555X> logic observations for 5375703..."
  }
]

[32m[Nest] 1949267  - [39m08/10/2025, 2:49:42 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32m[4b91dcb5-b6a7-4b95-a3d6-854f11529055] Response POST /istack-buddy/slack-integration/slack/events 200 - 4159ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:49:42 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32mData: {
  "statusCode": 200,
  "elapsed": "4159ms"
}[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:49:44 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mTool call completion detected[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:49:44 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormLogicValidation",
  "finishReason": "tool_calls",
  "functionArgs": "{\"formId\":\"5375703\"}"
}

[95m[Nest] 1949267  - [39m08/10/2025, 2:49:44 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mExecuting function call[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:49:44 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormLogicValidation",
  "functionArgs": {
    "formId": "5375703"
  }
}

[95m[Nest] 1949267  - [39m08/10/2025, 2:49:44 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mChecking onFullMessageReceived callback[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:49:44 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "hasCallback": true,
  "callbackType": "function"
}

[95m[Nest] 1949267  - [39m08/10/2025, 2:49:44 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mCalling onFullMessageReceived for tool start[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:49:44 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormLogicValidation",
  "message": "Starting execution of fsRestrictedApiFormLogicValidation..."
}

[95m[Nest] 1949267  - [39m08/10/2025, 2:49:44 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95monFullMessageReceived called in multi-part response[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:49:44 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "contentLength": 59,
  "contentType": "text/plain"
}

[95m[Nest] 1949267  - [39m08/10/2025, 2:49:44 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mSending intermediate message via delayedMessageCallback[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:49:44 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "content": "Starting execution of fsRestrictedApiFormLogicValidation......",
  "contentType": "text/plain"
}

{
  allConversationMessages: [
    {
      id: '2f9dfc67-1296-451a-990f-947debec1e57',
      content: [Object],
      conversationId: '8aba496f-95ff-4b12-abc0-c7a319f1e501',
      fromUserId: 'cx-slack-robot',
      fromRole: 'cx-customer',
      toRole: 'cx-agent',
      messageType: 'text',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T07:49:38.829Z,
      updatedAt: 2025-08-10T07:49:38.829Z
    },
    {
      id: '45df2093-e3ad-4ee9-bee8-296987b32a84',
      content: [Object],
      conversationId: '8aba496f-95ff-4b12-abc0-c7a319f1e501',
      fromUserId: 'cx-slack-robot',
      fromRole: 'robot',
      toRole: 'cx-customer',
      messageType: 'robot',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T07:49:44.552Z,
      updatedAt: 2025-08-10T07:49:44.552Z
    }
  ]
}
[95m[Nest] 1949267  - [39m08/10/2025, 2:49:44 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mBroadcasting dashboard event: conversation_updated[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:49:44 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mExecuting tool: fsRestrictedApiFormLogicValidation[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:49:44 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "toolArgs": {
    "formId": "5375703"
  }
}

[32m[Nest] 1949267  - [39m08/10/2025, 2:49:44 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mTool status updated: fsRestrictedApiFormLogicValidation -> executing[39m
Gateway: Broadcasting new_message to conversation 8aba496f-95ff-4b12-abc0-c7a319f1e501: {
  message: {
    id: '45df2093-e3ad-4ee9-bee8-296987b32a84',
    content: {
      type: 'text/plain',
      payload: 'Starting execution of fsRestrictedApiFormLogicValidation...'
    },
    conversationId: '8aba496f-95ff-4b12-abc0-c7a319f1e501',
    fromUserId: 'cx-slack-robot',
    fromRole: 'robot',
    toRole: 'cx-customer',
    messageType: 'robot',
    threadId: undefined,
    originalMessageId: undefined,
    createdAt: 2025-08-10T07:49:44.552Z,
    updatedAt: 2025-08-10T07:49:44.552Z
  },
  timestamp: '2025-08-10T07:49:44.552Z'
}
Gateway: Broadcast completed
[95m[Nest] 1949267  - [39m08/10/2025, 2:49:44 AM [95m  DEBUG[39m [38;5;3m[MarvToolCall] [39m[95mMarv tool call log[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:49:44 AM [95m  DEBUG[39m [38;5;3m[MarvToolCall] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormLogicValidation",
  "fnParamsJson": {
    "formId": "5375703"
  }
}

[32m[Nest] 1949267  - [39m08/10/2025, 2:49:44 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mMessage sent to Slack channel C091Y5UNA1M[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:49:45 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mTool fsRestrictedApiFormLogicValidation result: "[object Object]"[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:49:45 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mTool status updated: fsRestrictedApiFormLogicValidation -> completed[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:49:45 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mTool execution completed[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:49:45 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "toolName": "fsRestrictedApiFormLogicValidation",
  "resultType": "object",
  "isMarvTool": true
}

ObservationMakerViewer.fromObservationResults called with: {
  hasResult: true,
  hasResponse: true,
  resultType: 'object',
  responseType: 'object'
}
extractLogItems called with: {
  responseType: 'object',
  isArray: false,
  hasLogItems: true,
  hasObservations: false,
  hasData: false,
  responseKeys: [ 'isObservationTrue', 'logItems' ]
}
Extracting from response.logItems, length: 119
Final log items count: 119
Extracted log items: {
  count: 119,
  logItems: '[\n' +
    '  {\n' +
    '    "subjectId": "148456734",\n' +
    '    "logLevel": "warn",\n' +
    '    "subjectType": "field",\n' +
    '    "observationClass": "ObservationMakerLogicValidation",\n' +
    '    "observationMakerClass": "ObservationMakerLogicValidation",\n' +
    '    "message": "Field Logic Validation Check",\n' +
    `    "messageSecondary": "Logic error: \\n     Field '(E) A->B->C-D->E->A (logi...' (148456739) is attempting to  add logic branch which would create circular reference to itself (it's logic includes a check for 148456734).\\n\\n    The logic condition is 'own logic'.\\n\\n    Path to root (dependency chain): [\\n  {\\n    \\"virtualRoot\\": true,\\n    \\"directOwnerFieldId\\": \\"148456734\\",\\n    \\"nodeId\\": \\"148456734\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456734\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456734:0\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456742\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456734:0:2\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456741\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456734:0:2:4\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456740\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456734:0:2:4:6\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456739\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456734:0:2:4:6:8\\"\\n  }\\n]. \\n    ",\n` +
    '    "relatedEntityIds": [\n' +
    '      "148456734",\n' +
    '      "148456734",\n' +
    '      "148456742",\n' +
    '      "148456741",\n' +
    '      "148456740",\n' +
    '      "148456739"\n' +
    '    ],\n' +
    '    "isObservationTrue": true,\n' +
    '    "additionalDetails": {\n' +
    `      "message": "\\n     Field '(E) A->B->C-D->E->A (logi...' (148456739) is attempting to  add logic branch which would create circular reference to itself (it's logic includes a check for 148456734).\\n\\n    The logic condition is 'own logic'.\\n\\n    Path to root (dependency chain): [\\n  {\\n    \\"virtualRoot\\": true,\\n    \\"directOwnerFieldId\\": \\"148456734\\",\\n    \\"nodeId\\": \\"148456734\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456734\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456734:0\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456742\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456734:0:2\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456741\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456734:0:2:4\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456740\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456734:0:2:4:6\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456739\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456734:0:2:4:6:8\\"\\n  }\\n]. \\n    ",\n` +
    '      "existingCheckFieldId": "148456734",\n' +
    '      "logicExpressionString": "{\\"violatingShallowLogic\\":null}",\n' +
    '      "dependencyChainFieldIds": [\n' +
    '        {\n' +
    '          "directOwnerFieldId": "148456734",\n' +
    '          "nodeId": "148456734"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "148456734",\n' +
    '          "nodeId": "148456734:0"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "148456742",\n' +
    '          "nodeId": "148456734:0:2"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "148456741",\n' +
    '          "nodeId": "148456734:0:2:4"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "148456740",\n' +
    '          "nodeId": "148456734:0:2:4:6"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "148456739",\n' +
    '          "nodeId": "148456734:0:2:4:6:8"\n' +
    '        }\n' +
    '      ]\n' +
    '    }\n' +
    '  },\n' +
    '  {\n' +
    '    "subjectId": "148456739",\n' +
    '    "logLevel": "warn",\n' +
    '    "subjectType": "field",\n' +
    '    "observationClass": "ObservationMakerLogicValidation",\n' +
    '    "observationMakerClass": "ObservationMakerLogicValidation",\n' +
    '    "message": "Field Logic Validation Check",\n' +
    `    "messageSecondary": "Logic error: \\n     Field '(D) A->B->C-D->E->A (logi...' (148456740) is attempting to  add logic branch which would create circular reference to itself (it's logic includes a check for 148456739).\\n\\n    The logic condition is 'own logic'.\\n\\n    Path to root (dependency chain): [\\n  {\\n    \\"virtualRoot\\": true,\\n    \\"directOwnerFieldId\\": \\"148456739\\",\\n    \\"nodeId\\": \\"148456739\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456739\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456739:0\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456734\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456739:0:2\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456742\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456739:0:2:4\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456741\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456739:0:2:4:6\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456740\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456739:0:2:4:6:8\\"\\n  }\\n]. \\n    ",\n` +
    '    "relatedEntityIds": [\n' +
    '      "148456739",\n' +
    '      "148456739",\n' +
    '      "148456734",\n' +
    '      "148456742",\n' +
    '      "148456741",\n' +
    '      "148456740"\n' +
    '    ],\n' +
    '    "isObservationTrue": true,\n' +
    '    "additionalDetails": {\n' +
    `      "message": "\\n     Field '(D) A->B->C-D->E->A (logi...' (148456740) is attempting to  add logic branch which would create circular reference to itself (it's logic includes a check for 148456739).\\n\\n    The logic condition is 'own logic'.\\n\\n    Path to root (dependency chain): [\\n  {\\n    \\"virtualRoot\\": true,\\n    \\"directOwnerFieldId\\": \\"148456739\\",\\n    \\"nodeId\\": \\"148456739\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456739\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456739:0\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456734\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456739:0:2\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456742\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456739:0:2:4\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456741\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456739:0:2:4:6\\"\\n  },\\n  {\\n    \\"operator\\": \\"$and\\",\\n    \\"directOwnerFieldId\\": \\"148456740\\",\\n    \\"isOwnBranch\\": true,\\n    \\"nodeId\\": \\"148456739:0:2:4:6:8\\"\\n  }\\n]. \\n    ",\n` +
    '      "existingCheckFieldId": "148456739",\n' +
    '      "logicExpressionString": "{\\"violatingShallowLogic\\":null}",\n' +
    '      "dependencyChainFieldIds": [\n' +
    '        {\n' +
    '          "directOwnerFieldId": "148456739",\n' +
    '          "nodeId": "148456739"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "148456739",\n' +
    '          "nodeId": "148456739:0"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "148456734",\n' +
    '          "nodeId": "148456739:0:2"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "148456742",\n' +
    '          "nodeId": "148456739:0:2:4"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "148456741",\n' +
    '          "nodeId": "148456739:0:2:4:6"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "148456740",\n' +
    '          "nodeId": "148456739:0:2:4:6:8"\n' +
    '        }\n' +
    '      ]\n' +
    '    }\n' +
    '  }\n' +
    ']'
}
[95m[Nest] 1949267  - [39m08/10/2025, 2:49:45 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mCalling onFullMessageReceived for tool completion[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:49:45 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormLogicValidation",
  "message": "Finished running fsRestrictedApiFormLogicValidation. Analysis complete."
}

[95m[Nest] 1949267  - [39m08/10/2025, 2:49:45 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95monFullMessageReceived called in multi-part response[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:49:45 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "contentLength": 71,
  "contentType": "text/plain"
}

[95m[Nest] 1949267  - [39m08/10/2025, 2:49:45 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mSending intermediate message via delayedMessageCallback[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:49:45 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "content": "Finished running fsRestrictedApiFormLogicValidation. Analysis complete....",
  "contentType": "text/plain"
}

{
  allConversationMessages: [
    {
      id: '2f9dfc67-1296-451a-990f-947debec1e57',
      content: [Object],
      conversationId: '8aba496f-95ff-4b12-abc0-c7a319f1e501',
      fromUserId: 'cx-slack-robot',
      fromRole: 'cx-customer',
      toRole: 'cx-agent',
      messageType: 'text',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T07:49:38.829Z,
      updatedAt: 2025-08-10T07:49:38.829Z
    },
    {
      id: '45df2093-e3ad-4ee9-bee8-296987b32a84',
      content: [Object],
      conversationId: '8aba496f-95ff-4b12-abc0-c7a319f1e501',
      fromUserId: 'cx-slack-robot',
      fromRole: 'robot',
      toRole: 'cx-customer',
      messageType: 'robot',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T07:49:44.552Z,
      updatedAt: 2025-08-10T07:49:44.552Z
    },
    {
      id: '4b24b091-cd45-4ce8-a210-f28927b6d804',
      content: [Object],
      conversationId: '8aba496f-95ff-4b12-abc0-c7a319f1e501',
      fromUserId: 'cx-slack-robot',
      fromRole: 'robot',
      toRole: 'cx-customer',
      messageType: 'robot',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T07:49:45.044Z,
      updatedAt: 2025-08-10T07:49:45.044Z
    }
  ]
}
[95m[Nest] 1949267  - [39m08/10/2025, 2:49:45 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mBroadcasting dashboard event: conversation_updated[39m
Gateway: Broadcasting new_message to conversation 8aba496f-95ff-4b12-abc0-c7a319f1e501: {
  message: {
    id: '4b24b091-cd45-4ce8-a210-f28927b6d804',
    content: {
      type: 'text/plain',
      payload: 'Finished running fsRestrictedApiFormLogicValidation. Analysis complete.'
    },
    conversationId: '8aba496f-95ff-4b12-abc0-c7a319f1e501',
    fromUserId: 'cx-slack-robot',
    fromRole: 'robot',
    toRole: 'cx-customer',
    messageType: 'robot',
    threadId: undefined,
    originalMessageId: undefined,
    createdAt: 2025-08-10T07:49:45.044Z,
    updatedAt: 2025-08-10T07:49:45.044Z
  },
  timestamp: '2025-08-10T07:49:45.044Z'
}
Gateway: Broadcast completed
[95m[Nest] 1949267  - [39m08/10/2025, 2:49:45 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95monStreamFinished called[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:49:45 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "contentLength": 25046,
  "authorRole": "assistant",
  "contentPreview": "Let's proceed with analyzing the logic for the form with ID `5375703`. I'll check for any potential ..."
}

[95m[Nest] 1949267  - [39m08/10/2025, 2:49:45 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mCalling delayedMessageCallback with finished message[39m
{
  allConversationMessages: [
    {
      id: '2f9dfc67-1296-451a-990f-947debec1e57',
      content: [Object],
      conversationId: '8aba496f-95ff-4b12-abc0-c7a319f1e501',
      fromUserId: 'cx-slack-robot',
      fromRole: 'cx-customer',
      toRole: 'cx-agent',
      messageType: 'text',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T07:49:38.829Z,
      updatedAt: 2025-08-10T07:49:38.829Z
    },
    {
      id: '45df2093-e3ad-4ee9-bee8-296987b32a84',
      content: [Object],
      conversationId: '8aba496f-95ff-4b12-abc0-c7a319f1e501',
      fromUserId: 'cx-slack-robot',
      fromRole: 'robot',
      toRole: 'cx-customer',
      messageType: 'robot',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T07:49:44.552Z,
      updatedAt: 2025-08-10T07:49:44.552Z
    },
    {
      id: '4b24b091-cd45-4ce8-a210-f28927b6d804',
      content: [Object],
      conversationId: '8aba496f-95ff-4b12-abc0-c7a319f1e501',
      fromUserId: 'cx-slack-robot',
      fromRole: 'robot',
      toRole: 'cx-customer',
      messageType: 'robot',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T07:49:45.044Z,
      updatedAt: 2025-08-10T07:49:45.044Z
    },
    {
      id: 'b160d4a3-84ee-496b-99c0-57d3428b5804',
      content: [Object],
      conversationId: '8aba496f-95ff-4b12-abc0-c7a319f1e501',
      fromUserId: 'cx-slack-robot',
      fromRole: 'robot',
      toRole: 'cx-customer',
      messageType: 'robot',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T07:49:45.046Z,
      updatedAt: 2025-08-10T07:49:45.046Z
    }
  ]
}
[95m[Nest] 1949267  - [39m08/10/2025, 2:49:45 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mBroadcasting dashboard event: conversation_updated[39m
Gateway: Broadcasting new_message to conversation 8aba496f-95ff-4b12-abc0-c7a319f1e501: {
  message: {
    id: 'b160d4a3-84ee-496b-99c0-57d3428b5804',
    content: {
      type: 'text/plain',
      payload: "Let's proceed with analyzing the logic for the form with ID `5375703`. I'll check for any potential issues with the form's logic setup. Please hold on for a moment.\n" +
        '🔍 *Logic Validation Results*\n' +
        '\n' +
        '📊 *Summary:* 119 total log items\n' +
        '• ❌ 0 errors\n' +
        '• ⚠️ 115 warnings\n' +
        '• ℹ️ 4 info\n' +
        '• 🔍 0 debug\n' +
        '\n' +
        '⚠️ *Found 115 issue(s):*\n' +
        '\n' +
        '⚠️ *WARNING* (1/115)\n' +
        '• *Message:* Logic error: \n' +
        "     Field '(E) A->B->C-D->E->A (logi...' (148456739) is attempting to  add logic branch which would create circular reference to its...\n" +
        '• *Subject ID:* `148456734`\n' +
        '\n' +
        '⚠️ *WARNING* (2/115)\n' +
        '• *Message:* Logic error: \n' +
        "     Field '(D) A->B->C-D->E->A (logi...' (148456740) is attempting to  add logic branch which would create circular reference to its...\n" +
        '• *Subject ID:* `148456739`\n' +
        '\n' +
        '⚠️ *WARNING* (3/115)\n' +
        '• *Message:* Logic error: \n' +
        "     Field '(C) A->B->C-D->E->A (logi...' (148456741) is attempting to  add logic branch which would create circular reference to its...\n" +
        '• *Subject ID:* `148456740`\n' +
        '\n' +
        '⚠️ *WARNING* (4/115)\n' +
        '• *Message:* Logic error: \n' +
        "     Field '(B) A->B->C-D->E->A (logi...' (148456742) is attempting to  add logic branch which would create circular reference to its...\n" +
        '• *Subject ID:* `148456741`\n' +
        '\n' +
        '⚠️ *WARNING* (5/115)\n' +
        '• *Message:* Logic error: \n' +
        "     Field '(A) A->B->C-D->E->A (logi...' (148456734) is attempting to  add logic branch which would create circular reference to its...\n" +
        '• *Subject ID:* `148456742`\n' +
        '\n' +
        '⚠️ *WARNING* (6/115)\n' +
        '• *Message:* Logic error: \n' +
        "     Field 'A.0 (inter-dependent)...' (148509478) is attempting to  add logic branch which would create circular reference to itself ...\n" +
        '• *Subject ID:* `148509465`\n' +
        '\n' +
        '⚠️ *WARNING* (7/115)\n' +
        '• *Message:* Logic error: \n' +
        "     Field 'A.1 (inter-dependent)...' (148509477) is attempting to  add logic branch which would create circular reference to itself ...\n" +
        '• *Subject ID:* `148509465`\n' +
        '\n' +
        '⚠️ *WARNING* (8/115)\n' +
        '• *Message:* Logic error: \n' +
        "     Field 'A.1 (inter-dependent)...' (148509477) is attempting to  add logic branch which would create circular reference to itself ...\n" +
        '• *Subject ID:* `148509465`\n' +
        '\n' +
        '⚠️ *WARNING* (9/115)\n' +
        '• *Message:* Logic error: \n' +
        "     Field 'B.1 (inter-dependent)...' (148509474) is attempting to  add logic branch which would create circular reference to itself ...\n" +
        '• *Subject ID:* `148509465`\n' +
        '\n' +
        '⚠️ *WARNING* (10/115)\n' +
        '• *Message:* Logic error: \n' +
        "     Field 'B.1 (inter-dependent)...' (148509474) is attempting to  add logic branch which would create circular reference to itself ...\n" +
        '• *Subject ID:* `148509465`\n' +
        '\n' +
        '⚠️ *WARNING* (11/115)\n' +
        '• *Message:* Logic error: \n' +
        "     Field 'B (inter-dependent)...' (148509476) is attempting to  add logic branch which would create circular reference to itself (i...\n" +
        '• *Subject ID:* `148509465`\n' +
        '\n' +
        '⚠️ *WARNING* (12/115)\n' +
        '• *Message:* Logic error: \n' +
        "     Field 'B (inter-dependent)...' (148509476) is attempting to  add logic branch which would create circular reference to itself (i...\n" +
        '• *Subject ID:* `148509465`\n' +
        '\n' +
        '⚠️ *WARNING* (13/115)\n' +
        '• *Message:* Logic error: \n' +
        "     Field 'B.0 (inter-dependent)...' (148509475) is attempting to  add logic branch which would create circular reference to itself ...\n" +
        '• *Subject ID:* `148509465`\n' +
        '\n' +
        '⚠️ *WARNING* (14/115)\n' +
        '• *Message:* Logic error: \n' +
        "     Field 'B.0 (inter-dependent)...' (148509475) is attempting to  add logic branch which would create circular reference to itself ...\n" +
        '• *Subject ID:* `148509465`\n' +
        '\n' +
        '⚠️ *WARNING* (15/115)\n' +
        '• *Message:* Logic error: \n' +
        "     Field 'A (inter-dependent) ...' (148509470) is attempting to  add logic branch which would create circular reference to itself (...\n" +
        '• *Subject ID:* `148509465`\n' +
        '\n' +
        '⚠️ *WARNING* (16/115)\n' +
        '• *Message:* Logic error: \n' +
        "     Field 'A (inter-dependent) ...' (148509470) is attempting to  add logic branch which would create circular reference to itself (...\n" +
        '• *Subject ID:* `148509465`\n' +
        '\n' +
        '⚠️ *WARNING* (17/115)\n' +
        '• *Message:* Logic error: \n' +
        "     Field 'Inter-dependent (not so m...' (148509465) is attempting to  add logic branch which would create circular reference to its...\n" +
        '• *Subject ID:* `148509465`\n' +
        '\n' +
        '⚠️ *WARNING* (18/115)\n' +
        '• *Message:* Logic error: \n' +
        "     Field 'A.0 (inter-dependent)...' (148509478) is attempting to  add logic branch which would create circular reference to itself ...\n" +
        '• *Subject ID:* `148509470`\n' +
        '\n' +
        '⚠️ *WARNING* (19/115)\n' +
        '• *Message:* Logic error: \n' +
        "     Field 'A.1 (inter-dependent)...' (148509477) is attempting to  add logic branch which would create circular reference to itself ...\n" +
        '• *Subject ID:* `148509470`\n' +
        '\n' +
        '⚠️ *WARNING* (20/115)\n' +
        '• *Message:* Logic error: \n' +
        "     Field 'A.1 (inter-dependent)...' (148509477) is attempting to  add logic branch which would create circular reference to itself ...\n" +
        '• *Subject ID:* `148509470`\n' +
        '\n' +
        '⚠️ *WARNING* (21/115)\n' +
        '• *Message:* Logic error: \n' +
        "     Field 'B.1 (inter-dependent)...' (148509474) is attempting to  add logic branch which would create circular reference to itself ...\n" +
        '• *Subject ID:* `148509470`\n' +
        '\n' +
        '⚠️ *WARNING* (22/115)\n' +
        '• *Message:* Logic error: \n' +
        "     Field 'B.1 (inter-dependent)...' (148509474) is attempting to  add logic branch which would create circular reference to itself ...\n" +
        '• *Subject ID:* `148509470`\n' +
        '\n' +
        '⚠️ *WARNING* (23/115)\n' +
        '• *Message:* Logic error: \n' +
        "     Field 'B (inter-dependent)...' (148509476) is attempting to  add logic branch which would create circular reference to itself (i...\n" +
        '• *Subject ID:* `148509470`\n' +
        '\n' +
        '⚠️ *WARNING* (24/115)\n' +
        '• *Message:* Logic error: \n' +
        "     Field 'B (inter-dependent)...' (148509476) is attempting to  add logic branch which would create circular reference to itself (i...\n" +
        '• *Subject ID:* `148509470`\n' +
        '\n' +
        '⚠️ *WARNING* (25/115)\n' +
        '• *Message:* Logic error: \n' +
        "     Field 'B.0 (inter-dependent)...' (148509475) is attempting to  add logic branch which would create circular reference to itself ...\n" +
        '• *Subject ID:* `148509470`\n' +
        '\n' +
        '⚠️ *WARNING* (26/115)\n' +
        '• *Message:* Logic error: \n' +
        "     Field 'B.0 (inter-dependent)...' (148509475) is attempting to  add logic branch which would create circular reference to itself ...\n" +
        '• *Subject ID:* `148509470`\n' +
        '\n' +
        '⚠️ *WARNING* (27/115)\n' +
        '• *Message:* Logic error: \n' +
        "     Field 'A (inter-dependent) ...' (148509470) is attempting to  add logic branch which would create circular reference to itself (...\n" +
        '• *Subject ID:* `148509470`\n' +
        '\n' +
        '⚠️ *WARNING* (28/115)\n' +
        '• *Message:* Logic error: \n' +
        "     Field 'A (inter-dependent) ...' (148509470) is attempting to  add logic branch which would create circular reference to itself (...\n" +
        '• *Subject ID:* `148509470`\n' +
        '\n' +
        '⚠️ *WARNING* (29/115)\n' +
        '• *Message:* Logic error: \n' +
        "     Field 'A.0 (inter-dependent)...' (148509478) is attempting to  add logic branch which would create circular reference to itself ...\n" +
        '• *Subject ID:* `148509474`\n' +
        '\n' +
        '⚠️ *WARNING* (30/115)\n' +
        '• *Message:* Logic error: \n' +
        "     Field 'A.1 (inter-dependent)...' (148509477) is attempting to  add logic branch which would create circular reference to itself ...\n" +
        '• *Subject ID:* `148509474`\n' +
        '\n' +
        '⚠️ *WARNING* (31/115)\n' +
        '• *Message:* Logic error: \n' +
        "     Field 'A.1 (inter-dependent)...' (148509477) is attempting to  add logic branch which would create circular reference to itself ...\n" +
        '• *Subject ID:* `148509474`\n' +
        '\n' +
        '⚠️ *WARNING* (32/115)\n' +
        '• *Message:* Logic error: \n' +
        "     Field 'B (inter-dependent)...' (148509476) is attempting to  add logic branch which would create circular reference to itself (i...\n" +
        '• *Subject ID:* `148509474`\n' +
        '\n' +
        '⚠️ *WARNING* (33/115)\n' +
        '• *Message:* Logic error: \n' +
        "     Field 'B (inter-dependent)...' (148509476) is attempting to  add logic branch which would create circular reference to itself (i...\n" +
        '• *Subject ID:* `148509474`\n' +
        '\n' +
        '⚠️ *WARNING* (34/115)\n' +
        '• *Message:* Logic error: \n' +
        "     Field 'B (inter-dependent)...' (148509476) is attempting to  add logic branch which would create circular reference to itself (i...\n" +
        '• *Subject ID:* `148509474`\n' +
        '\n' +
        '⚠️ *WARNING* (35/115)\n' +
        '• *Message:* Logic error: \n' +
        "     Field 'B.0 (inter-dependent)...' (148509475) is attempting to  add logic branch which would create circular reference to itself ...\n" +
        '• *Subject ID:* `148509474`\n' +
        '\n' +
        '⚠️ *WARNING* (36/115)\n' +
        '• *Message:* Logic error: \n' +
        "     Field 'B.0 (inter-dependent)...' (148509475) is attempting to  add logic branch which would create circular reference to itself ...\n" +
        '• *Subject ID:* `148509474`\n' +
        '\n' +
        '⚠️ *WARNING* (37/115)\n' +
        '• *Message:* Logic error: \n' +
        "     Field 'A (inter-dependent) ...' (148509470) is attempting to  add logic branch which would create circular reference to itself (...\n" +
        '• *Subject ID:* `148509474`\n' +
        '\n' +
        '⚠️ *WARNING* (38/115)\n' +
        '• *Message:* Logic error: \n' +
        "     Field 'A (inter-dependent) ...' (148509470) is attempting to  add logic branch which would create circular reference to itself (...\n" +
        '• *Subject ID:* `148509474`\n' +
        '\n' +
        '⚠️ *WARNING* (39/115)\n' +
        '• *Message:* Logic error: \n' +
        "     Field 'B.1 (inter-dependent)...' (148509474) is attempting to  add logic branch which would create circular reference to itself ...\n" +
        '• *Subject ID:* `148509474`\n' +
        '\n' +
        '⚠️ *WARNING* (40/115)\n' +
        '• *Message:* Logic error: \n' +
        "     Field 'A.0 (inter-dependent)...' (148509478) is attempting to  add logic branch which would create circular reference to itself ...\n" +
        '• *Subject ID:* `148509475`\n' +
        '\n' +
        '⚠️ *WARNING* (41/115)\n' +
        '• *Message:* Logic error: \n' +
        "     Field 'A.1 (inter-dependent)...' (148509477) is attempting to  add logic branch which would create circular reference to itself ...\n" +
        '• *Subject ID:* `148509475`\n' +
        '\n' +
        '⚠️ *WARNING* (42/115)\n' +
        '• *Message:* Logic error: \n' +
        "     Field 'A.1 (inter-dependent)...' (148509477) is attempting to  add logic branch which would create circular reference to itself ...\n" +
        '• *Subject ID:* `148509475`\n' +
        '\n' +
        '⚠️ *WARNING* (43/115)\n' +
        '• *Message:* Logic error: \n' +
        "     Field 'B.1 (inter-dependent)...' (148509474) is attempting to  add logic branch which would create circular reference to itself ...\n" +
        '• *Subject ID:* `148509475`\n' +
        '\n' +
        '⚠️ *WARNING* (44/115)\n' +
        '• *Message:* Logic error: \n' +
        "     Field 'B.1 (inter-dependent)...' (148509474) is attempting to  add logic branch which would create circular reference to itself ...\n" +
        '• *Subject ID:* `148509475`\n' +
        '\n' +
        '⚠️ *WARNING* (45/115)\n' +
        '• *Message:* Logic error: \n' +
        "     Field 'B (inter-dependent)...' (148509476) is attempting to  add logic branch which would create circular reference to itself (i...\n" +
        '• *Subject ID:* `148509475`\n' +
        '\n' +
        '⚠️ *WARNING* (46/115)'... 15046 more characters
    },
    conversationId: '8aba496f-95ff-4b12-abc0-c7a319f1e501',
    fromUserId: 'cx-slack-robot',
    fromRole: 'robot',
    toRole: 'cx-customer',
    messageType: 'robot',
    threadId: undefined,
    originalMessageId: undefined,
    createdAt: 2025-08-10T07:49:45.046Z,
    updatedAt: 2025-08-10T07:49:45.046Z
  },
  timestamp: '2025-08-10T07:49:45.046Z'
}
Gateway: Broadcast completed
[32m[Nest] 1949267  - [39m08/10/2025, 2:49:45 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mMessage sent to Slack channel C091Y5UNA1M[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:49:45 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mMessage sent to Slack channel C091Y5UNA1M[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:50:06 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:51:06 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:52:06 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:53:06 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:54:06 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:55:06 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:56:06 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:57:06 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:58:06 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:59:06 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:59:37 AM [32m    LOG[39m [38;5;3m[SlackSignatureGuard] [39m[32mSlack signature verified successfully[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:59:37 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32m[a31529eb-7a11-4320-a5c6-38fd05980347] Incoming POST /istack-buddy/slack-integration/slack/events[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:59:37 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32mData: {
  "userAgent": "Slackbot 1.0 (+https://api.slack.com/robots)",
  "ip": "::ffff:127.0.0.1",
  "params": {},
  "query": {}
}[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:59:37 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mReceived app mention event[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:59:37 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mDEBUG: Event text: "<@U092RRN555X> can you give me an over of 5375703", trimmed: "<@U092RRN555X> can you give me an over of 5375703"[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:59:37 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mAdding reaction :thinking_face: to message 1754812776.222809 in channel C091Y5UNA1M[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:59:38 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mAdded reaction :thinking_face: to message in channel C091Y5UNA1M[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:59:38 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mBroadcasting dashboard event: conversation_created[39m
{
  allConversationMessages: [
    {
      id: 'da8517a0-b6bd-4e30-97e3-9f6e964cbdba',
      content: [Object],
      conversationId: '169f1e7b-6e33-49d2-91a4-ef3059840c91',
      fromUserId: 'cx-slack-robot',
      fromRole: 'cx-customer',
      toRole: 'cx-agent',
      messageType: 'text',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T07:59:38.229Z,
      updatedAt: 2025-08-10T07:59:38.229Z
    }
  ]
}
[95m[Nest] 1949267  - [39m08/10/2025, 2:59:38 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mBroadcasting dashboard event: conversation_updated[39m
Gateway: Broadcasting new_message to conversation 169f1e7b-6e33-49d2-91a4-ef3059840c91: {
  message: {
    id: 'da8517a0-b6bd-4e30-97e3-9f6e964cbdba',
    content: {
      type: 'text/plain',
      payload: '<@U092RRN555X> can you give me an over of 5375703'
    },
    conversationId: '169f1e7b-6e33-49d2-91a4-ef3059840c91',
    fromUserId: 'cx-slack-robot',
    fromRole: 'cx-customer',
    toRole: 'cx-agent',
    messageType: 'text',
    threadId: undefined,
    originalMessageId: undefined,
    createdAt: 2025-08-10T07:59:38.229Z,
    updatedAt: 2025-08-10T07:59:38.229Z
  },
  timestamp: '2025-08-10T07:59:38.229Z'
}
Gateway: Broadcast completed
[32m[Nest] 1949267  - [39m08/10/2025, 2:59:38 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mMessage 1: [cx-customer] [object Object][39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:59:38 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mBuilding OpenAI message history:[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:59:38 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mObject:[39m
{
  "historyLength": 0,
  "historyRoles": [],
  "currentMessage": "<@U092RRN555X> can you give me an over of 5375703"
}

[32m[Nest] 1949267  - [39m08/10/2025, 2:59:38 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mAdding current message: <@U092RRN555X> can you give me an over of 5375703...[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:59:38 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mConversation being sent to robot:[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:59:38 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
[
  {
    "author": "user",
    "content": "<@U092RRN555X> can you give me an over of 5375703..."
  }
]

[95m[Nest] 1949267  - [39m08/10/2025, 2:59:39 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mTool call completion detected[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:59:39 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormAndRelatedEntityOverview",
  "finishReason": "tool_calls",
  "functionArgs": "{\"formId\":\"5375703\"}"
}

[95m[Nest] 1949267  - [39m08/10/2025, 2:59:39 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mExecuting function call[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:59:39 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormAndRelatedEntityOverview",
  "functionArgs": {
    "formId": "5375703"
  }
}

[95m[Nest] 1949267  - [39m08/10/2025, 2:59:39 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mChecking onFullMessageReceived callback[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:59:39 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "hasCallback": true,
  "callbackType": "function"
}

[95m[Nest] 1949267  - [39m08/10/2025, 2:59:39 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mCalling onFullMessageReceived for tool start[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:59:39 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormAndRelatedEntityOverview",
  "message": "Starting execution of fsRestrictedApiFormAndRelatedEntityOverview..."
}

[95m[Nest] 1949267  - [39m08/10/2025, 2:59:39 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mExecuting tool: fsRestrictedApiFormAndRelatedEntityOverview[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:59:39 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "toolArgs": {
    "formId": "5375703"
  }
}

[32m[Nest] 1949267  - [39m08/10/2025, 2:59:39 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mTool status updated: fsRestrictedApiFormAndRelatedEntityOverview -> executing[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:59:39 AM [95m  DEBUG[39m [38;5;3m[MarvToolCall] [39m[95mMarv tool call log[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:59:39 AM [95m  DEBUG[39m [38;5;3m[MarvToolCall] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormAndRelatedEntityOverview",
  "fnParamsJson": {
    "formId": "5375703"
  }
}

[32m[Nest] 1949267  - [39m08/10/2025, 2:59:40 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mTool fsRestrictedApiFormAndRelatedEntityOverview result: "[object Object]"[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:59:40 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mTool status updated: fsRestrictedApiFormAndRelatedEntityOverview -> completed[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:59:40 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mTool execution completed[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:59:40 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "toolName": "fsRestrictedApiFormAndRelatedEntityOverview",
  "resultType": "object",
  "isMarvTool": true
}

[95m[Nest] 1949267  - [39m08/10/2025, 2:59:40 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mCalling onFullMessageReceived for tool completion[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:59:40 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormAndRelatedEntityOverview",
  "message": "Finished running fsRestrictedApiFormAndRelatedEntityOverview. Analysis complete."
}

[32m[Nest] 1949267  - [39m08/10/2025, 2:59:40 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mBuilding OpenAI message history:[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:59:40 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mObject:[39m
{
  "historyLength": 1,
  "historyRoles": [
    {
      "fromRole": "cx-customer",
      "content": "<@U092RRN555X> can you give me an over of 5375703..."
    }
  ],
  "currentMessage": "<@U092RRN555X> can you give me an over of 5375703"
}

[32m[Nest] 1949267  - [39m08/10/2025, 2:59:40 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mProcessing message with role: cx-customer[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:59:40 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mAdding customer message: <@U092RRN555X> can you give me an over of 5375703...[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:59:40 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mCurrent message already in history, skipping[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:59:40 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mConversation being sent to robot:[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:59:40 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
[
  {
    "author": "user",
    "content": "<@U092RRN555X> can you give me an over of 5375703..."
  }
]

[32m[Nest] 1949267  - [39m08/10/2025, 2:59:40 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32m[a31529eb-7a11-4320-a5c6-38fd05980347] Response POST /istack-buddy/slack-integration/slack/events 200 - 3034ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:59:40 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32mData: {
  "statusCode": 200,
  "elapsed": "3034ms"
}[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:59:41 AM [32m    LOG[39m [38;5;3m[SlackSignatureGuard] [39m[32mSlack signature verified successfully[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:59:41 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32m[1454b572-39e0-4572-b5d4-63e1ba7ad253] Incoming POST /istack-buddy/slack-integration/slack/events[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:59:41 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32mData: {
  "userAgent": "Slackbot 1.0 (+https://api.slack.com/robots)",
  "ip": "::ffff:127.0.0.1",
  "params": {},
  "query": {}
}[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:59:41 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mReceived app mention event[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:59:41 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mDuplicate event detected: Ev09AGQW0HKJ[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:59:41 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32m[1454b572-39e0-4572-b5d4-63e1ba7ad253] Response POST /istack-buddy/slack-integration/slack/events 200 - 1ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:59:41 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32mData: {
  "statusCode": 200,
  "elapsed": "1ms"
}[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:59:42 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mTool call completion detected[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:59:42 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormAndRelatedEntityOverview",
  "finishReason": "tool_calls",
  "functionArgs": "{\"formId\":\"5375703\"}"
}

[95m[Nest] 1949267  - [39m08/10/2025, 2:59:42 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mExecuting function call[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:59:42 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormAndRelatedEntityOverview",
  "functionArgs": {
    "formId": "5375703"
  }
}

[95m[Nest] 1949267  - [39m08/10/2025, 2:59:42 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mChecking onFullMessageReceived callback[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:59:42 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "hasCallback": true,
  "callbackType": "function"
}

[95m[Nest] 1949267  - [39m08/10/2025, 2:59:42 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mCalling onFullMessageReceived for tool start[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:59:42 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormAndRelatedEntityOverview",
  "message": "Starting execution of fsRestrictedApiFormAndRelatedEntityOverview..."
}

[95m[Nest] 1949267  - [39m08/10/2025, 2:59:42 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95monFullMessageReceived called in multi-part response[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:59:42 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "contentLength": 68,
  "contentType": "text/plain"
}

[95m[Nest] 1949267  - [39m08/10/2025, 2:59:42 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mSending intermediate message via delayedMessageCallback[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:59:42 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "content": "Starting execution of fsRestrictedApiFormAndRelatedEntityOverview......",
  "contentType": "text/plain"
}

{
  allConversationMessages: [
    {
      id: 'da8517a0-b6bd-4e30-97e3-9f6e964cbdba',
      content: [Object],
      conversationId: '169f1e7b-6e33-49d2-91a4-ef3059840c91',
      fromUserId: 'cx-slack-robot',
      fromRole: 'cx-customer',
      toRole: 'cx-agent',
      messageType: 'text',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T07:59:38.229Z,
      updatedAt: 2025-08-10T07:59:38.229Z
    },
    {
      id: '0dba4931-5a80-4362-8ad6-b65e0227f37c',
      content: [Object],
      conversationId: '169f1e7b-6e33-49d2-91a4-ef3059840c91',
      fromUserId: 'cx-slack-robot',
      fromRole: 'robot',
      toRole: 'cx-customer',
      messageType: 'robot',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T07:59:42.799Z,
      updatedAt: 2025-08-10T07:59:42.799Z
    }
  ]
}
[95m[Nest] 1949267  - [39m08/10/2025, 2:59:42 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mBroadcasting dashboard event: conversation_updated[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:59:42 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mExecuting tool: fsRestrictedApiFormAndRelatedEntityOverview[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:59:42 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "toolArgs": {
    "formId": "5375703"
  }
}

[32m[Nest] 1949267  - [39m08/10/2025, 2:59:42 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mTool status updated: fsRestrictedApiFormAndRelatedEntityOverview -> executing[39m
Gateway: Broadcasting new_message to conversation 169f1e7b-6e33-49d2-91a4-ef3059840c91: {
  message: {
    id: '0dba4931-5a80-4362-8ad6-b65e0227f37c',
    content: {
      type: 'text/plain',
      payload: 'Starting execution of fsRestrictedApiFormAndRelatedEntityOverview...'
    },
    conversationId: '169f1e7b-6e33-49d2-91a4-ef3059840c91',
    fromUserId: 'cx-slack-robot',
    fromRole: 'robot',
    toRole: 'cx-customer',
    messageType: 'robot',
    threadId: undefined,
    originalMessageId: undefined,
    createdAt: 2025-08-10T07:59:42.799Z,
    updatedAt: 2025-08-10T07:59:42.799Z
  },
  timestamp: '2025-08-10T07:59:42.799Z'
}
Gateway: Broadcast completed
[95m[Nest] 1949267  - [39m08/10/2025, 2:59:42 AM [95m  DEBUG[39m [38;5;3m[MarvToolCall] [39m[95mMarv tool call log[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:59:42 AM [95m  DEBUG[39m [38;5;3m[MarvToolCall] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormAndRelatedEntityOverview",
  "fnParamsJson": {
    "formId": "5375703"
  }
}

[32m[Nest] 1949267  - [39m08/10/2025, 2:59:43 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mMessage sent to Slack channel C091Y5UNA1M[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:59:43 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mTool fsRestrictedApiFormAndRelatedEntityOverview result: "[object Object]"[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:59:43 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mTool status updated: fsRestrictedApiFormAndRelatedEntityOverview -> completed[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:59:43 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mTool execution completed[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:59:43 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "toolName": "fsRestrictedApiFormAndRelatedEntityOverview",
  "resultType": "object",
  "isMarvTool": true
}

[95m[Nest] 1949267  - [39m08/10/2025, 2:59:43 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mCalling onFullMessageReceived for tool completion[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:59:43 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormAndRelatedEntityOverview",
  "message": "Finished running fsRestrictedApiFormAndRelatedEntityOverview. Analysis complete."
}

[95m[Nest] 1949267  - [39m08/10/2025, 2:59:43 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95monFullMessageReceived called in multi-part response[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:59:43 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "contentLength": 80,
  "contentType": "text/plain"
}

[95m[Nest] 1949267  - [39m08/10/2025, 2:59:43 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mSending intermediate message via delayedMessageCallback[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:59:43 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "content": "Finished running fsRestrictedApiFormAndRelatedEntityOverview. Analysis complete....",
  "contentType": "text/plain"
}

{
  allConversationMessages: [
    {
      id: 'da8517a0-b6bd-4e30-97e3-9f6e964cbdba',
      content: [Object],
      conversationId: '169f1e7b-6e33-49d2-91a4-ef3059840c91',
      fromUserId: 'cx-slack-robot',
      fromRole: 'cx-customer',
      toRole: 'cx-agent',
      messageType: 'text',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T07:59:38.229Z,
      updatedAt: 2025-08-10T07:59:38.229Z
    },
    {
      id: '0dba4931-5a80-4362-8ad6-b65e0227f37c',
      content: [Object],
      conversationId: '169f1e7b-6e33-49d2-91a4-ef3059840c91',
      fromUserId: 'cx-slack-robot',
      fromRole: 'robot',
      toRole: 'cx-customer',
      messageType: 'robot',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T07:59:42.799Z,
      updatedAt: 2025-08-10T07:59:42.799Z
    },
    {
      id: '7c7eaee0-89de-4007-a5df-ee77af94d039',
      content: [Object],
      conversationId: '169f1e7b-6e33-49d2-91a4-ef3059840c91',
      fromUserId: 'cx-slack-robot',
      fromRole: 'robot',
      toRole: 'cx-customer',
      messageType: 'robot',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T07:59:43.317Z,
      updatedAt: 2025-08-10T07:59:43.317Z
    }
  ]
}
[95m[Nest] 1949267  - [39m08/10/2025, 2:59:43 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mBroadcasting dashboard event: conversation_updated[39m
Gateway: Broadcasting new_message to conversation 169f1e7b-6e33-49d2-91a4-ef3059840c91: {
  message: {
    id: '7c7eaee0-89de-4007-a5df-ee77af94d039',
    content: {
      type: 'text/plain',
      payload: 'Finished running fsRestrictedApiFormAndRelatedEntityOverview. Analysis complete.'
    },
    conversationId: '169f1e7b-6e33-49d2-91a4-ef3059840c91',
    fromUserId: 'cx-slack-robot',
    fromRole: 'robot',
    toRole: 'cx-customer',
    messageType: 'robot',
    threadId: undefined,
    originalMessageId: undefined,
    createdAt: 2025-08-10T07:59:43.317Z,
    updatedAt: 2025-08-10T07:59:43.317Z
  },
  timestamp: '2025-08-10T07:59:43.317Z'
}
Gateway: Broadcast completed
[95m[Nest] 1949267  - [39m08/10/2025, 2:59:43 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95monStreamFinished called[39m
[95m[Nest] 1949267  - [39m08/10/2025, 2:59:43 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "contentLength": 1071,
  "authorRole": "assistant",
  "contentPreview": "\n📋 *Form Overview*\n\n• *Form ID:* `5375703`\n• *URL:* https://terarychambers.formstack.com/forms/misc..."
}

[95m[Nest] 1949267  - [39m08/10/2025, 2:59:43 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mCalling delayedMessageCallback with finished message[39m
{
  allConversationMessages: [
    {
      id: 'da8517a0-b6bd-4e30-97e3-9f6e964cbdba',
      content: [Object],
      conversationId: '169f1e7b-6e33-49d2-91a4-ef3059840c91',
      fromUserId: 'cx-slack-robot',
      fromRole: 'cx-customer',
      toRole: 'cx-agent',
      messageType: 'text',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T07:59:38.229Z,
      updatedAt: 2025-08-10T07:59:38.229Z
    },
    {
      id: '0dba4931-5a80-4362-8ad6-b65e0227f37c',
      content: [Object],
      conversationId: '169f1e7b-6e33-49d2-91a4-ef3059840c91',
      fromUserId: 'cx-slack-robot',
      fromRole: 'robot',
      toRole: 'cx-customer',
      messageType: 'robot',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T07:59:42.799Z,
      updatedAt: 2025-08-10T07:59:42.799Z
    },
    {
      id: '7c7eaee0-89de-4007-a5df-ee77af94d039',
      content: [Object],
      conversationId: '169f1e7b-6e33-49d2-91a4-ef3059840c91',
      fromUserId: 'cx-slack-robot',
      fromRole: 'robot',
      toRole: 'cx-customer',
      messageType: 'robot',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T07:59:43.317Z,
      updatedAt: 2025-08-10T07:59:43.317Z
    },
    {
      id: '2b4e7584-15e1-42bd-8a34-0fcceb1e0501',
      content: [Object],
      conversationId: '169f1e7b-6e33-49d2-91a4-ef3059840c91',
      fromUserId: 'cx-slack-robot',
      fromRole: 'robot',
      toRole: 'cx-customer',
      messageType: 'robot',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T07:59:43.318Z,
      updatedAt: 2025-08-10T07:59:43.318Z
    }
  ]
}
[95m[Nest] 1949267  - [39m08/10/2025, 2:59:43 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mBroadcasting dashboard event: conversation_updated[39m
Gateway: Broadcasting new_message to conversation 169f1e7b-6e33-49d2-91a4-ef3059840c91: {
  message: {
    id: '2b4e7584-15e1-42bd-8a34-0fcceb1e0501',
    content: {
      type: 'text/plain',
      payload: '\n' +
        '📋 *Form Overview*\n' +
        '\n' +
        '• *Form ID:* `5375703`\n' +
        '• *URL:* https://terarychambers.formstack.com/forms/miscellaneous_broken_logic\n' +
        '• *Version:* 4\n' +
        '• *Total Submissions:* 2\n' +
        '• *Submissions Today:* 0\n' +
        '• *Field Count:* 56\n' +
        '• *Status:* ✅ Active\n' +
        '• *Encrypted:* No\n' +
        '• *Timezone:* US/Eastern\n' +
        '• *One Question at a Time:* No\n' +
        '• *Has Approvers:* No\n' +
        '• *Workflow Form:* No\n' +
        '\n' +
        '*Submit Actions (8):*\n' +
        '• Circular Logic (ID: `6803746`)\n' +
        '• Switzerland (ID: `6803747`)\n' +
        '• Two mutually Exclusive Trees (both with circular logic) (ID: `6803748`)\n' +
        '• No Logic (ID: `6803749`)\n' +
        '• Two Panel With Conflicting Logic (ID: `6803988`)\n' +
        '• A) Big Dipper (ID: `6804041`)\n' +
        '• B) Big Dipper (ID: `6804042`)\n' +
        '• A & B - Big Dipper (ID: `6804044`)\n' +
        '\n' +
        '*Notification Emails (4):*\n' +
        '• Circular Logic (ID: `8450140`)\n' +
        '• Switzerland (ID: `8450281`)\n' +
        '• Two mutually Exclusive Trees (both with circular logic) (ID: `8450282`)\n' +
        '• No Logic (ID: `8450287`)\n' +
        '\n' +
        '*Confirmation Emails (4):*\n' +
        '• Circular Logic (ID: `2711441`)\n' +
        '• Switzerland (ID: `2711442`)\n' +
        '• Two mutually Exclusive Trees (both with circular logic) (ID: `2711443`)\n' +
        '• No Logic (ID: `2711444`)\n' +
        '\n'
    },
    conversationId: '169f1e7b-6e33-49d2-91a4-ef3059840c91',
    fromUserId: 'cx-slack-robot',
    fromRole: 'robot',
    toRole: 'cx-customer',
    messageType: 'robot',
    threadId: undefined,
    originalMessageId: undefined,
    createdAt: 2025-08-10T07:59:43.318Z,
    updatedAt: 2025-08-10T07:59:43.318Z
  },
  timestamp: '2025-08-10T07:59:43.318Z'
}
Gateway: Broadcast completed
[32m[Nest] 1949267  - [39m08/10/2025, 2:59:43 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mMessage sent to Slack channel C091Y5UNA1M[39m
[32m[Nest] 1949267  - [39m08/10/2025, 2:59:43 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mMessage sent to Slack channel C091Y5UNA1M[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:00:01 AM [32m    LOG[39m [38;5;3m[SlackSignatureGuard] [39m[32mSlack signature verified successfully[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:00:01 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32m[018f7e67-de1e-4ee4-b73e-2d93a15e2791] Incoming POST /istack-buddy/slack-integration/slack/events[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:00:01 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32mData: {
  "userAgent": "Slackbot 1.0 (+https://api.slack.com/robots)",
  "ip": "::ffff:127.0.0.1",
  "params": {},
  "query": {}
}[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:00:01 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mReceived app mention event[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:00:01 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mDEBUG: Event text: "<@U092RRN555X> /marv-session", trimmed: "<@U092RRN555X> /marv-session"[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:00:01 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mReceived /marv-session command via app mention[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:00:01 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mDEBUG: Slack conversationId: 1754812776.222809[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:00:01 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mDEBUG: Conversation record: {"internalConversationId":"169f1e7b-6e33-49d2-91a4-ef3059840c91","slackConversationId":"1754812776.222809"}[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:00:01 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mDEBUG: Internal conversation ID: 169f1e7b-6e33-49d2-91a4-ef3059840c91[39m
[95m[Nest] 1949267  - [39m08/10/2025, 3:00:01 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.addUser] [39m[95mUser added successfully[39m
[95m[Nest] 1949267  - [39m08/10/2025, 3:00:01 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.addUser] [39m[95mData: {
  "userId": "169f1e7b-6e33-49d2-91a4-ef3059840c91",
  "ownPermissionsCount": 2,
  "groupMembershipsCount": 0
}[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:00:01 AM [32m    LOG[39m [38;5;3m[UserProfileService.addTemporaryUser] [39m[32mTemporary user profile added[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:00:01 AM [32m    LOG[39m [38;5;3m[UserProfileService.addTemporaryUser] [39m[32mData: {
  "userId": "169f1e7b-6e33-49d2-91a4-ef3059840c91"
}[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:00:01 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mMessage sent to Slack channel C091Y5UNA1M[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:00:01 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32m[018f7e67-de1e-4ee4-b73e-2d93a15e2791] Response POST /istack-buddy/slack-integration/slack/events 200 - 430ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:00:01 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32mData: {
  "statusCode": 200,
  "elapsed": "430ms"
}[39m
[95m[Nest] 1949267  - [39m08/10/2025, 3:00:04 AM [95m  DEBUG[39m [95mJWT token from query parameter validated, allowing controller to handle redirect[39m
[95m[Nest] 1949267  - [39m08/10/2025, 3:00:04 AM [95m  DEBUG[39m [95mObject:[39m
{
  "userId": "169f1e7b-6e33-49d2-91a4-ef3059840c91",
  "endpoint": "/public/form-marv/169f1e7b-6e33-49d2-91a4-ef3059840c91/5375703?jwtToken=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiIxNjlmMWU3Yi02ZTMzLTQ5ZDItOTFhNC1lZjMwNTk4NDBjOTEiLCJlbWFpbCI6ImZvcm0tbWFydi0xNzU0ODEyODAxNTA2QGV4YW1wbGUuY29tIiwidXNlcm5hbWUiOiIxNjlmMWU3Yi02ZTMzLTQ5ZDItOTFhNC1lZjMwNTk4NDBjOTEiLCJhY2NvdW50VHlwZSI6IlRFTVBPUkFSWSIsImlhdCI6MTc1NDgxMjgwMSwiZXhwIjoxNzU0ODQxNjAxfQ.ahjykS9NQjyhKlxiXOTOiSU6R8BlpUymAEXZaV4_HC4",
  "method": "GET",
  "correlationId": "unknown"
}

[32m[Nest] 1949267  - [39m08/10/2025, 3:00:04 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32m[d183d0a3-059f-444a-ab69-9f2532557609] Incoming GET /public/form-marv/169f1e7b-6e33-49d2-91a4-ef3059840c91/5375703?jwtToken=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiIxNjlmMWU3Yi02ZTMzLTQ5ZDItOTFhNC1lZjMwNTk4NDBjOTEiLCJlbWFpbCI6ImZvcm0tbWFydi0xNzU0ODEyODAxNTA2QGV4YW1wbGUuY29tIiwidXNlcm5hbWUiOiIxNjlmMWU3Yi02ZTMzLTQ5ZDItOTFhNC1lZjMwNTk4NDBjOTEiLCJhY2NvdW50VHlwZSI6IlRFTVBPUkFSWSIsImlhdCI6MTc1NDgxMjgwMSwiZXhwIjoxNzU0ODQxNjAxfQ.ahjykS9NQjyhKlxiXOTOiSU6R8BlpUymAEXZaV4_HC4[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:00:04 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32mData: {
  "userAgent": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36",
  "ip": "::1",
  "params": {
    "conversationId": "169f1e7b-6e33-49d2-91a4-ef3059840c91",
    "formId": "5375703"
  },
  "query": {
    "jwtToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiIxNjlmMWU3Yi02ZTMzLTQ5ZDItOTFhNC1lZjMwNTk4NDBjOTEiLCJlbWFpbCI6ImZvcm0tbWFydi0xNzU0ODEyODAxNTA2QGV4YW1wbGUuY29tIiwidXNlcm5hbWUiOiIxNjlmMWU3Yi02ZTMzLTQ5ZDItOTFhNC1lZjMwNTk4NDBjOTEiLCJhY2NvdW50VHlwZSI6IlRFTVBPUkFSWSIsImlhdCI6MTc1NDgxMjgwMSwiZXhwIjoxNzU0ODQxNjAxfQ.ahjykS9NQjyhKlxiXOTOiSU6R8BlpUymAEXZaV4_HC4"
  }
}[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:00:04 AM [32m    LOG[39m [38;5;3m[AuthenticationService.authenticateUser] [39m[32mJWT authentication attempt started[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:00:04 AM [32m    LOG[39m [38;5;3m[AuthenticationService.authenticateUser] [39m[32mData: {
  "userId": "169f1e7b-6e33-49d2-91a4-ef3059840c91",
  "hasToken": true
}[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:00:04 AM [32m    LOG[39m [38;5;3m[AuthenticationService.authenticateUser] [39m[32mJWT authentication successful[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:00:04 AM [32m    LOG[39m [38;5;3m[AuthenticationService.authenticateUser] [39m[32mData: {
  "userId": "169f1e7b-6e33-49d2-91a4-ef3059840c91",
  "email": "form-marv-1754812801506@example.com"
}[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:00:04 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32m[d183d0a3-059f-444a-ab69-9f2532557609] Response GET /public/form-marv/169f1e7b-6e33-49d2-91a4-ef3059840c91/5375703?jwtToken=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiIxNjlmMWU3Yi02ZTMzLTQ5ZDItOTFhNC1lZjMwNTk4NDBjOTEiLCJlbWFpbCI6ImZvcm0tbWFydi0xNzU0ODEyODAxNTA2QGV4YW1wbGUuY29tIiwidXNlcm5hbWUiOiIxNjlmMWU3Yi02ZTMzLTQ5ZDItOTFhNC1lZjMwNTk4NDBjOTEiLCJhY2NvdW50VHlwZSI6IlRFTVBPUkFSWSIsImlhdCI6MTc1NDgxMjgwMSwiZXhwIjoxNzU0ODQxNjAxfQ.ahjykS9NQjyhKlxiXOTOiSU6R8BlpUymAEXZaV4_HC4 302 - 3ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:00:04 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32mData: {
  "statusCode": 302,
  "elapsed": "3ms"
}[39m
[33m[Nest] 1949267  - [39m08/10/2025, 3:00:04 AM [33m   WARN[39m [33mNo authentication token provided[39m
[33m[Nest] 1949267  - [39m08/10/2025, 3:00:04 AM [33m   WARN[39m [33mObject:[39m
{
  "endpoint": "/public/form-marv/169f1e7b-6e33-49d2-91a4-ef3059840c91/5375703",
  "method": "GET",
  "correlationId": "unknown"
}

[31m[Nest] 1949267  - [39m08/10/2025, 3:00:04 AM [31m  ERROR[39m [38;5;3m[GlobalExceptionFilter] [39m[31mHTTP Exception 401: No authentication token provided[39m
UnauthorizedException: No authentication token provided
    at AuthPermissionGuard.canActivate (/mypart/tmc/projects/istack-buddy-server-take1/src/common/guards/auth-permission.guard.ts:97:13)
    at GuardsConsumer.tryActivate (/mypart/tmc/projects/istack-buddy-server-take1/node_modules/@nestjs/core/guards/guards-consumer.js:15:34)
    at canActivateFn (/mypart/tmc/projects/istack-buddy-server-take1/node_modules/@nestjs/core/router/router-execution-context.js:135:59)
    at /mypart/tmc/projects/istack-buddy-server-take1/node_modules/@nestjs/core/router/router-execution-context.js:42:37
    at /mypart/tmc/projects/istack-buddy-server-take1/node_modules/@nestjs/core/router/router-proxy.js:9:23
    at Layer.handle [as handle_request] (/mypart/tmc/projects/istack-buddy-server-take1/node_modules/express/lib/router/layer.js:95:5)
    at next (/mypart/tmc/projects/istack-buddy-server-take1/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/mypart/tmc/projects/istack-buddy-server-take1/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/mypart/tmc/projects/istack-buddy-server-take1/node_modules/express/lib/router/layer.js:95:5)
    at /mypart/tmc/projects/istack-buddy-server-take1/node_modules/express/lib/router/index.js:284:15
[31m[Nest] 1949267  - [39m08/10/2025, 3:00:04 AM [31m  ERROR[39m [38;5;3m[GlobalExceptionFilter] [39m[31mData: {
  "statusCode": 401,
  "requestBody": {},
  "requestQuery": {},
  "requestParams": {
    "conversationId": "169f1e7b-6e33-49d2-91a4-ef3059840c91",
    "formId": "5375703"
  }
}[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:00:04 AM [32m    LOG[39m [38;5;3m[GlobalExceptionFilter] [39m[32mAUDIT: ACCESS_DENIED - failure[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:00:04 AM [32m    LOG[39m [38;5;3m[GlobalExceptionFilter] [39m[32mData: {
  "auditEvent": "ACCESS_DENIED",
  "result": "failure",
  "details": {
    "statusCode": 401,
    "reason": "No authentication token provided",
    "attemptedResource": "/public/form-marv/169f1e7b-6e33-49d2-91a4-ef3059840c91/5375703"
  }
}[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:00:06 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:00:15 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: ToNtTsXBApWBbXLzAAAH[39m
[95m[Nest] 1949267  - [39m08/10/2025, 3:00:15 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mJoin room data received[39m
[95m[Nest] 1949267  - [39m08/10/2025, 3:00:15 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "data": {
    "conversationId": "169f1e7b-6e33-49d2-91a4-ef3059840c91",
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[95m[Nest] 1949267  - [39m08/10/2025, 3:00:15 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mApplied default joinData[39m
[95m[Nest] 1949267  - [39m08/10/2025, 3:00:15 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "joinData": {
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[ChatManagerService] Attempting to join conversation: 169f1e7b-6e33-49d2-91a4-ef3059840c91
[ChatManagerService] Available conversations: [
  '8aba496f-95ff-4b12-abc0-c7a319f1e501',
  '169f1e7b-6e33-49d2-91a4-ef3059840c91'
]
[95m[Nest] 1949267  - [39m08/10/2025, 3:00:15 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mBroadcasting dashboard event: conversation_participant_added[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:00:28 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient disconnected: ToNtTsXBApWBbXLzAAAH[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:01:06 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:02:06 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:02:47 AM [32m    LOG[39m [38;5;3m[SlackSignatureGuard] [39m[32mSlack signature verified successfully[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:02:47 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32m[0442f74c-9d53-473e-a139-6c857cc1fb3e] Incoming POST /istack-buddy/slack-integration/slack/events[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:02:47 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32mData: {
  "userAgent": "Slackbot 1.0 (+https://api.slack.com/robots)",
  "ip": "::ffff:127.0.0.1",
  "params": {},
  "query": {}
}[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:02:47 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mReceived app mention event[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:02:47 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mDEBUG: Event text: "<@U092RRN555X> can you provide calculation observations for form 6201623", trimmed: "<@U092RRN555X> can you provide calculation observations for form 6201623"[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:02:47 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mAdding reaction :thinking_face: to message 1754812965.532919 in channel C091Y5UNA1M[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:02:47 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mAdded reaction :thinking_face: to message in channel C091Y5UNA1M[39m
[95m[Nest] 1949267  - [39m08/10/2025, 3:02:47 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mBroadcasting dashboard event: conversation_created[39m
{
  allConversationMessages: [
    {
      id: 'b98ed9e8-611f-4ef4-90f2-c453ba0d25cc',
      content: [Object],
      conversationId: '58b6096d-c33b-47b5-99bd-4b8fa8b256f0',
      fromUserId: 'cx-slack-robot',
      fromRole: 'cx-customer',
      toRole: 'cx-agent',
      messageType: 'text',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T08:02:47.552Z,
      updatedAt: 2025-08-10T08:02:47.552Z
    }
  ]
}
[95m[Nest] 1949267  - [39m08/10/2025, 3:02:47 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mBroadcasting dashboard event: conversation_updated[39m
Gateway: Broadcasting new_message to conversation 58b6096d-c33b-47b5-99bd-4b8fa8b256f0: {
  message: {
    id: 'b98ed9e8-611f-4ef4-90f2-c453ba0d25cc',
    content: {
      type: 'text/plain',
      payload: '<@U092RRN555X> can you provide calculation observations for form 6201623'
    },
    conversationId: '58b6096d-c33b-47b5-99bd-4b8fa8b256f0',
    fromUserId: 'cx-slack-robot',
    fromRole: 'cx-customer',
    toRole: 'cx-agent',
    messageType: 'text',
    threadId: undefined,
    originalMessageId: undefined,
    createdAt: 2025-08-10T08:02:47.552Z,
    updatedAt: 2025-08-10T08:02:47.552Z
  },
  timestamp: '2025-08-10T08:02:47.552Z'
}
Gateway: Broadcast completed
[32m[Nest] 1949267  - [39m08/10/2025, 3:02:47 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mMessage 1: [cx-customer] [object Object][39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:02:47 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mBuilding OpenAI message history:[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:02:47 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mObject:[39m
{
  "historyLength": 0,
  "historyRoles": [],
  "currentMessage": "<@U092RRN555X> can you provide calculation observations for form 6201623"
}

[32m[Nest] 1949267  - [39m08/10/2025, 3:02:47 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mAdding current message: <@U092RRN555X> can you provide calculation observa...[39m
[95m[Nest] 1949267  - [39m08/10/2025, 3:02:47 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mConversation being sent to robot:[39m
[95m[Nest] 1949267  - [39m08/10/2025, 3:02:47 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
[
  {
    "author": "user",
    "content": "<@U092RRN555X> can you provide calculation observations for form 6201623..."
  }
]

[95m[Nest] 1949267  - [39m08/10/2025, 3:02:49 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mTool call completion detected[39m
[95m[Nest] 1949267  - [39m08/10/2025, 3:02:49 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormCalculationValidation",
  "finishReason": "tool_calls",
  "functionArgs": "{\"formId\":\"6201623\"}"
}

[95m[Nest] 1949267  - [39m08/10/2025, 3:02:49 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mExecuting function call[39m
[95m[Nest] 1949267  - [39m08/10/2025, 3:02:49 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormCalculationValidation",
  "functionArgs": {
    "formId": "6201623"
  }
}

[95m[Nest] 1949267  - [39m08/10/2025, 3:02:49 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mChecking onFullMessageReceived callback[39m
[95m[Nest] 1949267  - [39m08/10/2025, 3:02:49 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "hasCallback": true,
  "callbackType": "function"
}

[95m[Nest] 1949267  - [39m08/10/2025, 3:02:49 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mCalling onFullMessageReceived for tool start[39m
[95m[Nest] 1949267  - [39m08/10/2025, 3:02:49 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormCalculationValidation",
  "message": "Starting execution of fsRestrictedApiFormCalculationValidation..."
}

[95m[Nest] 1949267  - [39m08/10/2025, 3:02:49 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mExecuting tool: fsRestrictedApiFormCalculationValidation[39m
[95m[Nest] 1949267  - [39m08/10/2025, 3:02:49 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "toolArgs": {
    "formId": "6201623"
  }
}

[32m[Nest] 1949267  - [39m08/10/2025, 3:02:49 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mTool status updated: fsRestrictedApiFormCalculationValidation -> executing[39m
[95m[Nest] 1949267  - [39m08/10/2025, 3:02:49 AM [95m  DEBUG[39m [38;5;3m[MarvToolCall] [39m[95mMarv tool call log[39m
[95m[Nest] 1949267  - [39m08/10/2025, 3:02:49 AM [95m  DEBUG[39m [38;5;3m[MarvToolCall] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormCalculationValidation",
  "fnParamsJson": {
    "formId": "6201623"
  }
}

[32m[Nest] 1949267  - [39m08/10/2025, 3:02:51 AM [32m    LOG[39m [38;5;3m[SlackSignatureGuard] [39m[32mSlack signature verified successfully[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:02:51 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32m[9f594977-30df-4bb8-9855-7019c5e442d3] Incoming POST /istack-buddy/slack-integration/slack/events[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:02:51 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32mData: {
  "userAgent": "Slackbot 1.0 (+https://api.slack.com/robots)",
  "ip": "::ffff:127.0.0.1",
  "params": {},
  "query": {}
}[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:02:51 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mReceived app mention event[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:02:51 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mDuplicate event detected: Ev099R47J3K8[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:02:51 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32m[9f594977-30df-4bb8-9855-7019c5e442d3] Response POST /istack-buddy/slack-integration/slack/events 200 - 1ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:02:51 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32mData: {
  "statusCode": 200,
  "elapsed": "1ms"
}[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:02:51 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mTool fsRestrictedApiFormCalculationValidation result: "[object Object]"[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:02:51 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mTool status updated: fsRestrictedApiFormCalculationValidation -> completed[39m
[95m[Nest] 1949267  - [39m08/10/2025, 3:02:51 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mTool execution completed[39m
[95m[Nest] 1949267  - [39m08/10/2025, 3:02:51 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "toolName": "fsRestrictedApiFormCalculationValidation",
  "resultType": "object",
  "isMarvTool": true
}

ObservationMakerViewer.fromObservationResults called with: {
  hasResult: true,
  hasResponse: true,
  resultType: 'object',
  responseType: 'object'
}
extractLogItems called with: {
  responseType: 'object',
  isArray: false,
  hasLogItems: true,
  hasObservations: false,
  hasData: false,
  responseKeys: [ 'isObservationTrue', 'logItems' ]
}
Extracting from response.logItems, length: 34
Final log items count: 34
Extracted log items: {
  count: 34,
  logItems: '[\n' +
    '  {\n' +
    '    "subjectId": "183944809",\n' +
    '    "logLevel": "warn",\n' +
    '    "subjectType": "field",\n' +
    '    "observationClass": "ObservationMakerCalculationValidation",\n' +
    '    "observationMakerClass": "ObservationMakerCalculationValidation",\n' +
    '    "message": "Field Calculation Validation",\n' +
    `    "messageSecondary": "Circular reference detected. This subject's value is defined using the subject's own value. \\n            This field id: '183944809', attempted to expression from field: '183944810'",\n` +
    '    "relatedEntityIds": [],\n' +
    '    "isObservationTrue": true,\n' +
    '    "additionalDetails": {\n' +
    '      "dependencyChainFieldIds": [\n' +
    '        {\n' +
    '          "directOwnerFieldId": "183944810",\n' +
    '          "nodeId": "_root_:0:1"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "183944811",\n' +
    '          "nodeId": "_root_:0"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "183944809",\n' +
    '          "nodeId": "_root_"\n' +
    '        }\n' +
    '      ],\n' +
    `      "message": "Circular reference detected. This subject's value is defined using the subject's own value. \\n            This field id: '183944809', attempted to expression from field: '183944810'"\n` +
    '    }\n' +
    '  },\n' +
    '  {\n' +
    '    "subjectId": "183944810",\n' +
    '    "logLevel": "warn",\n' +
    '    "subjectType": "field",\n' +
    '    "observationClass": "ObservationMakerCalculationValidation",\n' +
    '    "observationMakerClass": "ObservationMakerCalculationValidation",\n' +
    '    "message": "Field Calculation Validation",\n' +
    `    "messageSecondary": "Circular reference detected. This subject's value is defined using the subject's own value. \\n            This field id: '183944810', attempted to expression from field: '183944811'",\n` +
    '    "relatedEntityIds": [],\n' +
    '    "isObservationTrue": true,\n' +
    '    "additionalDetails": {\n' +
    '      "dependencyChainFieldIds": [\n' +
    '        {\n' +
    '          "directOwnerFieldId": "183944811",\n' +
    '          "nodeId": "_root_:0:1"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "183944809",\n' +
    '          "nodeId": "_root_:0"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "183944810",\n' +
    '          "nodeId": "_root_"\n' +
    '        }\n' +
    '      ],\n' +
    `      "message": "Circular reference detected. This subject's value is defined using the subject's own value. \\n            This field id: '183944810', attempted to expression from field: '183944811'"\n` +
    '    }\n' +
    '  }\n' +
    ']'
}
[95m[Nest] 1949267  - [39m08/10/2025, 3:02:51 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mCalling onFullMessageReceived for tool completion[39m
[95m[Nest] 1949267  - [39m08/10/2025, 3:02:51 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormCalculationValidation",
  "message": "Finished running fsRestrictedApiFormCalculationValidation. Analysis complete."
}

[32m[Nest] 1949267  - [39m08/10/2025, 3:02:51 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mBuilding OpenAI message history:[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:02:51 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mObject:[39m
{
  "historyLength": 1,
  "historyRoles": [
    {
      "fromRole": "cx-customer",
      "content": "<@U092RRN555X> can you provide calculation observa..."
    }
  ],
  "currentMessage": "<@U092RRN555X> can you provide calculation observations for form 6201623"
}

[32m[Nest] 1949267  - [39m08/10/2025, 3:02:51 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mProcessing message with role: cx-customer[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:02:51 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mAdding customer message: <@U092RRN555X> can you provide calculation observa...[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:02:51 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mCurrent message already in history, skipping[39m
[95m[Nest] 1949267  - [39m08/10/2025, 3:02:51 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mConversation being sent to robot:[39m
[95m[Nest] 1949267  - [39m08/10/2025, 3:02:51 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
[
  {
    "author": "user",
    "content": "<@U092RRN555X> can you provide calculation observations for form 6201623..."
  }
]

[32m[Nest] 1949267  - [39m08/10/2025, 3:02:51 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32m[0442f74c-9d53-473e-a139-6c857cc1fb3e] Response POST /istack-buddy/slack-integration/slack/events 200 - 4244ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:02:51 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32mData: {
  "statusCode": 200,
  "elapsed": "4244ms"
}[39m
[95m[Nest] 1949267  - [39m08/10/2025, 3:02:53 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mTool call completion detected[39m
[95m[Nest] 1949267  - [39m08/10/2025, 3:02:53 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormCalculationValidation",
  "finishReason": "tool_calls",
  "functionArgs": "{\"formId\":\"6201623\"}"
}

[95m[Nest] 1949267  - [39m08/10/2025, 3:02:53 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mExecuting function call[39m
[95m[Nest] 1949267  - [39m08/10/2025, 3:02:53 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormCalculationValidation",
  "functionArgs": {
    "formId": "6201623"
  }
}

[95m[Nest] 1949267  - [39m08/10/2025, 3:02:53 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mChecking onFullMessageReceived callback[39m
[95m[Nest] 1949267  - [39m08/10/2025, 3:02:53 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "hasCallback": true,
  "callbackType": "function"
}

[95m[Nest] 1949267  - [39m08/10/2025, 3:02:53 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mCalling onFullMessageReceived for tool start[39m
[95m[Nest] 1949267  - [39m08/10/2025, 3:02:53 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormCalculationValidation",
  "message": "Starting execution of fsRestrictedApiFormCalculationValidation..."
}

[95m[Nest] 1949267  - [39m08/10/2025, 3:02:53 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95monFullMessageReceived called in multi-part response[39m
[95m[Nest] 1949267  - [39m08/10/2025, 3:02:53 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "contentLength": 65,
  "contentType": "text/plain"
}

[95m[Nest] 1949267  - [39m08/10/2025, 3:02:53 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mSending intermediate message via delayedMessageCallback[39m
[95m[Nest] 1949267  - [39m08/10/2025, 3:02:53 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "content": "Starting execution of fsRestrictedApiFormCalculationValidation......",
  "contentType": "text/plain"
}

{
  allConversationMessages: [
    {
      id: 'b98ed9e8-611f-4ef4-90f2-c453ba0d25cc',
      content: [Object],
      conversationId: '58b6096d-c33b-47b5-99bd-4b8fa8b256f0',
      fromUserId: 'cx-slack-robot',
      fromRole: 'cx-customer',
      toRole: 'cx-agent',
      messageType: 'text',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T08:02:47.552Z,
      updatedAt: 2025-08-10T08:02:47.552Z
    },
    {
      id: '524a9019-85ed-4b3c-be7d-e86dcd2824f5',
      content: [Object],
      conversationId: '58b6096d-c33b-47b5-99bd-4b8fa8b256f0',
      fromUserId: 'cx-slack-robot',
      fromRole: 'robot',
      toRole: 'cx-customer',
      messageType: 'robot',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T08:02:53.311Z,
      updatedAt: 2025-08-10T08:02:53.311Z
    }
  ]
}
[95m[Nest] 1949267  - [39m08/10/2025, 3:02:53 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mBroadcasting dashboard event: conversation_updated[39m
[95m[Nest] 1949267  - [39m08/10/2025, 3:02:53 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mExecuting tool: fsRestrictedApiFormCalculationValidation[39m
[95m[Nest] 1949267  - [39m08/10/2025, 3:02:53 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "toolArgs": {
    "formId": "6201623"
  }
}

[32m[Nest] 1949267  - [39m08/10/2025, 3:02:53 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mTool status updated: fsRestrictedApiFormCalculationValidation -> executing[39m
Gateway: Broadcasting new_message to conversation 58b6096d-c33b-47b5-99bd-4b8fa8b256f0: {
  message: {
    id: '524a9019-85ed-4b3c-be7d-e86dcd2824f5',
    content: {
      type: 'text/plain',
      payload: 'Starting execution of fsRestrictedApiFormCalculationValidation...'
    },
    conversationId: '58b6096d-c33b-47b5-99bd-4b8fa8b256f0',
    fromUserId: 'cx-slack-robot',
    fromRole: 'robot',
    toRole: 'cx-customer',
    messageType: 'robot',
    threadId: undefined,
    originalMessageId: undefined,
    createdAt: 2025-08-10T08:02:53.311Z,
    updatedAt: 2025-08-10T08:02:53.311Z
  },
  timestamp: '2025-08-10T08:02:53.311Z'
}
Gateway: Broadcast completed
[95m[Nest] 1949267  - [39m08/10/2025, 3:02:53 AM [95m  DEBUG[39m [38;5;3m[MarvToolCall] [39m[95mMarv tool call log[39m
[95m[Nest] 1949267  - [39m08/10/2025, 3:02:53 AM [95m  DEBUG[39m [38;5;3m[MarvToolCall] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormCalculationValidation",
  "fnParamsJson": {
    "formId": "6201623"
  }
}

[32m[Nest] 1949267  - [39m08/10/2025, 3:02:53 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mMessage sent to Slack channel C091Y5UNA1M[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:02:54 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mTool fsRestrictedApiFormCalculationValidation result: "[object Object]"[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:02:54 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mTool status updated: fsRestrictedApiFormCalculationValidation -> completed[39m
[95m[Nest] 1949267  - [39m08/10/2025, 3:02:54 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mTool execution completed[39m
[95m[Nest] 1949267  - [39m08/10/2025, 3:02:54 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "toolName": "fsRestrictedApiFormCalculationValidation",
  "resultType": "object",
  "isMarvTool": true
}

ObservationMakerViewer.fromObservationResults called with: {
  hasResult: true,
  hasResponse: true,
  resultType: 'object',
  responseType: 'object'
}
extractLogItems called with: {
  responseType: 'object',
  isArray: false,
  hasLogItems: true,
  hasObservations: false,
  hasData: false,
  responseKeys: [ 'isObservationTrue', 'logItems' ]
}
Extracting from response.logItems, length: 34
Final log items count: 34
Extracted log items: {
  count: 34,
  logItems: '[\n' +
    '  {\n' +
    '    "subjectId": "183944809",\n' +
    '    "logLevel": "warn",\n' +
    '    "subjectType": "field",\n' +
    '    "observationClass": "ObservationMakerCalculationValidation",\n' +
    '    "observationMakerClass": "ObservationMakerCalculationValidation",\n' +
    '    "message": "Field Calculation Validation",\n' +
    `    "messageSecondary": "Circular reference detected. This subject's value is defined using the subject's own value. \\n            This field id: '183944809', attempted to expression from field: '183944810'",\n` +
    '    "relatedEntityIds": [],\n' +
    '    "isObservationTrue": true,\n' +
    '    "additionalDetails": {\n' +
    '      "dependencyChainFieldIds": [\n' +
    '        {\n' +
    '          "directOwnerFieldId": "183944810",\n' +
    '          "nodeId": "_root_:0:1"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "183944811",\n' +
    '          "nodeId": "_root_:0"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "183944809",\n' +
    '          "nodeId": "_root_"\n' +
    '        }\n' +
    '      ],\n' +
    `      "message": "Circular reference detected. This subject's value is defined using the subject's own value. \\n            This field id: '183944809', attempted to expression from field: '183944810'"\n` +
    '    }\n' +
    '  },\n' +
    '  {\n' +
    '    "subjectId": "183944810",\n' +
    '    "logLevel": "warn",\n' +
    '    "subjectType": "field",\n' +
    '    "observationClass": "ObservationMakerCalculationValidation",\n' +
    '    "observationMakerClass": "ObservationMakerCalculationValidation",\n' +
    '    "message": "Field Calculation Validation",\n' +
    `    "messageSecondary": "Circular reference detected. This subject's value is defined using the subject's own value. \\n            This field id: '183944810', attempted to expression from field: '183944811'",\n` +
    '    "relatedEntityIds": [],\n' +
    '    "isObservationTrue": true,\n' +
    '    "additionalDetails": {\n' +
    '      "dependencyChainFieldIds": [\n' +
    '        {\n' +
    '          "directOwnerFieldId": "183944811",\n' +
    '          "nodeId": "_root_:0:1"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "183944809",\n' +
    '          "nodeId": "_root_:0"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "183944810",\n' +
    '          "nodeId": "_root_"\n' +
    '        }\n' +
    '      ],\n' +
    `      "message": "Circular reference detected. This subject's value is defined using the subject's own value. \\n            This field id: '183944810', attempted to expression from field: '183944811'"\n` +
    '    }\n' +
    '  }\n' +
    ']'
}
[95m[Nest] 1949267  - [39m08/10/2025, 3:02:54 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mCalling onFullMessageReceived for tool completion[39m
[95m[Nest] 1949267  - [39m08/10/2025, 3:02:54 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormCalculationValidation",
  "message": "Finished running fsRestrictedApiFormCalculationValidation. Analysis complete."
}

[95m[Nest] 1949267  - [39m08/10/2025, 3:02:54 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95monFullMessageReceived called in multi-part response[39m
[95m[Nest] 1949267  - [39m08/10/2025, 3:02:54 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "contentLength": 77,
  "contentType": "text/plain"
}

[95m[Nest] 1949267  - [39m08/10/2025, 3:02:54 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mSending intermediate message via delayedMessageCallback[39m
[95m[Nest] 1949267  - [39m08/10/2025, 3:02:54 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "content": "Finished running fsRestrictedApiFormCalculationValidation. Analysis complete....",
  "contentType": "text/plain"
}

{
  allConversationMessages: [
    {
      id: 'b98ed9e8-611f-4ef4-90f2-c453ba0d25cc',
      content: [Object],
      conversationId: '58b6096d-c33b-47b5-99bd-4b8fa8b256f0',
      fromUserId: 'cx-slack-robot',
      fromRole: 'cx-customer',
      toRole: 'cx-agent',
      messageType: 'text',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T08:02:47.552Z,
      updatedAt: 2025-08-10T08:02:47.552Z
    },
    {
      id: '524a9019-85ed-4b3c-be7d-e86dcd2824f5',
      content: [Object],
      conversationId: '58b6096d-c33b-47b5-99bd-4b8fa8b256f0',
      fromUserId: 'cx-slack-robot',
      fromRole: 'robot',
      toRole: 'cx-customer',
      messageType: 'robot',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T08:02:53.311Z,
      updatedAt: 2025-08-10T08:02:53.311Z
    },
    {
      id: '2dedcfa7-8d56-4559-9ea7-b908b75f2fbf',
      content: [Object],
      conversationId: '58b6096d-c33b-47b5-99bd-4b8fa8b256f0',
      fromUserId: 'cx-slack-robot',
      fromRole: 'robot',
      toRole: 'cx-customer',
      messageType: 'robot',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T08:02:54.250Z,
      updatedAt: 2025-08-10T08:02:54.250Z
    }
  ]
}
[95m[Nest] 1949267  - [39m08/10/2025, 3:02:54 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mBroadcasting dashboard event: conversation_updated[39m
Gateway: Broadcasting new_message to conversation 58b6096d-c33b-47b5-99bd-4b8fa8b256f0: {
  message: {
    id: '2dedcfa7-8d56-4559-9ea7-b908b75f2fbf',
    content: {
      type: 'text/plain',
      payload: 'Finished running fsRestrictedApiFormCalculationValidation. Analysis complete.'
    },
    conversationId: '58b6096d-c33b-47b5-99bd-4b8fa8b256f0',
    fromUserId: 'cx-slack-robot',
    fromRole: 'robot',
    toRole: 'cx-customer',
    messageType: 'robot',
    threadId: undefined,
    originalMessageId: undefined,
    createdAt: 2025-08-10T08:02:54.250Z,
    updatedAt: 2025-08-10T08:02:54.250Z
  },
  timestamp: '2025-08-10T08:02:54.250Z'
}
Gateway: Broadcast completed
[95m[Nest] 1949267  - [39m08/10/2025, 3:02:54 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95monStreamFinished called[39m
[95m[Nest] 1949267  - [39m08/10/2025, 3:02:54 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "contentLength": 6635,
  "authorRole": "assistant",
  "contentPreview": "I'll get the calculation observations for form 6201623. Please hold on.\n🔍 *Calculation Validation R..."
}

[95m[Nest] 1949267  - [39m08/10/2025, 3:02:54 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mCalling delayedMessageCallback with finished message[39m
{
  allConversationMessages: [
    {
      id: 'b98ed9e8-611f-4ef4-90f2-c453ba0d25cc',
      content: [Object],
      conversationId: '58b6096d-c33b-47b5-99bd-4b8fa8b256f0',
      fromUserId: 'cx-slack-robot',
      fromRole: 'cx-customer',
      toRole: 'cx-agent',
      messageType: 'text',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T08:02:47.552Z,
      updatedAt: 2025-08-10T08:02:47.552Z
    },
    {
      id: '524a9019-85ed-4b3c-be7d-e86dcd2824f5',
      content: [Object],
      conversationId: '58b6096d-c33b-47b5-99bd-4b8fa8b256f0',
      fromUserId: 'cx-slack-robot',
      fromRole: 'robot',
      toRole: 'cx-customer',
      messageType: 'robot',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T08:02:53.311Z,
      updatedAt: 2025-08-10T08:02:53.311Z
    },
    {
      id: '2dedcfa7-8d56-4559-9ea7-b908b75f2fbf',
      content: [Object],
      conversationId: '58b6096d-c33b-47b5-99bd-4b8fa8b256f0',
      fromUserId: 'cx-slack-robot',
      fromRole: 'robot',
      toRole: 'cx-customer',
      messageType: 'robot',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T08:02:54.250Z,
      updatedAt: 2025-08-10T08:02:54.250Z
    },
    {
      id: 'b01c0345-d821-445f-91c2-20f59f3c4238',
      content: [Object],
      conversationId: '58b6096d-c33b-47b5-99bd-4b8fa8b256f0',
      fromUserId: 'cx-slack-robot',
      fromRole: 'robot',
      toRole: 'cx-customer',
      messageType: 'robot',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T08:02:54.252Z,
      updatedAt: 2025-08-10T08:02:54.252Z
    }
  ]
}
[95m[Nest] 1949267  - [39m08/10/2025, 3:02:54 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mBroadcasting dashboard event: conversation_updated[39m
Gateway: Broadcasting new_message to conversation 58b6096d-c33b-47b5-99bd-4b8fa8b256f0: {
  message: {
    id: 'b01c0345-d821-445f-91c2-20f59f3c4238',
    content: {
      type: 'text/plain',
      payload: "I'll get the calculation observations for form 6201623. Please hold on.\n" +
        '🔍 *Calculation Validation Results*\n' +
        '\n' +
        '📊 *Summary:* 34 total log items\n' +
        '• ❌ 0 errors\n' +
        '• ⚠️ 30 warnings\n' +
        '• ℹ️ 4 info\n' +
        '• 🔍 0 debug\n' +
        '\n' +
        '⚠️ *Found 30 issue(s):*\n' +
        '\n' +
        '⚠️ *WARNING* (1/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '183944809', attempted to e...\n" +
        '• *Subject ID:* `183944809`\n' +
        '\n' +
        '⚠️ *WARNING* (2/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '183944810', attempted to e...\n" +
        '• *Subject ID:* `183944810`\n' +
        '\n' +
        '⚠️ *WARNING* (3/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '183944811', attempted to e...\n" +
        '• *Subject ID:* `183944811`\n' +
        '\n' +
        '⚠️ *WARNING* (4/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '183944851', attempted to e...\n" +
        '• *Subject ID:* `183944824`\n' +
        '\n' +
        '⚠️ *WARNING* (5/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '183944850', attempted to e...\n" +
        '• *Subject ID:* `183944850`\n' +
        '\n' +
        '⚠️ *WARNING* (6/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '183944851', attempted to e...\n" +
        '• *Subject ID:* `183944851`\n' +
        '\n' +
        '⚠️ *WARNING* (7/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '183944855', attempted to e...\n" +
        '• *Subject ID:* `183944855`\n' +
        '\n' +
        '⚠️ *WARNING* (8/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '183944855', attempted to e...\n" +
        '• *Subject ID:* `183944855`\n' +
        '\n' +
        '⚠️ *WARNING* (9/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '183944855', attempted to e...\n" +
        '• *Subject ID:* `183944856`\n' +
        '\n' +
        '⚠️ *WARNING* (10/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '183944856', attempted to e...\n" +
        '• *Subject ID:* `183944856`\n' +
        '\n' +
        '⚠️ *WARNING* (11/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '183944857', attempted to e...\n" +
        '• *Subject ID:* `183944857`\n' +
        '\n' +
        '⚠️ *WARNING* (12/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '183944855', attempted to e...\n" +
        '• *Subject ID:* `183944857`\n' +
        '\n' +
        '⚠️ *WARNING* (13/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128831', attempted to e...\n" +
        '• *Subject ID:* `184128788`\n' +
        '\n' +
        '⚠️ *WARNING* (14/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128791', attempted to e...\n" +
        '• *Subject ID:* `184128791`\n' +
        '\n' +
        '⚠️ *WARNING* (15/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128831', attempted to e...\n" +
        '• *Subject ID:* `184128794`\n' +
        '\n' +
        '⚠️ *WARNING* (16/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128831', attempted to e...\n" +
        '• *Subject ID:* `184128797`\n' +
        '\n' +
        '⚠️ *WARNING* (17/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128823', attempted to e...\n" +
        '• *Subject ID:* `184128819`\n' +
        '\n' +
        '⚠️ *WARNING* (18/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128824', attempted to e...\n" +
        '• *Subject ID:* `184128820`\n' +
        '\n' +
        '⚠️ *WARNING* (19/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128822', attempted to e...\n" +
        '• *Subject ID:* `184128821`\n' +
        '\n' +
        '⚠️ *WARNING* (20/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128822', attempted to e...\n" +
        '• *Subject ID:* `184128822`\n' +
        '\n' +
        '⚠️ *WARNING* (21/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128823', attempted to e...\n" +
        '• *Subject ID:* `184128823`\n' +
        '\n' +
        '⚠️ *WARNING* (22/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128824', attempted to e...\n" +
        '• *Subject ID:* `184128824`\n' +
        '\n' +
        '⚠️ *WARNING* (23/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128823', attempted to e...\n" +
        '• *Subject ID:* `184128825`\n' +
        '\n' +
        '⚠️ *WARNING* (24/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128824', attempted to e...\n" +
        '• *Subject ID:* `184128826`\n' +
        '\n' +
        '⚠️ *WARNING* (25/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128822', attempted to e...\n" +
        '• *Subject ID:* `184128827`\n' +
        '\n' +
        '⚠️ *WARNING* (26/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128823', attempted to e...\n" +
        '• *Subject ID:* `184128828`\n' +
        '\n' +
        '⚠️ *WARNING* (27/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128824', attempted to e...\n" +
        '• *Subject ID:* `184128829`\n' +
        '\n' +
        '⚠️ *WARNING* (28/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128822', attempted to e...\n" +
        '• *Subject ID:* `184128830`\n' +
        '\n' +
        '⚠️ *WARNING* (29/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128831', attempted to e...\n" +
        '• *Subject ID:* `184128831`\n' +
        '\n' +
        '⚠️ *WARNING* (30/30)\n' +
        `• *Message:* Shallow Tree Error of type: 'malformed-expression;, JSON: {"directOwnerFieldId":"185526622","isError":true,"errorType":"malformed-expression","calc...\n` +
        '• *Subject ID:* `185526622`\n' +
        '\n' +
        '\n'
    },
    conversationId: '58b6096d-c33b-47b5-99bd-4b8fa8b256f0',
    fromUserId: 'cx-slack-robot',
    fromRole: 'robot',
    toRole: 'cx-customer',
    messageType: 'robot',
    threadId: undefined,
    originalMessageId: undefined,
    createdAt: 2025-08-10T08:02:54.252Z,
    updatedAt: 2025-08-10T08:02:54.252Z
  },
  timestamp: '2025-08-10T08:02:54.252Z'
}
Gateway: Broadcast completed
[32m[Nest] 1949267  - [39m08/10/2025, 3:02:54 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mMessage sent to Slack channel C091Y5UNA1M[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:02:54 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mMessage sent to Slack channel C091Y5UNA1M[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:03:06 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:03:21 AM [32m    LOG[39m [38;5;3m[SlackSignatureGuard] [39m[32mSlack signature verified successfully[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:03:21 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32m[760beaf3-7323-4272-a602-468015577a0f] Incoming POST /istack-buddy/slack-integration/slack/events[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:03:21 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32mData: {
  "userAgent": "Slackbot 1.0 (+https://api.slack.com/robots)",
  "ip": "::ffff:127.0.0.1",
  "params": {},
  "query": {}
}[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:03:21 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mReceived app mention event[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:03:21 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mDEBUG: Event text: "<@U092RRN555X> /marv-session", trimmed: "<@U092RRN555X> /marv-session"[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:03:21 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mReceived /marv-session command via app mention[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:03:21 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mDEBUG: Slack conversationId: 1754812965.532919[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:03:21 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mDEBUG: Conversation record: {"internalConversationId":"58b6096d-c33b-47b5-99bd-4b8fa8b256f0","slackConversationId":"1754812965.532919"}[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:03:21 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mDEBUG: Internal conversation ID: 58b6096d-c33b-47b5-99bd-4b8fa8b256f0[39m
[95m[Nest] 1949267  - [39m08/10/2025, 3:03:21 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.addUser] [39m[95mUser added successfully[39m
[95m[Nest] 1949267  - [39m08/10/2025, 3:03:21 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.addUser] [39m[95mData: {
  "userId": "58b6096d-c33b-47b5-99bd-4b8fa8b256f0",
  "ownPermissionsCount": 2,
  "groupMembershipsCount": 0
}[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:03:21 AM [32m    LOG[39m [38;5;3m[UserProfileService.addTemporaryUser] [39m[32mTemporary user profile added[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:03:21 AM [32m    LOG[39m [38;5;3m[UserProfileService.addTemporaryUser] [39m[32mData: {
  "userId": "58b6096d-c33b-47b5-99bd-4b8fa8b256f0"
}[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:03:22 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mMessage sent to Slack channel C091Y5UNA1M[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:03:22 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32m[760beaf3-7323-4272-a602-468015577a0f] Response POST /istack-buddy/slack-integration/slack/events 200 - 501ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:03:22 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32mData: {
  "statusCode": 200,
  "elapsed": "501ms"
}[39m
[95m[Nest] 1949267  - [39m08/10/2025, 3:03:29 AM [95m  DEBUG[39m [95mJWT token from query parameter validated, allowing controller to handle redirect[39m
[95m[Nest] 1949267  - [39m08/10/2025, 3:03:29 AM [95m  DEBUG[39m [95mObject:[39m
{
  "userId": "58b6096d-c33b-47b5-99bd-4b8fa8b256f0",
  "endpoint": "/public/form-marv/58b6096d-c33b-47b5-99bd-4b8fa8b256f0/5375703?jwtToken=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI1OGI2MDk2ZC1jMzNiLTQ3YjUtOTliZC00YjhmYThiMjU2ZjAiLCJlbWFpbCI6ImZvcm0tbWFydi0xNzU0ODEzMDAxOTIzQGV4YW1wbGUuY29tIiwidXNlcm5hbWUiOiI1OGI2MDk2ZC1jMzNiLTQ3YjUtOTliZC00YjhmYThiMjU2ZjAiLCJhY2NvdW50VHlwZSI6IlRFTVBPUkFSWSIsImlhdCI6MTc1NDgxMzAwMSwiZXhwIjoxNzU0ODQxODAxfQ.VKd04qcpZXBDzlKHb_qzM0eFCmrdW5uzzmqCGOqMtgo",
  "method": "GET",
  "correlationId": "unknown"
}

[32m[Nest] 1949267  - [39m08/10/2025, 3:03:29 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32m[cde49bfd-ca66-4ddf-a0e0-29d2055e72f8] Incoming GET /public/form-marv/58b6096d-c33b-47b5-99bd-4b8fa8b256f0/5375703?jwtToken=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI1OGI2MDk2ZC1jMzNiLTQ3YjUtOTliZC00YjhmYThiMjU2ZjAiLCJlbWFpbCI6ImZvcm0tbWFydi0xNzU0ODEzMDAxOTIzQGV4YW1wbGUuY29tIiwidXNlcm5hbWUiOiI1OGI2MDk2ZC1jMzNiLTQ3YjUtOTliZC00YjhmYThiMjU2ZjAiLCJhY2NvdW50VHlwZSI6IlRFTVBPUkFSWSIsImlhdCI6MTc1NDgxMzAwMSwiZXhwIjoxNzU0ODQxODAxfQ.VKd04qcpZXBDzlKHb_qzM0eFCmrdW5uzzmqCGOqMtgo[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:03:29 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32mData: {
  "userAgent": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36",
  "ip": "::1",
  "params": {
    "conversationId": "58b6096d-c33b-47b5-99bd-4b8fa8b256f0",
    "formId": "5375703"
  },
  "query": {
    "jwtToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI1OGI2MDk2ZC1jMzNiLTQ3YjUtOTliZC00YjhmYThiMjU2ZjAiLCJlbWFpbCI6ImZvcm0tbWFydi0xNzU0ODEzMDAxOTIzQGV4YW1wbGUuY29tIiwidXNlcm5hbWUiOiI1OGI2MDk2ZC1jMzNiLTQ3YjUtOTliZC00YjhmYThiMjU2ZjAiLCJhY2NvdW50VHlwZSI6IlRFTVBPUkFSWSIsImlhdCI6MTc1NDgxMzAwMSwiZXhwIjoxNzU0ODQxODAxfQ.VKd04qcpZXBDzlKHb_qzM0eFCmrdW5uzzmqCGOqMtgo"
  }
}[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:03:29 AM [32m    LOG[39m [38;5;3m[AuthenticationService.authenticateUser] [39m[32mJWT authentication attempt started[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:03:29 AM [32m    LOG[39m [38;5;3m[AuthenticationService.authenticateUser] [39m[32mData: {
  "userId": "58b6096d-c33b-47b5-99bd-4b8fa8b256f0",
  "hasToken": true
}[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:03:29 AM [32m    LOG[39m [38;5;3m[AuthenticationService.authenticateUser] [39m[32mJWT authentication successful[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:03:29 AM [32m    LOG[39m [38;5;3m[AuthenticationService.authenticateUser] [39m[32mData: {
  "userId": "58b6096d-c33b-47b5-99bd-4b8fa8b256f0",
  "email": "form-marv-1754813001923@example.com"
}[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:03:29 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32m[cde49bfd-ca66-4ddf-a0e0-29d2055e72f8] Response GET /public/form-marv/58b6096d-c33b-47b5-99bd-4b8fa8b256f0/5375703?jwtToken=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI1OGI2MDk2ZC1jMzNiLTQ3YjUtOTliZC00YjhmYThiMjU2ZjAiLCJlbWFpbCI6ImZvcm0tbWFydi0xNzU0ODEzMDAxOTIzQGV4YW1wbGUuY29tIiwidXNlcm5hbWUiOiI1OGI2MDk2ZC1jMzNiLTQ3YjUtOTliZC00YjhmYThiMjU2ZjAiLCJhY2NvdW50VHlwZSI6IlRFTVBPUkFSWSIsImlhdCI6MTc1NDgxMzAwMSwiZXhwIjoxNzU0ODQxODAxfQ.VKd04qcpZXBDzlKHb_qzM0eFCmrdW5uzzmqCGOqMtgo 302 - 2ms[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:03:29 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32mData: {
  "statusCode": 302,
  "elapsed": "2ms"
}[39m
[33m[Nest] 1949267  - [39m08/10/2025, 3:03:29 AM [33m   WARN[39m [33mNo authentication token provided[39m
[33m[Nest] 1949267  - [39m08/10/2025, 3:03:29 AM [33m   WARN[39m [33mObject:[39m
{
  "endpoint": "/public/form-marv/58b6096d-c33b-47b5-99bd-4b8fa8b256f0/5375703",
  "method": "GET",
  "correlationId": "unknown"
}

[31m[Nest] 1949267  - [39m08/10/2025, 3:03:29 AM [31m  ERROR[39m [38;5;3m[GlobalExceptionFilter] [39m[31mHTTP Exception 401: No authentication token provided[39m
UnauthorizedException: No authentication token provided
    at AuthPermissionGuard.canActivate (/mypart/tmc/projects/istack-buddy-server-take1/src/common/guards/auth-permission.guard.ts:97:13)
    at GuardsConsumer.tryActivate (/mypart/tmc/projects/istack-buddy-server-take1/node_modules/@nestjs/core/guards/guards-consumer.js:15:34)
    at canActivateFn (/mypart/tmc/projects/istack-buddy-server-take1/node_modules/@nestjs/core/router/router-execution-context.js:135:59)
    at /mypart/tmc/projects/istack-buddy-server-take1/node_modules/@nestjs/core/router/router-execution-context.js:42:37
    at /mypart/tmc/projects/istack-buddy-server-take1/node_modules/@nestjs/core/router/router-proxy.js:9:23
    at Layer.handle [as handle_request] (/mypart/tmc/projects/istack-buddy-server-take1/node_modules/express/lib/router/layer.js:95:5)
    at next (/mypart/tmc/projects/istack-buddy-server-take1/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/mypart/tmc/projects/istack-buddy-server-take1/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/mypart/tmc/projects/istack-buddy-server-take1/node_modules/express/lib/router/layer.js:95:5)
    at /mypart/tmc/projects/istack-buddy-server-take1/node_modules/express/lib/router/index.js:284:15
[31m[Nest] 1949267  - [39m08/10/2025, 3:03:29 AM [31m  ERROR[39m [38;5;3m[GlobalExceptionFilter] [39m[31mData: {
  "statusCode": 401,
  "requestBody": {},
  "requestQuery": {},
  "requestParams": {
    "conversationId": "58b6096d-c33b-47b5-99bd-4b8fa8b256f0",
    "formId": "5375703"
  }
}[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:03:29 AM [32m    LOG[39m [38;5;3m[GlobalExceptionFilter] [39m[32mAUDIT: ACCESS_DENIED - failure[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:03:29 AM [32m    LOG[39m [38;5;3m[GlobalExceptionFilter] [39m[32mData: {
  "auditEvent": "ACCESS_DENIED",
  "result": "failure",
  "details": {
    "statusCode": 401,
    "reason": "No authentication token provided",
    "attemptedResource": "/public/form-marv/58b6096d-c33b-47b5-99bd-4b8fa8b256f0/5375703"
  }
}[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:03:34 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: s5_ESFf4mRKnA5PJAAAJ[39m
[95m[Nest] 1949267  - [39m08/10/2025, 3:03:34 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mJoin room data received[39m
[95m[Nest] 1949267  - [39m08/10/2025, 3:03:34 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "data": {
    "conversationId": "58b6096d-c33b-47b5-99bd-4b8fa8b256f0",
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[95m[Nest] 1949267  - [39m08/10/2025, 3:03:34 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mApplied default joinData[39m
[95m[Nest] 1949267  - [39m08/10/2025, 3:03:34 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "joinData": {
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[ChatManagerService] Attempting to join conversation: 58b6096d-c33b-47b5-99bd-4b8fa8b256f0
[ChatManagerService] Available conversations: [
  '8aba496f-95ff-4b12-abc0-c7a319f1e501',
  '169f1e7b-6e33-49d2-91a4-ef3059840c91',
  '58b6096d-c33b-47b5-99bd-4b8fa8b256f0'
]
[95m[Nest] 1949267  - [39m08/10/2025, 3:03:34 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mBroadcasting dashboard event: conversation_participant_added[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:03:41 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient disconnected: s5_ESFf4mRKnA5PJAAAJ[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:04:07 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:05:07 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:06:07 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:07:07 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:08:07 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1949267  - [39m08/10/2025, 3:09:07 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[2J[3J[H[[90m3:09:29 AM[0m] File change detected. Starting incremental compilation...

[96msrc/istack-buddy-slack-api/istack-buddy-slack-api.service.ts[0m:[93m231[0m:[93m37[0m - [91merror[0m[90m TS2339: [0mProperty 'extractFormIdFromConversation' does not exist on type 'IstackBuddySlackApiService'.

[7m231[0m           const formId = await this.extractFormIdFromConversation(conversationRecord.internalConversationId);
[7m   [0m [91m                                    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m

[[90m3:09:29 AM[0m] Found 1 error. Watching for file changes.

[2J[3J[H[[90m3:09:54 AM[0m] File change detected. Starting incremental compilation...

[96msrc/istack-buddy-slack-api/istack-buddy-slack-api.service.ts[0m:[93m697[0m:[93m37[0m - [91merror[0m[90m TS2339: [0mProperty 'match' does not exist on type 'string | Buffer<ArrayBufferLike> | TConversationMessageContent'.
  Property 'match' does not exist on type 'TConversationMessageContentString'.

[7m697[0m         const formIdMatch = content.match(/form\s+(?:id\s+)?(\d{6,7})/i);
[7m   [0m [91m                                    ~~~~~[0m

[96msrc/istack-buddy-slack-api/istack-buddy-slack-api.service.ts[0m:[93m704[0m:[93m37[0m - [91merror[0m[90m TS2339: [0mProperty 'match' does not exist on type 'string | Buffer<ArrayBufferLike> | TConversationMessageContent'.
  Property 'match' does not exist on type 'TConversationMessageContentString'.

[7m704[0m         const numberMatch = content.match(/(\d{6,7})/);
[7m   [0m [91m                                    ~~~~~[0m

[[90m3:09:54 AM[0m] Found 2 errors. Watching for file changes.

[2J[3J[H[[90m3:10:02 AM[0m] File change detected. Starting incremental compilation...

[96msrc/istack-buddy-slack-api/istack-buddy-slack-api.service.ts[0m:[93m697[0m:[93m37[0m - [91merror[0m[90m TS2339: [0mProperty 'match' does not exist on type 'string | Buffer<ArrayBufferLike> | TConversationMessageContent'.
  Property 'match' does not exist on type 'TConversationMessageContentString'.

[7m697[0m         const formIdMatch = content.match(/form\s+(?:id\s+)?(\d{6,7})/i);
[7m   [0m [91m                                    ~~~~~[0m

[96msrc/istack-buddy-slack-api/istack-buddy-slack-api.service.ts[0m:[93m704[0m:[93m37[0m - [91merror[0m[90m TS2339: [0mProperty 'match' does not exist on type 'string | Buffer<ArrayBufferLike> | TConversationMessageContent'.
  Property 'match' does not exist on type 'TConversationMessageContentString'.

[7m704[0m         const numberMatch = content.match(/(\d{6,7})/);
[7m   [0m [91m                                    ~~~~~[0m

[[90m3:10:02 AM[0m] Found 2 errors. Watching for file changes.

[32m[Nest] 1949267  - [39m08/10/2025, 3:10:07 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[2J[3J[H[[90m3:10:09 AM[0m] File change detected. Starting incremental compilation...

[96msrc/istack-buddy-slack-api/istack-buddy-slack-api.service.ts[0m:[93m697[0m:[93m37[0m - [91merror[0m[90m TS2339: [0mProperty 'match' does not exist on type 'string | Buffer<ArrayBufferLike> | TConversationMessageContent'.
  Property 'match' does not exist on type 'TConversationMessageContentString'.

[7m697[0m         const formIdMatch = content.match(/form\s+(?:id\s+)?(\d{6,7})/i);
[7m   [0m [91m                                    ~~~~~[0m

[96msrc/istack-buddy-slack-api/istack-buddy-slack-api.service.ts[0m:[93m704[0m:[93m37[0m - [91merror[0m[90m TS2339: [0mProperty 'match' does not exist on type 'string | Buffer<ArrayBufferLike> | TConversationMessageContent'.
  Property 'match' does not exist on type 'TConversationMessageContentString'.

[7m704[0m         const numberMatch = content.match(/(\d{6,7})/);
[7m   [0m [91m                                    ~~~~~[0m

[[90m3:10:09 AM[0m] Found 2 errors. Watching for file changes.

[2J[3J[H[[90m3:10:27 AM[0m] File change detected. Starting incremental compilation...

[[90m3:10:27 AM[0m] Found 0 errors. Watching for file changes.

[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[NestFactory] [39m[32mStarting Nest application...[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mRobotModule dependencies initialized[39m[38;5;3m +10ms[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConversationListServiceModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mLoggerModule dependencies initialized[39m[38;5;3m +0ms[39m
[95m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.constructor] [39m[95mFile-based permissions loaded successfully[39m
[95m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.constructor] [39m[95mData: {
  "userPermissionsCount": 0,
  "groupPermissionsCount": 0,
  "userGroupMembershipsCount": 0
}[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAuthorizationPermissionsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAppModule dependencies initialized[39m[38;5;3m +0ms[39m
[95m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [95m  DEBUG[39m [38;5;3m[AuthenticationService.constructor] [39m[95mAuthentication service initialized with configuration[39m
[95m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [95m  DEBUG[39m [38;5;3m[AuthenticationService.constructor] [39m[95mData: {
  "sessionTimeoutSeconds": 28800
}[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAuthenticationModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mGuardsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mIstackBuddySlackApiModule dependencies initialized[39m[38;5;3m +2ms[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mDevDebugModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mPublicInterfaceModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mChatManagerModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mUserProfileModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "join_room" message[39m[38;5;3m +13ms[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "leave_room" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "send_message" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "typing_start" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "typing_stop" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "get_messages" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "share_robot_message" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "join_dashboard" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "leave_dashboard" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAppController {/}:[39m[38;5;3m +1ms[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAuthenticationController {/auth}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/user, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/profile/me, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mUserProfileController {/user-profiles}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/user-profiles/me, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mDevDebugController {/dev-debug}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/auth, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/user-details/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/users, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/auth-status/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mChatManagerController {/chat}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/messages, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/messages, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/messages/last/:count, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/join, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/participants, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/dashboard/stats, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/start, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/leave, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mIstackBuddySlackApiController {/}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/istack-buddy/slack-integration/health, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/istack-buddy/slack-integration/debug, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/istack-buddy/slack-integration/slack/events, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mPublicInterfaceController {/public}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/debug-create, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId/:formId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId/:formId/chat-messages, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId/:formId/chat-messages, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[SlackyAnthropicAgent] [39m[32mSlackyAnthropicAgent constructor called - class loaded[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mSlackyOpenAiAgent constructor called - class loaded[39m
[95m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: ChatRobotParrot v1.0.0[39m
[95m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: AgentRobotParrot v1.0.0[39m
[95m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: RobotChatOpenAI v1.0.0-test-dev[39m
[95m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: RobotChatAnthropic v1.0.0[39m
[95m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackyAnthropicAgent v1.0.0[39m
[95m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: MarvOpenAiAgent v1.0.0[39m
[95m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackyOpenAiAgent v1.0.0[39m
[95m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: AnthropicMarv v1.0.0[39m
[95m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackAgentCoreFormsParrot v1.0.0[39m
[95m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackAgentCoreFormsSsoAutofillParrot v1.0.0[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[RobotService] [39m[32mInitialized 10 robots[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[NestApplication] [39m[32mNest application successfully started[39m[38;5;3m +1ms[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[Bootstrap] [39m[32miStack Buddy Server running on: http://localhost:3500[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [32m    LOG[39m [38;5;3m[Bootstrap] [39m[32mAPI Documentation available at: http://localhost:3500/api[39m
[33m[Nest] 1954910  - [39m08/10/2025, 3:10:27 AM [33m   WARN[39m [38;5;3m[Bootstrap] [39m[33mCORS enabled for ALL origins (temporary)[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:28 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: GvRk-DNYi7xjMeYBAAAB[39m
[95m[Nest] 1954910  - [39m08/10/2025, 3:10:28 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mJoin room data received[39m
[95m[Nest] 1954910  - [39m08/10/2025, 3:10:28 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "data": {
    "conversationId": "cae98459-9ded-42e1-bef7-31628f344b65",
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[95m[Nest] 1954910  - [39m08/10/2025, 3:10:28 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mApplied default joinData[39m
[95m[Nest] 1954910  - [39m08/10/2025, 3:10:28 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "joinData": {
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[ChatManagerService] Attempting to join conversation: cae98459-9ded-42e1-bef7-31628f344b65
[ChatManagerService] Available conversations: []
[31m[Nest] 1954910  - [39m08/10/2025, 3:10:28 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError in handleJoinRoom[39m
[31m[Nest] 1954910  - [39m08/10/2025, 3:10:28 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError: Conversation cae98459-9ded-42e1-bef7-31628f344b65 not found[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:29 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: VMoeTXUPK74ZSsqwAAAD[39m
[95m[Nest] 1954910  - [39m08/10/2025, 3:10:29 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mJoin room data received[39m
[95m[Nest] 1954910  - [39m08/10/2025, 3:10:29 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "data": {
    "conversationId": "321d767c-fa29-4565-88b7-bf2a9c237bc4",
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[95m[Nest] 1954910  - [39m08/10/2025, 3:10:29 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mApplied default joinData[39m
[95m[Nest] 1954910  - [39m08/10/2025, 3:10:29 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "joinData": {
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[ChatManagerService] Attempting to join conversation: 321d767c-fa29-4565-88b7-bf2a9c237bc4
[ChatManagerService] Available conversations: []
[31m[Nest] 1954910  - [39m08/10/2025, 3:10:29 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError in handleJoinRoom[39m
[31m[Nest] 1954910  - [39m08/10/2025, 3:10:29 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError: Conversation 321d767c-fa29-4565-88b7-bf2a9c237bc4 not found[39m
[32m[Nest] 1954910  - [39m08/10/2025, 3:10:29 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: If5z1aOv5UXWH5KzAAAF[39m
[95m[Nest] 1954910  - [39m08/10/2025, 3:10:29 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mJoin room data received[39m
[95m[Nest] 1954910  - [39m08/10/2025, 3:10:29 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "data": {
    "conversationId": "bb9a404c-d7f8-48e3-88e7-5824edcee08c",
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[95m[Nest] 1954910  - [39m08/10/2025, 3:10:29 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mApplied default joinData[39m
[95m[Nest] 1954910  - [39m08/10/2025, 3:10:29 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "joinData": {
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[ChatManagerService] Attempting to join conversation: bb9a404c-d7f8-48e3-88e7-5824edcee08c
[ChatManagerService] Available conversations: []
[31m[Nest] 1954910  - [39m08/10/2025, 3:10:29 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError in handleJoinRoom[39m
[31m[Nest] 1954910  - [39m08/10/2025, 3:10:29 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError: Conversation bb9a404c-d7f8-48e3-88e7-5824edcee08c not found[39m
[2J[3J[H[[90m3:10:56 AM[0m] File change detected. Starting incremental compilation...

[[90m3:10:56 AM[0m] Found 0 errors. Watching for file changes.

[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[NestFactory] [39m[32mStarting Nest application...[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mRobotModule dependencies initialized[39m[38;5;3m +8ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConversationListServiceModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mLoggerModule dependencies initialized[39m[38;5;3m +0ms[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.constructor] [39m[95mFile-based permissions loaded successfully[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.constructor] [39m[95mData: {
  "userPermissionsCount": 0,
  "groupPermissionsCount": 0,
  "userGroupMembershipsCount": 0
}[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAuthorizationPermissionsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAppModule dependencies initialized[39m[38;5;3m +1ms[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [95m  DEBUG[39m [38;5;3m[AuthenticationService.constructor] [39m[95mAuthentication service initialized with configuration[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [95m  DEBUG[39m [38;5;3m[AuthenticationService.constructor] [39m[95mData: {
  "sessionTimeoutSeconds": 28800
}[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAuthenticationModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mGuardsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mIstackBuddySlackApiModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mDevDebugModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mPublicInterfaceModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mChatManagerModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mUserProfileModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "join_room" message[39m[38;5;3m +12ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "leave_room" message[39m[38;5;3m +1ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "send_message" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "typing_start" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "typing_stop" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "get_messages" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "share_robot_message" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "join_dashboard" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "leave_dashboard" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAppController {/}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAuthenticationController {/auth}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/user, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/profile/me, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mUserProfileController {/user-profiles}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/user-profiles/me, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mDevDebugController {/dev-debug}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/auth, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/user-details/:userId, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/users, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/auth-status/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mChatManagerController {/chat}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/messages, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/messages, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/messages/last/:count, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/join, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/participants, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/dashboard/stats, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/start, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/leave, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mIstackBuddySlackApiController {/}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/istack-buddy/slack-integration/health, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/istack-buddy/slack-integration/debug, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/istack-buddy/slack-integration/slack/events, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mPublicInterfaceController {/public}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/debug-create, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId/:formId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId/:formId/chat-messages, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId/:formId/chat-messages, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[SlackyAnthropicAgent] [39m[32mSlackyAnthropicAgent constructor called - class loaded[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mSlackyOpenAiAgent constructor called - class loaded[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: ChatRobotParrot v1.0.0[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: AgentRobotParrot v1.0.0[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: RobotChatOpenAI v1.0.0-test-dev[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: RobotChatAnthropic v1.0.0[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackyAnthropicAgent v1.0.0[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: MarvOpenAiAgent v1.0.0[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackyOpenAiAgent v1.0.0[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: AnthropicMarv v1.0.0[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackAgentCoreFormsParrot v1.0.0[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackAgentCoreFormsSsoAutofillParrot v1.0.0[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[RobotService] [39m[32mInitialized 10 robots[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[NestApplication] [39m[32mNest application successfully started[39m[38;5;3m +0ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[Bootstrap] [39m[32miStack Buddy Server running on: http://localhost:3500[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [32m    LOG[39m [38;5;3m[Bootstrap] [39m[32mAPI Documentation available at: http://localhost:3500/api[39m
[33m[Nest] 1955427  - [39m08/10/2025, 3:10:57 AM [33m   WARN[39m [38;5;3m[Bootstrap] [39m[33mCORS enabled for ALL origins (temporary)[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:58 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: LucwfySo4AFc1lEOAAAB[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:10:58 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mJoin room data received[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:10:58 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "data": {
    "conversationId": "cae98459-9ded-42e1-bef7-31628f344b65",
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[95m[Nest] 1955427  - [39m08/10/2025, 3:10:58 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mApplied default joinData[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:10:58 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "joinData": {
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[ChatManagerService] Attempting to join conversation: cae98459-9ded-42e1-bef7-31628f344b65
[ChatManagerService] Available conversations: []
[31m[Nest] 1955427  - [39m08/10/2025, 3:10:58 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError in handleJoinRoom[39m
[31m[Nest] 1955427  - [39m08/10/2025, 3:10:58 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError: Conversation cae98459-9ded-42e1-bef7-31628f344b65 not found[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:58 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: E-eTova-52TUHO7AAAAD[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:10:58 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mJoin room data received[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:10:58 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "data": {
    "conversationId": "321d767c-fa29-4565-88b7-bf2a9c237bc4",
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[95m[Nest] 1955427  - [39m08/10/2025, 3:10:58 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mApplied default joinData[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:10:58 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "joinData": {
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[ChatManagerService] Attempting to join conversation: 321d767c-fa29-4565-88b7-bf2a9c237bc4
[ChatManagerService] Available conversations: []
[31m[Nest] 1955427  - [39m08/10/2025, 3:10:58 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError in handleJoinRoom[39m
[31m[Nest] 1955427  - [39m08/10/2025, 3:10:58 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError: Conversation 321d767c-fa29-4565-88b7-bf2a9c237bc4 not found[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:10:58 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: vWKthpmbrJkj8e8GAAAF[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:10:58 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mJoin room data received[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:10:58 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "data": {
    "conversationId": "bb9a404c-d7f8-48e3-88e7-5824edcee08c",
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[95m[Nest] 1955427  - [39m08/10/2025, 3:10:58 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mApplied default joinData[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:10:58 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "joinData": {
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[ChatManagerService] Attempting to join conversation: bb9a404c-d7f8-48e3-88e7-5824edcee08c
[ChatManagerService] Available conversations: []
[31m[Nest] 1955427  - [39m08/10/2025, 3:10:58 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError in handleJoinRoom[39m
[31m[Nest] 1955427  - [39m08/10/2025, 3:10:58 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError: Conversation bb9a404c-d7f8-48e3-88e7-5824edcee08c not found[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:11:57 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:12:57 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:13:57 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:14:57 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:15:57 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:16:27 AM [32m    LOG[39m [38;5;3m[SlackSignatureGuard] [39m[32mSlack signature verified successfully[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:16:27 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32m[22ae10b6-9b01-4c9d-b8c0-8f931e5e6e3f] Incoming POST /istack-buddy/slack-integration/slack/events[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:16:27 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32mData: {
  "userAgent": "Slackbot 1.0 (+https://api.slack.com/robots)",
  "ip": "::ffff:127.0.0.1",
  "params": {},
  "query": {}
}[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:16:27 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mReceived app mention event[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:16:27 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mDEBUG: Event text: "<@U092RRN555X> calculations observations for  6201623", trimmed: "<@U092RRN555X> calculations observations for  6201623"[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:16:27 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mAdding reaction :thinking_face: to message 1754813785.377319 in channel C091Y5UNA1M[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:16:27 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mAdded reaction :thinking_face: to message in channel C091Y5UNA1M[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:16:27 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mBroadcasting dashboard event: conversation_created[39m
{
  allConversationMessages: [
    {
      id: '9d8b7d9e-9ad2-497d-9160-979f9517112b',
      content: [Object],
      conversationId: '64979a04-d479-40f9-86d3-dda02b88ae4f',
      fromUserId: 'cx-slack-robot',
      fromRole: 'cx-customer',
      toRole: 'cx-agent',
      messageType: 'text',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T08:16:27.917Z,
      updatedAt: 2025-08-10T08:16:27.917Z
    }
  ]
}
[95m[Nest] 1955427  - [39m08/10/2025, 3:16:27 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mBroadcasting dashboard event: conversation_updated[39m
Gateway: Broadcasting new_message to conversation 64979a04-d479-40f9-86d3-dda02b88ae4f: {
  message: {
    id: '9d8b7d9e-9ad2-497d-9160-979f9517112b',
    content: {
      type: 'text/plain',
      payload: '<@U092RRN555X> calculations observations for  6201623'
    },
    conversationId: '64979a04-d479-40f9-86d3-dda02b88ae4f',
    fromUserId: 'cx-slack-robot',
    fromRole: 'cx-customer',
    toRole: 'cx-agent',
    messageType: 'text',
    threadId: undefined,
    originalMessageId: undefined,
    createdAt: 2025-08-10T08:16:27.917Z,
    updatedAt: 2025-08-10T08:16:27.917Z
  },
  timestamp: '2025-08-10T08:16:27.917Z'
}
Gateway: Broadcast completed
[32m[Nest] 1955427  - [39m08/10/2025, 3:16:27 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mMessage 1: [cx-customer] [object Object][39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:16:27 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mBuilding OpenAI message history:[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:16:27 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mObject:[39m
{
  "historyLength": 0,
  "historyRoles": [],
  "currentMessage": "<@U092RRN555X> calculations observations for  6201623"
}

[32m[Nest] 1955427  - [39m08/10/2025, 3:16:27 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mAdding current message: <@U092RRN555X> calculations observations for  6201...[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:16:27 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mConversation being sent to robot:[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:16:27 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
[
  {
    "author": "user",
    "content": "<@U092RRN555X> calculations observations for  6201623..."
  }
]

[95m[Nest] 1955427  - [39m08/10/2025, 3:16:30 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mTool call completion detected[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:16:30 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormCalculationValidation",
  "finishReason": "tool_calls",
  "functionArgs": "{\"formId\":\"6201623\"}"
}

[95m[Nest] 1955427  - [39m08/10/2025, 3:16:30 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mExecuting function call[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:16:30 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormCalculationValidation",
  "functionArgs": {
    "formId": "6201623"
  }
}

[95m[Nest] 1955427  - [39m08/10/2025, 3:16:30 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mChecking onFullMessageReceived callback[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:16:30 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "hasCallback": true,
  "callbackType": "function"
}

[95m[Nest] 1955427  - [39m08/10/2025, 3:16:30 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mCalling onFullMessageReceived for tool start[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:16:30 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormCalculationValidation",
  "message": "Starting execution of fsRestrictedApiFormCalculationValidation..."
}

[95m[Nest] 1955427  - [39m08/10/2025, 3:16:30 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mExecuting tool: fsRestrictedApiFormCalculationValidation[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:16:30 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "toolArgs": {
    "formId": "6201623"
  }
}

[32m[Nest] 1955427  - [39m08/10/2025, 3:16:30 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mTool status updated: fsRestrictedApiFormCalculationValidation -> executing[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:16:30 AM [95m  DEBUG[39m [38;5;3m[MarvToolCall] [39m[95mMarv tool call log[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:16:30 AM [95m  DEBUG[39m [38;5;3m[MarvToolCall] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormCalculationValidation",
  "fnParamsJson": {
    "formId": "6201623"
  }
}

[32m[Nest] 1955427  - [39m08/10/2025, 3:16:30 AM [32m    LOG[39m [38;5;3m[SlackSignatureGuard] [39m[32mSlack signature verified successfully[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:16:30 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32m[90a9a6e9-2b5c-4ee8-9128-031173b3fc36] Incoming POST /istack-buddy/slack-integration/slack/events[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:16:30 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32mData: {
  "userAgent": "Slackbot 1.0 (+https://api.slack.com/robots)",
  "ip": "::ffff:127.0.0.1",
  "params": {},
  "query": {}
}[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:16:30 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mReceived app mention event[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:16:30 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mDuplicate event detected: Ev099QC6T91T[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:16:30 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32m[90a9a6e9-2b5c-4ee8-9128-031173b3fc36] Response POST /istack-buddy/slack-integration/slack/events 200 - 3ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:16:30 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32mData: {
  "statusCode": 200,
  "elapsed": "3ms"
}[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:16:31 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mTool fsRestrictedApiFormCalculationValidation result: "[object Object]"[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:16:31 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mTool status updated: fsRestrictedApiFormCalculationValidation -> completed[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:16:31 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mTool execution completed[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:16:31 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "toolName": "fsRestrictedApiFormCalculationValidation",
  "resultType": "object",
  "isMarvTool": true
}

ObservationMakerViewer.fromObservationResults called with: {
  hasResult: true,
  hasResponse: true,
  resultType: 'object',
  responseType: 'object'
}
extractLogItems called with: {
  responseType: 'object',
  isArray: false,
  hasLogItems: true,
  hasObservations: false,
  hasData: false,
  responseKeys: [ 'isObservationTrue', 'logItems' ]
}
Extracting from response.logItems, length: 34
Final log items count: 34
Extracted log items: {
  count: 34,
  logItems: '[\n' +
    '  {\n' +
    '    "subjectId": "183944809",\n' +
    '    "logLevel": "warn",\n' +
    '    "subjectType": "field",\n' +
    '    "observationClass": "ObservationMakerCalculationValidation",\n' +
    '    "observationMakerClass": "ObservationMakerCalculationValidation",\n' +
    '    "message": "Field Calculation Validation",\n' +
    `    "messageSecondary": "Circular reference detected. This subject's value is defined using the subject's own value. \\n            This field id: '183944809', attempted to expression from field: '183944810'",\n` +
    '    "relatedEntityIds": [],\n' +
    '    "isObservationTrue": true,\n' +
    '    "additionalDetails": {\n' +
    '      "dependencyChainFieldIds": [\n' +
    '        {\n' +
    '          "directOwnerFieldId": "183944810",\n' +
    '          "nodeId": "_root_:0:1"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "183944811",\n' +
    '          "nodeId": "_root_:0"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "183944809",\n' +
    '          "nodeId": "_root_"\n' +
    '        }\n' +
    '      ],\n' +
    `      "message": "Circular reference detected. This subject's value is defined using the subject's own value. \\n            This field id: '183944809', attempted to expression from field: '183944810'"\n` +
    '    }\n' +
    '  },\n' +
    '  {\n' +
    '    "subjectId": "183944810",\n' +
    '    "logLevel": "warn",\n' +
    '    "subjectType": "field",\n' +
    '    "observationClass": "ObservationMakerCalculationValidation",\n' +
    '    "observationMakerClass": "ObservationMakerCalculationValidation",\n' +
    '    "message": "Field Calculation Validation",\n' +
    `    "messageSecondary": "Circular reference detected. This subject's value is defined using the subject's own value. \\n            This field id: '183944810', attempted to expression from field: '183944811'",\n` +
    '    "relatedEntityIds": [],\n' +
    '    "isObservationTrue": true,\n' +
    '    "additionalDetails": {\n' +
    '      "dependencyChainFieldIds": [\n' +
    '        {\n' +
    '          "directOwnerFieldId": "183944811",\n' +
    '          "nodeId": "_root_:0:1"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "183944809",\n' +
    '          "nodeId": "_root_:0"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "183944810",\n' +
    '          "nodeId": "_root_"\n' +
    '        }\n' +
    '      ],\n' +
    `      "message": "Circular reference detected. This subject's value is defined using the subject's own value. \\n            This field id: '183944810', attempted to expression from field: '183944811'"\n` +
    '    }\n' +
    '  }\n' +
    ']'
}
[95m[Nest] 1955427  - [39m08/10/2025, 3:16:31 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mCalling onFullMessageReceived for tool completion[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:16:31 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormCalculationValidation",
  "message": "Finished running fsRestrictedApiFormCalculationValidation. Analysis complete."
}

[32m[Nest] 1955427  - [39m08/10/2025, 3:16:31 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mBuilding OpenAI message history:[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:16:31 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mObject:[39m
{
  "historyLength": 1,
  "historyRoles": [
    {
      "fromRole": "cx-customer",
      "content": "<@U092RRN555X> calculations observations for  6201..."
    }
  ],
  "currentMessage": "<@U092RRN555X> calculations observations for  6201623"
}

[32m[Nest] 1955427  - [39m08/10/2025, 3:16:31 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mProcessing message with role: cx-customer[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:16:31 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mAdding customer message: <@U092RRN555X> calculations observations for  6201...[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:16:31 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mCurrent message already in history, skipping[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:16:31 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mConversation being sent to robot:[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:16:31 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
[
  {
    "author": "user",
    "content": "<@U092RRN555X> calculations observations for  6201623..."
  }
]

[32m[Nest] 1955427  - [39m08/10/2025, 3:16:31 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32m[22ae10b6-9b01-4c9d-b8c0-8f931e5e6e3f] Response POST /istack-buddy/slack-integration/slack/events 200 - 4373ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:16:31 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32mData: {
  "statusCode": 200,
  "elapsed": "4373ms"
}[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:16:33 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mTool call completion detected[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:16:33 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormCalculationValidation",
  "finishReason": "tool_calls",
  "functionArgs": "{\"formId\":\"6201623\"}"
}

[95m[Nest] 1955427  - [39m08/10/2025, 3:16:33 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mExecuting function call[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:16:33 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormCalculationValidation",
  "functionArgs": {
    "formId": "6201623"
  }
}

[95m[Nest] 1955427  - [39m08/10/2025, 3:16:33 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mChecking onFullMessageReceived callback[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:16:33 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "hasCallback": true,
  "callbackType": "function"
}

[95m[Nest] 1955427  - [39m08/10/2025, 3:16:33 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mCalling onFullMessageReceived for tool start[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:16:33 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormCalculationValidation",
  "message": "Starting execution of fsRestrictedApiFormCalculationValidation..."
}

[95m[Nest] 1955427  - [39m08/10/2025, 3:16:33 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95monFullMessageReceived called in multi-part response[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:16:33 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "contentLength": 65,
  "contentType": "text/plain"
}

[95m[Nest] 1955427  - [39m08/10/2025, 3:16:33 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mSending intermediate message via delayedMessageCallback[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:16:33 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "content": "Starting execution of fsRestrictedApiFormCalculationValidation......",
  "contentType": "text/plain"
}

{
  allConversationMessages: [
    {
      id: '9d8b7d9e-9ad2-497d-9160-979f9517112b',
      content: [Object],
      conversationId: '64979a04-d479-40f9-86d3-dda02b88ae4f',
      fromUserId: 'cx-slack-robot',
      fromRole: 'cx-customer',
      toRole: 'cx-agent',
      messageType: 'text',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T08:16:27.917Z,
      updatedAt: 2025-08-10T08:16:27.917Z
    },
    {
      id: 'd979ef9f-072b-4a97-a14e-565d43e4a08e',
      content: [Object],
      conversationId: '64979a04-d479-40f9-86d3-dda02b88ae4f',
      fromUserId: 'cx-slack-robot',
      fromRole: 'robot',
      toRole: 'cx-customer',
      messageType: 'robot',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T08:16:33.753Z,
      updatedAt: 2025-08-10T08:16:33.753Z
    }
  ]
}
[95m[Nest] 1955427  - [39m08/10/2025, 3:16:33 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mBroadcasting dashboard event: conversation_updated[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:16:33 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mExecuting tool: fsRestrictedApiFormCalculationValidation[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:16:33 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "toolArgs": {
    "formId": "6201623"
  }
}

[32m[Nest] 1955427  - [39m08/10/2025, 3:16:33 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mTool status updated: fsRestrictedApiFormCalculationValidation -> executing[39m
Gateway: Broadcasting new_message to conversation 64979a04-d479-40f9-86d3-dda02b88ae4f: {
  message: {
    id: 'd979ef9f-072b-4a97-a14e-565d43e4a08e',
    content: {
      type: 'text/plain',
      payload: 'Starting execution of fsRestrictedApiFormCalculationValidation...'
    },
    conversationId: '64979a04-d479-40f9-86d3-dda02b88ae4f',
    fromUserId: 'cx-slack-robot',
    fromRole: 'robot',
    toRole: 'cx-customer',
    messageType: 'robot',
    threadId: undefined,
    originalMessageId: undefined,
    createdAt: 2025-08-10T08:16:33.753Z,
    updatedAt: 2025-08-10T08:16:33.753Z
  },
  timestamp: '2025-08-10T08:16:33.753Z'
}
Gateway: Broadcast completed
[95m[Nest] 1955427  - [39m08/10/2025, 3:16:33 AM [95m  DEBUG[39m [38;5;3m[MarvToolCall] [39m[95mMarv tool call log[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:16:33 AM [95m  DEBUG[39m [38;5;3m[MarvToolCall] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormCalculationValidation",
  "fnParamsJson": {
    "formId": "6201623"
  }
}

[32m[Nest] 1955427  - [39m08/10/2025, 3:16:34 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mMessage sent to Slack channel C091Y5UNA1M[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:16:34 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mTool fsRestrictedApiFormCalculationValidation result: "[object Object]"[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:16:34 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mTool status updated: fsRestrictedApiFormCalculationValidation -> completed[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:16:34 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mTool execution completed[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:16:34 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "toolName": "fsRestrictedApiFormCalculationValidation",
  "resultType": "object",
  "isMarvTool": true
}

ObservationMakerViewer.fromObservationResults called with: {
  hasResult: true,
  hasResponse: true,
  resultType: 'object',
  responseType: 'object'
}
extractLogItems called with: {
  responseType: 'object',
  isArray: false,
  hasLogItems: true,
  hasObservations: false,
  hasData: false,
  responseKeys: [ 'isObservationTrue', 'logItems' ]
}
Extracting from response.logItems, length: 34
Final log items count: 34
Extracted log items: {
  count: 34,
  logItems: '[\n' +
    '  {\n' +
    '    "subjectId": "183944809",\n' +
    '    "logLevel": "warn",\n' +
    '    "subjectType": "field",\n' +
    '    "observationClass": "ObservationMakerCalculationValidation",\n' +
    '    "observationMakerClass": "ObservationMakerCalculationValidation",\n' +
    '    "message": "Field Calculation Validation",\n' +
    `    "messageSecondary": "Circular reference detected. This subject's value is defined using the subject's own value. \\n            This field id: '183944809', attempted to expression from field: '183944810'",\n` +
    '    "relatedEntityIds": [],\n' +
    '    "isObservationTrue": true,\n' +
    '    "additionalDetails": {\n' +
    '      "dependencyChainFieldIds": [\n' +
    '        {\n' +
    '          "directOwnerFieldId": "183944810",\n' +
    '          "nodeId": "_root_:0:1"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "183944811",\n' +
    '          "nodeId": "_root_:0"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "183944809",\n' +
    '          "nodeId": "_root_"\n' +
    '        }\n' +
    '      ],\n' +
    `      "message": "Circular reference detected. This subject's value is defined using the subject's own value. \\n            This field id: '183944809', attempted to expression from field: '183944810'"\n` +
    '    }\n' +
    '  },\n' +
    '  {\n' +
    '    "subjectId": "183944810",\n' +
    '    "logLevel": "warn",\n' +
    '    "subjectType": "field",\n' +
    '    "observationClass": "ObservationMakerCalculationValidation",\n' +
    '    "observationMakerClass": "ObservationMakerCalculationValidation",\n' +
    '    "message": "Field Calculation Validation",\n' +
    `    "messageSecondary": "Circular reference detected. This subject's value is defined using the subject's own value. \\n            This field id: '183944810', attempted to expression from field: '183944811'",\n` +
    '    "relatedEntityIds": [],\n' +
    '    "isObservationTrue": true,\n' +
    '    "additionalDetails": {\n' +
    '      "dependencyChainFieldIds": [\n' +
    '        {\n' +
    '          "directOwnerFieldId": "183944811",\n' +
    '          "nodeId": "_root_:0:1"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "183944809",\n' +
    '          "nodeId": "_root_:0"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "183944810",\n' +
    '          "nodeId": "_root_"\n' +
    '        }\n' +
    '      ],\n' +
    `      "message": "Circular reference detected. This subject's value is defined using the subject's own value. \\n            This field id: '183944810', attempted to expression from field: '183944811'"\n` +
    '    }\n' +
    '  }\n' +
    ']'
}
[95m[Nest] 1955427  - [39m08/10/2025, 3:16:34 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mCalling onFullMessageReceived for tool completion[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:16:34 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormCalculationValidation",
  "message": "Finished running fsRestrictedApiFormCalculationValidation. Analysis complete."
}

[95m[Nest] 1955427  - [39m08/10/2025, 3:16:34 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95monFullMessageReceived called in multi-part response[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:16:34 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "contentLength": 77,
  "contentType": "text/plain"
}

[95m[Nest] 1955427  - [39m08/10/2025, 3:16:34 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mSending intermediate message via delayedMessageCallback[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:16:34 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "content": "Finished running fsRestrictedApiFormCalculationValidation. Analysis complete....",
  "contentType": "text/plain"
}

{
  allConversationMessages: [
    {
      id: '9d8b7d9e-9ad2-497d-9160-979f9517112b',
      content: [Object],
      conversationId: '64979a04-d479-40f9-86d3-dda02b88ae4f',
      fromUserId: 'cx-slack-robot',
      fromRole: 'cx-customer',
      toRole: 'cx-agent',
      messageType: 'text',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T08:16:27.917Z,
      updatedAt: 2025-08-10T08:16:27.917Z
    },
    {
      id: 'd979ef9f-072b-4a97-a14e-565d43e4a08e',
      content: [Object],
      conversationId: '64979a04-d479-40f9-86d3-dda02b88ae4f',
      fromUserId: 'cx-slack-robot',
      fromRole: 'robot',
      toRole: 'cx-customer',
      messageType: 'robot',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T08:16:33.753Z,
      updatedAt: 2025-08-10T08:16:33.753Z
    },
    {
      id: '5a1a8247-dbea-42f7-aec0-f72705abbd44',
      content: [Object],
      conversationId: '64979a04-d479-40f9-86d3-dda02b88ae4f',
      fromUserId: 'cx-slack-robot',
      fromRole: 'robot',
      toRole: 'cx-customer',
      messageType: 'robot',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T08:16:34.346Z,
      updatedAt: 2025-08-10T08:16:34.346Z
    }
  ]
}
[95m[Nest] 1955427  - [39m08/10/2025, 3:16:34 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mBroadcasting dashboard event: conversation_updated[39m
Gateway: Broadcasting new_message to conversation 64979a04-d479-40f9-86d3-dda02b88ae4f: {
  message: {
    id: '5a1a8247-dbea-42f7-aec0-f72705abbd44',
    content: {
      type: 'text/plain',
      payload: 'Finished running fsRestrictedApiFormCalculationValidation. Analysis complete.'
    },
    conversationId: '64979a04-d479-40f9-86d3-dda02b88ae4f',
    fromUserId: 'cx-slack-robot',
    fromRole: 'robot',
    toRole: 'cx-customer',
    messageType: 'robot',
    threadId: undefined,
    originalMessageId: undefined,
    createdAt: 2025-08-10T08:16:34.346Z,
    updatedAt: 2025-08-10T08:16:34.346Z
  },
  timestamp: '2025-08-10T08:16:34.346Z'
}
Gateway: Broadcast completed
[95m[Nest] 1955427  - [39m08/10/2025, 3:16:34 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95monStreamFinished called[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:16:34 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "contentLength": 6678,
  "authorRole": "assistant",
  "contentPreview": "To analyze the calculations for Form ID `6201623`, I'll perform a calculation validation. Let's proc..."
}

[95m[Nest] 1955427  - [39m08/10/2025, 3:16:34 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mCalling delayedMessageCallback with finished message[39m
{
  allConversationMessages: [
    {
      id: '9d8b7d9e-9ad2-497d-9160-979f9517112b',
      content: [Object],
      conversationId: '64979a04-d479-40f9-86d3-dda02b88ae4f',
      fromUserId: 'cx-slack-robot',
      fromRole: 'cx-customer',
      toRole: 'cx-agent',
      messageType: 'text',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T08:16:27.917Z,
      updatedAt: 2025-08-10T08:16:27.917Z
    },
    {
      id: 'd979ef9f-072b-4a97-a14e-565d43e4a08e',
      content: [Object],
      conversationId: '64979a04-d479-40f9-86d3-dda02b88ae4f',
      fromUserId: 'cx-slack-robot',
      fromRole: 'robot',
      toRole: 'cx-customer',
      messageType: 'robot',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T08:16:33.753Z,
      updatedAt: 2025-08-10T08:16:33.753Z
    },
    {
      id: '5a1a8247-dbea-42f7-aec0-f72705abbd44',
      content: [Object],
      conversationId: '64979a04-d479-40f9-86d3-dda02b88ae4f',
      fromUserId: 'cx-slack-robot',
      fromRole: 'robot',
      toRole: 'cx-customer',
      messageType: 'robot',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T08:16:34.346Z,
      updatedAt: 2025-08-10T08:16:34.346Z
    },
    {
      id: 'c4be49bf-6175-48c4-8060-5fd2b9cb5c82',
      content: [Object],
      conversationId: '64979a04-d479-40f9-86d3-dda02b88ae4f',
      fromUserId: 'cx-slack-robot',
      fromRole: 'robot',
      toRole: 'cx-customer',
      messageType: 'robot',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T08:16:34.351Z,
      updatedAt: 2025-08-10T08:16:34.351Z
    }
  ]
}
[95m[Nest] 1955427  - [39m08/10/2025, 3:16:34 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mBroadcasting dashboard event: conversation_updated[39m
Gateway: Broadcasting new_message to conversation 64979a04-d479-40f9-86d3-dda02b88ae4f: {
  message: {
    id: 'c4be49bf-6175-48c4-8060-5fd2b9cb5c82',
    content: {
      type: 'text/plain',
      payload: "To analyze the calculations for Form ID `6201623`, I'll perform a calculation validation. Let's proceed with that.\n" +
        '🔍 *Calculation Validation Results*\n' +
        '\n' +
        '📊 *Summary:* 34 total log items\n' +
        '• ❌ 0 errors\n' +
        '• ⚠️ 30 warnings\n' +
        '• ℹ️ 4 info\n' +
        '• 🔍 0 debug\n' +
        '\n' +
        '⚠️ *Found 30 issue(s):*\n' +
        '\n' +
        '⚠️ *WARNING* (1/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '183944809', attempted to e...\n" +
        '• *Subject ID:* `183944809`\n' +
        '\n' +
        '⚠️ *WARNING* (2/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '183944810', attempted to e...\n" +
        '• *Subject ID:* `183944810`\n' +
        '\n' +
        '⚠️ *WARNING* (3/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '183944811', attempted to e...\n" +
        '• *Subject ID:* `183944811`\n' +
        '\n' +
        '⚠️ *WARNING* (4/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '183944851', attempted to e...\n" +
        '• *Subject ID:* `183944824`\n' +
        '\n' +
        '⚠️ *WARNING* (5/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '183944850', attempted to e...\n" +
        '• *Subject ID:* `183944850`\n' +
        '\n' +
        '⚠️ *WARNING* (6/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '183944851', attempted to e...\n" +
        '• *Subject ID:* `183944851`\n' +
        '\n' +
        '⚠️ *WARNING* (7/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '183944855', attempted to e...\n" +
        '• *Subject ID:* `183944855`\n' +
        '\n' +
        '⚠️ *WARNING* (8/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '183944855', attempted to e...\n" +
        '• *Subject ID:* `183944855`\n' +
        '\n' +
        '⚠️ *WARNING* (9/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '183944855', attempted to e...\n" +
        '• *Subject ID:* `183944856`\n' +
        '\n' +
        '⚠️ *WARNING* (10/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '183944856', attempted to e...\n" +
        '• *Subject ID:* `183944856`\n' +
        '\n' +
        '⚠️ *WARNING* (11/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '183944857', attempted to e...\n" +
        '• *Subject ID:* `183944857`\n' +
        '\n' +
        '⚠️ *WARNING* (12/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '183944855', attempted to e...\n" +
        '• *Subject ID:* `183944857`\n' +
        '\n' +
        '⚠️ *WARNING* (13/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128831', attempted to e...\n" +
        '• *Subject ID:* `184128788`\n' +
        '\n' +
        '⚠️ *WARNING* (14/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128791', attempted to e...\n" +
        '• *Subject ID:* `184128791`\n' +
        '\n' +
        '⚠️ *WARNING* (15/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128831', attempted to e...\n" +
        '• *Subject ID:* `184128794`\n' +
        '\n' +
        '⚠️ *WARNING* (16/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128831', attempted to e...\n" +
        '• *Subject ID:* `184128797`\n' +
        '\n' +
        '⚠️ *WARNING* (17/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128823', attempted to e...\n" +
        '• *Subject ID:* `184128819`\n' +
        '\n' +
        '⚠️ *WARNING* (18/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128824', attempted to e...\n" +
        '• *Subject ID:* `184128820`\n' +
        '\n' +
        '⚠️ *WARNING* (19/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128822', attempted to e...\n" +
        '• *Subject ID:* `184128821`\n' +
        '\n' +
        '⚠️ *WARNING* (20/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128822', attempted to e...\n" +
        '• *Subject ID:* `184128822`\n' +
        '\n' +
        '⚠️ *WARNING* (21/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128823', attempted to e...\n" +
        '• *Subject ID:* `184128823`\n' +
        '\n' +
        '⚠️ *WARNING* (22/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128824', attempted to e...\n" +
        '• *Subject ID:* `184128824`\n' +
        '\n' +
        '⚠️ *WARNING* (23/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128823', attempted to e...\n" +
        '• *Subject ID:* `184128825`\n' +
        '\n' +
        '⚠️ *WARNING* (24/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128824', attempted to e...\n" +
        '• *Subject ID:* `184128826`\n' +
        '\n' +
        '⚠️ *WARNING* (25/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128822', attempted to e...\n" +
        '• *Subject ID:* `184128827`\n' +
        '\n' +
        '⚠️ *WARNING* (26/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128823', attempted to e...\n" +
        '• *Subject ID:* `184128828`\n' +
        '\n' +
        '⚠️ *WARNING* (27/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128824', attempted to e...\n" +
        '• *Subject ID:* `184128829`\n' +
        '\n' +
        '⚠️ *WARNING* (28/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128822', attempted to e...\n" +
        '• *Subject ID:* `184128830`\n' +
        '\n' +
        '⚠️ *WARNING* (29/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128831', attempted to e...\n" +
        '• *Subject ID:* `184128831`\n' +
        '\n' +
        '⚠️ *WARNING* (30/30)\n' +
        `• *Message:* Shallow Tree Error of type: 'malformed-expression;, JSON: {"directOwnerFieldId":"185526622","isError":true,"errorType":"malformed-expression","calc...\n` +
        '• *Subject ID:* `185526622`\n' +
        '\n' +
        '\n'
    },
    conversationId: '64979a04-d479-40f9-86d3-dda02b88ae4f',
    fromUserId: 'cx-slack-robot',
    fromRole: 'robot',
    toRole: 'cx-customer',
    messageType: 'robot',
    threadId: undefined,
    originalMessageId: undefined,
    createdAt: 2025-08-10T08:16:34.351Z,
    updatedAt: 2025-08-10T08:16:34.351Z
  },
  timestamp: '2025-08-10T08:16:34.351Z'
}
Gateway: Broadcast completed
[32m[Nest] 1955427  - [39m08/10/2025, 3:16:34 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mMessage sent to Slack channel C091Y5UNA1M[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:16:34 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mMessage sent to Slack channel C091Y5UNA1M[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:16:57 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:17:57 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:18:57 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:19:57 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:20:57 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:21:57 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:22:57 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:23:57 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:24:57 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:25:57 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:26:57 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:27:57 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:28:57 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:29:57 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:30:57 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:31:57 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:32:57 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:33:00 AM [32m    LOG[39m [38;5;3m[SlackSignatureGuard] [39m[32mSlack signature verified successfully[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:33:00 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32m[a4df2b37-cade-4a07-a3ad-d9105e9df392] Incoming POST /istack-buddy/slack-integration/slack/events[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:33:00 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32mData: {
  "userAgent": "Slackbot 1.0 (+https://api.slack.com/robots)",
  "ip": "::ffff:127.0.0.1",
  "params": {},
  "query": {}
}[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:33:00 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mReceived app mention event[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:33:00 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mDEBUG: Event text: "<@U092RRN555X> /marv-session", trimmed: "<@U092RRN555X> /marv-session"[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:33:00 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mReceived /marv-session command via app mention[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:33:00 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mDEBUG: Slack conversationId: 1754813785.377319[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:33:00 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mDEBUG: Conversation record: {"internalConversationId":"64979a04-d479-40f9-86d3-dda02b88ae4f","slackConversationId":"1754813785.377319"}[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:33:00 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mDEBUG: Internal conversation ID: 64979a04-d479-40f9-86d3-dda02b88ae4f[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:33:00 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.addUser] [39m[95mUser added successfully[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:33:00 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.addUser] [39m[95mData: {
  "userId": "64979a04-d479-40f9-86d3-dda02b88ae4f",
  "ownPermissionsCount": 2,
  "groupMembershipsCount": 0
}[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:33:00 AM [32m    LOG[39m [38;5;3m[UserProfileService.addTemporaryUser] [39m[32mTemporary user profile added[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:33:00 AM [32m    LOG[39m [38;5;3m[UserProfileService.addTemporaryUser] [39m[32mData: {
  "userId": "64979a04-d479-40f9-86d3-dda02b88ae4f"
}[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:33:00 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mExtracted potential form ID 6201623 from conversation message[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:33:00 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mMessage sent to Slack channel C091Y5UNA1M[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:33:00 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32m[a4df2b37-cade-4a07-a3ad-d9105e9df392] Response POST /istack-buddy/slack-integration/slack/events 200 - 445ms[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:33:00 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32mData: {
  "statusCode": 200,
  "elapsed": "445ms"
}[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:33:57 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:34:47 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: qfBv4O-46ea2pJJkAAAH[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:34:47 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mJoin room data received[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:34:47 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "data": {
    "conversationId": "64979a04-d479-40f9-86d3-dda02b88ae4f",
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[95m[Nest] 1955427  - [39m08/10/2025, 3:34:47 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mApplied default joinData[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:34:47 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "joinData": {
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[ChatManagerService] Attempting to join conversation: 64979a04-d479-40f9-86d3-dda02b88ae4f
[ChatManagerService] Available conversations: [ '64979a04-d479-40f9-86d3-dda02b88ae4f' ]
[95m[Nest] 1955427  - [39m08/10/2025, 3:34:47 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mBroadcasting dashboard event: conversation_participant_added[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:34:54 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient disconnected: qfBv4O-46ea2pJJkAAAH[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:34:57 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:35:57 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:36:02 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: LcAUelJ5mWJgfLmYAAAJ[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:36:02 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mJoin room data received[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:36:02 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "data": {
    "conversationId": "64979a04-d479-40f9-86d3-dda02b88ae4f",
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[95m[Nest] 1955427  - [39m08/10/2025, 3:36:02 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mApplied default joinData[39m
[95m[Nest] 1955427  - [39m08/10/2025, 3:36:02 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "joinData": {
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[ChatManagerService] Attempting to join conversation: 64979a04-d479-40f9-86d3-dda02b88ae4f
[ChatManagerService] Available conversations: [ '64979a04-d479-40f9-86d3-dda02b88ae4f' ]
[32m[Nest] 1955427  - [39m08/10/2025, 3:36:08 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient disconnected: LcAUelJ5mWJgfLmYAAAJ[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:36:57 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:37:57 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:38:57 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:39:57 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:40:57 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:41:57 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:42:57 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:43:57 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:44:57 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:45:57 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:46:57 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:47:57 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:48:57 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:49:57 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:50:57 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:51:57 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:52:57 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:53:57 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:54:57 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:55:57 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:56:57 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:57:57 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:58:57 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1955427  - [39m08/10/2025, 3:59:57 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1955427  - [39m08/10/2025, 4:00:57 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1955427  - [39m08/10/2025, 4:01:57 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1955427  - [39m08/10/2025, 4:02:57 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[2J[3J[H[[90m4:03:23 AM[0m] File change detected. Starting incremental compilation...

[96msrc/istack-buddy-slack-api/istack-buddy-slack-api.service.ts[0m:[93m236[0m:[93m32[0m - [91merror[0m[90m TS2339: [0mProperty 'getBaseUrl' does not exist on type 'IstackBuddySlackApiService'.

[7m236[0m           const baseUrl = this.getBaseUrl();
[7m   [0m [91m                               ~~~~~~~~~~[0m

[[90m4:03:23 AM[0m] Found 1 error. Watching for file changes.

[2J[3J[H[[90m4:03:32 AM[0m] File change detected. Starting incremental compilation...

[[90m4:03:33 AM[0m] Found 0 errors. Watching for file changes.

[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[NestFactory] [39m[32mStarting Nest application...[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mRobotModule dependencies initialized[39m[38;5;3m +8ms[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConversationListServiceModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mLoggerModule dependencies initialized[39m[38;5;3m +0ms[39m
[95m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.constructor] [39m[95mFile-based permissions loaded successfully[39m
[95m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.constructor] [39m[95mData: {
  "userPermissionsCount": 0,
  "groupPermissionsCount": 0,
  "userGroupMembershipsCount": 0
}[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAuthorizationPermissionsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAppModule dependencies initialized[39m[38;5;3m +0ms[39m
[95m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [95m  DEBUG[39m [38;5;3m[AuthenticationService.constructor] [39m[95mAuthentication service initialized with configuration[39m
[95m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [95m  DEBUG[39m [38;5;3m[AuthenticationService.constructor] [39m[95mData: {
  "sessionTimeoutSeconds": 28800
}[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAuthenticationModule dependencies initialized[39m[38;5;3m +2ms[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mGuardsModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mIstackBuddySlackApiModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mDevDebugModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mPublicInterfaceModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mChatManagerModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mUserProfileModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "join_room" message[39m[38;5;3m +13ms[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "leave_room" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "send_message" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "typing_start" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "typing_stop" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "get_messages" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "share_robot_message" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "join_dashboard" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "leave_dashboard" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAppController {/}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAuthenticationController {/auth}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/user, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/profile/me, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mUserProfileController {/user-profiles}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/user-profiles/me, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mDevDebugController {/dev-debug}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/auth, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/user-details/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/users, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/auth-status/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mChatManagerController {/chat}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/messages, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/messages, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/messages/last/:count, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/join, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/participants, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/dashboard/stats, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/start, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/leave, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mIstackBuddySlackApiController {/}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/istack-buddy/slack-integration/health, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/istack-buddy/slack-integration/debug, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/istack-buddy/slack-integration/slack/events, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mPublicInterfaceController {/public}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/debug-create, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId/:formId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId/:formId/chat-messages, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId/:formId/chat-messages, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[SlackyAnthropicAgent] [39m[32mSlackyAnthropicAgent constructor called - class loaded[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mSlackyOpenAiAgent constructor called - class loaded[39m
[95m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: ChatRobotParrot v1.0.0[39m
[95m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: AgentRobotParrot v1.0.0[39m
[95m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: RobotChatOpenAI v1.0.0-test-dev[39m
[95m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: RobotChatAnthropic v1.0.0[39m
[95m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackyAnthropicAgent v1.0.0[39m
[95m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: MarvOpenAiAgent v1.0.0[39m
[95m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackyOpenAiAgent v1.0.0[39m
[95m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: AnthropicMarv v1.0.0[39m
[95m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackAgentCoreFormsParrot v1.0.0[39m
[95m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackAgentCoreFormsSsoAutofillParrot v1.0.0[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[RobotService] [39m[32mInitialized 10 robots[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[NestApplication] [39m[32mNest application successfully started[39m[38;5;3m +1ms[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[Bootstrap] [39m[32miStack Buddy Server running on: http://localhost:3500[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [32m    LOG[39m [38;5;3m[Bootstrap] [39m[32mAPI Documentation available at: http://localhost:3500/api[39m
[33m[Nest] 1968193  - [39m08/10/2025, 4:03:33 AM [33m   WARN[39m [38;5;3m[Bootstrap] [39m[33mCORS enabled for ALL origins (temporary)[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:34 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: BnLWPFU26632lbpaAAAB[39m
[95m[Nest] 1968193  - [39m08/10/2025, 4:03:34 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mJoin room data received[39m
[95m[Nest] 1968193  - [39m08/10/2025, 4:03:34 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "data": {
    "conversationId": "bb9a404c-d7f8-48e3-88e7-5824edcee08c",
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[95m[Nest] 1968193  - [39m08/10/2025, 4:03:34 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mApplied default joinData[39m
[95m[Nest] 1968193  - [39m08/10/2025, 4:03:34 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "joinData": {
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[ChatManagerService] Attempting to join conversation: bb9a404c-d7f8-48e3-88e7-5824edcee08c
[ChatManagerService] Available conversations: []
[31m[Nest] 1968193  - [39m08/10/2025, 4:03:34 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError in handleJoinRoom[39m
[31m[Nest] 1968193  - [39m08/10/2025, 4:03:34 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError: Conversation bb9a404c-d7f8-48e3-88e7-5824edcee08c not found[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:35 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: X3g1IBQB3OpXGbZRAAAD[39m
[95m[Nest] 1968193  - [39m08/10/2025, 4:03:35 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mJoin room data received[39m
[95m[Nest] 1968193  - [39m08/10/2025, 4:03:35 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "data": {
    "conversationId": "cae98459-9ded-42e1-bef7-31628f344b65",
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[95m[Nest] 1968193  - [39m08/10/2025, 4:03:35 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mApplied default joinData[39m
[95m[Nest] 1968193  - [39m08/10/2025, 4:03:35 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "joinData": {
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[ChatManagerService] Attempting to join conversation: cae98459-9ded-42e1-bef7-31628f344b65
[ChatManagerService] Available conversations: []
[31m[Nest] 1968193  - [39m08/10/2025, 4:03:35 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError in handleJoinRoom[39m
[31m[Nest] 1968193  - [39m08/10/2025, 4:03:35 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError: Conversation cae98459-9ded-42e1-bef7-31628f344b65 not found[39m
[32m[Nest] 1968193  - [39m08/10/2025, 4:03:35 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: _nxjdfSYzbolzKkNAAAF[39m
[95m[Nest] 1968193  - [39m08/10/2025, 4:03:35 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mJoin room data received[39m
[95m[Nest] 1968193  - [39m08/10/2025, 4:03:35 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "data": {
    "conversationId": "321d767c-fa29-4565-88b7-bf2a9c237bc4",
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[95m[Nest] 1968193  - [39m08/10/2025, 4:03:35 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mApplied default joinData[39m
[95m[Nest] 1968193  - [39m08/10/2025, 4:03:35 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "joinData": {
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[ChatManagerService] Attempting to join conversation: 321d767c-fa29-4565-88b7-bf2a9c237bc4
[ChatManagerService] Available conversations: []
[31m[Nest] 1968193  - [39m08/10/2025, 4:03:35 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError in handleJoinRoom[39m
[31m[Nest] 1968193  - [39m08/10/2025, 4:03:35 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError: Conversation 321d767c-fa29-4565-88b7-bf2a9c237bc4 not found[39m
[2J[3J[H[[90m4:03:40 AM[0m] File change detected. Starting incremental compilation...

[96msrc/public-interface/public-interface.controller.ts[0m:[93m151[0m:[93m28[0m - [91merror[0m[90m TS2339: [0mProperty 'getBaseUrl' does not exist on type 'PublicInterfaceController'.

[7m151[0m       const baseUrl = this.getBaseUrl();
[7m   [0m [91m                           ~~~~~~~~~~[0m

[[90m4:03:40 AM[0m] Found 1 error. Watching for file changes.

[2J[3J[H[[90m4:03:48 AM[0m] File change detected. Starting incremental compilation...

[96msrc/public-interface/public-interface.controller.ts[0m:[93m151[0m:[93m28[0m - [91merror[0m[90m TS2339: [0mProperty 'getBaseUrl' does not exist on type 'PublicInterfaceController'.

[7m151[0m       const baseUrl = this.getBaseUrl();
[7m   [0m [91m                           ~~~~~~~~~~[0m

[[90m4:03:48 AM[0m] Found 1 error. Watching for file changes.

[2J[3J[H[[90m4:03:58 AM[0m] File change detected. Starting incremental compilation...

[[90m4:03:58 AM[0m] Found 0 errors. Watching for file changes.

[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[NestFactory] [39m[32mStarting Nest application...[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mRobotModule dependencies initialized[39m[38;5;3m +8ms[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConversationListServiceModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mLoggerModule dependencies initialized[39m[38;5;3m +0ms[39m
[95m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.constructor] [39m[95mFile-based permissions loaded successfully[39m
[95m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.constructor] [39m[95mData: {
  "userPermissionsCount": 0,
  "groupPermissionsCount": 0,
  "userGroupMembershipsCount": 0
}[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAuthorizationPermissionsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAppModule dependencies initialized[39m[38;5;3m +1ms[39m
[95m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [95m  DEBUG[39m [38;5;3m[AuthenticationService.constructor] [39m[95mAuthentication service initialized with configuration[39m
[95m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [95m  DEBUG[39m [38;5;3m[AuthenticationService.constructor] [39m[95mData: {
  "sessionTimeoutSeconds": 28800
}[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAuthenticationModule dependencies initialized[39m[38;5;3m +2ms[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mGuardsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mIstackBuddySlackApiModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mDevDebugModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mPublicInterfaceModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mChatManagerModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mUserProfileModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "join_room" message[39m[38;5;3m +13ms[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "leave_room" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "send_message" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "typing_start" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "typing_stop" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "get_messages" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "share_robot_message" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "join_dashboard" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "leave_dashboard" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAppController {/}:[39m[38;5;3m +1ms[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAuthenticationController {/auth}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/user, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/profile/me, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mUserProfileController {/user-profiles}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/user-profiles/me, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mDevDebugController {/dev-debug}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/auth, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/user-details/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/users, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/auth-status/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mChatManagerController {/chat}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/messages, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/messages, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/messages/last/:count, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/join, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/participants, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/dashboard/stats, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/start, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/leave, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mIstackBuddySlackApiController {/}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/istack-buddy/slack-integration/health, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/istack-buddy/slack-integration/debug, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/istack-buddy/slack-integration/slack/events, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mPublicInterfaceController {/public}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/debug-create, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId/:formId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId/:formId/chat-messages, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId/:formId/chat-messages, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[SlackyAnthropicAgent] [39m[32mSlackyAnthropicAgent constructor called - class loaded[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mSlackyOpenAiAgent constructor called - class loaded[39m
[95m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: ChatRobotParrot v1.0.0[39m
[95m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: AgentRobotParrot v1.0.0[39m
[95m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: RobotChatOpenAI v1.0.0-test-dev[39m
[95m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: RobotChatAnthropic v1.0.0[39m
[95m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackyAnthropicAgent v1.0.0[39m
[95m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: MarvOpenAiAgent v1.0.0[39m
[95m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackyOpenAiAgent v1.0.0[39m
[95m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: AnthropicMarv v1.0.0[39m
[95m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackAgentCoreFormsParrot v1.0.0[39m
[95m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackAgentCoreFormsSsoAutofillParrot v1.0.0[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[RobotService] [39m[32mInitialized 10 robots[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[NestApplication] [39m[32mNest application successfully started[39m[38;5;3m +1ms[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[Bootstrap] [39m[32miStack Buddy Server running on: http://localhost:3500[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [32m    LOG[39m [38;5;3m[Bootstrap] [39m[32mAPI Documentation available at: http://localhost:3500/api[39m
[33m[Nest] 1968332  - [39m08/10/2025, 4:03:58 AM [33m   WARN[39m [38;5;3m[Bootstrap] [39m[33mCORS enabled for ALL origins (temporary)[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:04:00 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: U6-vMLMMHndugz-6AAAB[39m
[95m[Nest] 1968332  - [39m08/10/2025, 4:04:00 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mJoin room data received[39m
[95m[Nest] 1968332  - [39m08/10/2025, 4:04:00 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "data": {
    "conversationId": "321d767c-fa29-4565-88b7-bf2a9c237bc4",
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[95m[Nest] 1968332  - [39m08/10/2025, 4:04:00 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mApplied default joinData[39m
[95m[Nest] 1968332  - [39m08/10/2025, 4:04:00 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "joinData": {
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[ChatManagerService] Attempting to join conversation: 321d767c-fa29-4565-88b7-bf2a9c237bc4
[ChatManagerService] Available conversations: []
[31m[Nest] 1968332  - [39m08/10/2025, 4:04:00 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError in handleJoinRoom[39m
[31m[Nest] 1968332  - [39m08/10/2025, 4:04:00 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError: Conversation 321d767c-fa29-4565-88b7-bf2a9c237bc4 not found[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:04:00 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: n6E-YmRqHVayTt_vAAAE[39m
[95m[Nest] 1968332  - [39m08/10/2025, 4:04:00 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mJoin room data received[39m
[95m[Nest] 1968332  - [39m08/10/2025, 4:04:00 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "data": {
    "conversationId": "bb9a404c-d7f8-48e3-88e7-5824edcee08c",
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[95m[Nest] 1968332  - [39m08/10/2025, 4:04:00 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mApplied default joinData[39m
[95m[Nest] 1968332  - [39m08/10/2025, 4:04:00 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "joinData": {
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[ChatManagerService] Attempting to join conversation: bb9a404c-d7f8-48e3-88e7-5824edcee08c
[ChatManagerService] Available conversations: []
[31m[Nest] 1968332  - [39m08/10/2025, 4:04:00 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError in handleJoinRoom[39m
[31m[Nest] 1968332  - [39m08/10/2025, 4:04:00 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError: Conversation bb9a404c-d7f8-48e3-88e7-5824edcee08c not found[39m
[32m[Nest] 1968332  - [39m08/10/2025, 4:04:00 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: AbUgRdN8lU4X5RKjAAAF[39m
[95m[Nest] 1968332  - [39m08/10/2025, 4:04:00 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mJoin room data received[39m
[95m[Nest] 1968332  - [39m08/10/2025, 4:04:00 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "data": {
    "conversationId": "cae98459-9ded-42e1-bef7-31628f344b65",
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[95m[Nest] 1968332  - [39m08/10/2025, 4:04:00 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mApplied default joinData[39m
[95m[Nest] 1968332  - [39m08/10/2025, 4:04:00 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "joinData": {
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[ChatManagerService] Attempting to join conversation: cae98459-9ded-42e1-bef7-31628f344b65
[ChatManagerService] Available conversations: []
[31m[Nest] 1968332  - [39m08/10/2025, 4:04:00 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError in handleJoinRoom[39m
[31m[Nest] 1968332  - [39m08/10/2025, 4:04:00 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError: Conversation cae98459-9ded-42e1-bef7-31628f344b65 not found[39m
[2J[3J[H[[90m4:04:41 AM[0m] File change detected. Starting incremental compilation...

[[90m4:04:41 AM[0m] Found 0 errors. Watching for file changes.

[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[NestFactory] [39m[32mStarting Nest application...[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mRobotModule dependencies initialized[39m[38;5;3m +14ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConversationListServiceModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mLoggerModule dependencies initialized[39m[38;5;3m +0ms[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.constructor] [39m[95mFile-based permissions loaded successfully[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.constructor] [39m[95mData: {
  "userPermissionsCount": 0,
  "groupPermissionsCount": 0,
  "userGroupMembershipsCount": 0
}[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAuthorizationPermissionsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAppModule dependencies initialized[39m[38;5;3m +1ms[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [95m  DEBUG[39m [38;5;3m[AuthenticationService.constructor] [39m[95mAuthentication service initialized with configuration[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [95m  DEBUG[39m [38;5;3m[AuthenticationService.constructor] [39m[95mData: {
  "sessionTimeoutSeconds": 28800
}[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAuthenticationModule dependencies initialized[39m[38;5;3m +3ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mGuardsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mIstackBuddySlackApiModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mDevDebugModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mPublicInterfaceModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mChatManagerModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mUserProfileModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "join_room" message[39m[38;5;3m +14ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "leave_room" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "send_message" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "typing_start" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "typing_stop" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "get_messages" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "share_robot_message" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "join_dashboard" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "leave_dashboard" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAppController {/}:[39m[38;5;3m +1ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAuthenticationController {/auth}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/user, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/profile/me, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mUserProfileController {/user-profiles}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/user-profiles/me, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mDevDebugController {/dev-debug}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/auth, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/user-details/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/users, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/auth-status/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mChatManagerController {/chat}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/messages, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/messages, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/messages/last/:count, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/join, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/participants, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/dashboard/stats, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/start, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/leave, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mIstackBuddySlackApiController {/}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/istack-buddy/slack-integration/health, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/istack-buddy/slack-integration/debug, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/istack-buddy/slack-integration/slack/events, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mPublicInterfaceController {/public}:[39m[38;5;3m +1ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/debug-create, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId/:formId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId/:formId/chat-messages, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId/:formId/chat-messages, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[SlackyAnthropicAgent] [39m[32mSlackyAnthropicAgent constructor called - class loaded[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mSlackyOpenAiAgent constructor called - class loaded[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: ChatRobotParrot v1.0.0[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: AgentRobotParrot v1.0.0[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: RobotChatOpenAI v1.0.0-test-dev[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: RobotChatAnthropic v1.0.0[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackyAnthropicAgent v1.0.0[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: MarvOpenAiAgent v1.0.0[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackyOpenAiAgent v1.0.0[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: AnthropicMarv v1.0.0[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackAgentCoreFormsParrot v1.0.0[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackAgentCoreFormsSsoAutofillParrot v1.0.0[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[RobotService] [39m[32mInitialized 10 robots[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[NestApplication] [39m[32mNest application successfully started[39m[38;5;3m +1ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[Bootstrap] [39m[32miStack Buddy Server running on: http://localhost:3500[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [32m    LOG[39m [38;5;3m[Bootstrap] [39m[32mAPI Documentation available at: http://localhost:3500/api[39m
[33m[Nest] 1968593  - [39m08/10/2025, 4:04:42 AM [33m   WARN[39m [38;5;3m[Bootstrap] [39m[33mCORS enabled for ALL origins (temporary)[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:43 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: aGC9c054T5p3Dm4OAAAB[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:04:43 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mJoin room data received[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:04:43 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "data": {
    "conversationId": "cae98459-9ded-42e1-bef7-31628f344b65",
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[95m[Nest] 1968593  - [39m08/10/2025, 4:04:43 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mApplied default joinData[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:04:43 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "joinData": {
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[ChatManagerService] Attempting to join conversation: cae98459-9ded-42e1-bef7-31628f344b65
[ChatManagerService] Available conversations: []
[31m[Nest] 1968593  - [39m08/10/2025, 4:04:43 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError in handleJoinRoom[39m
[31m[Nest] 1968593  - [39m08/10/2025, 4:04:43 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError: Conversation cae98459-9ded-42e1-bef7-31628f344b65 not found[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:43 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: lQlVDN07I1lE33cVAAAD[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:04:43 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mJoin room data received[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:04:43 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "data": {
    "conversationId": "321d767c-fa29-4565-88b7-bf2a9c237bc4",
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[95m[Nest] 1968593  - [39m08/10/2025, 4:04:43 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mApplied default joinData[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:04:43 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "joinData": {
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[ChatManagerService] Attempting to join conversation: 321d767c-fa29-4565-88b7-bf2a9c237bc4
[ChatManagerService] Available conversations: []
[31m[Nest] 1968593  - [39m08/10/2025, 4:04:43 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError in handleJoinRoom[39m
[31m[Nest] 1968593  - [39m08/10/2025, 4:04:43 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError: Conversation 321d767c-fa29-4565-88b7-bf2a9c237bc4 not found[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:04:43 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: gGqCykVK440X8haxAAAF[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:04:43 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mJoin room data received[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:04:43 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "data": {
    "conversationId": "bb9a404c-d7f8-48e3-88e7-5824edcee08c",
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[95m[Nest] 1968593  - [39m08/10/2025, 4:04:43 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mApplied default joinData[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:04:43 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "joinData": {
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[ChatManagerService] Attempting to join conversation: bb9a404c-d7f8-48e3-88e7-5824edcee08c
[ChatManagerService] Available conversations: []
[31m[Nest] 1968593  - [39m08/10/2025, 4:04:43 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError in handleJoinRoom[39m
[31m[Nest] 1968593  - [39m08/10/2025, 4:04:43 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError: Conversation bb9a404c-d7f8-48e3-88e7-5824edcee08c not found[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:05:42 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:06:42 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:07:42 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:08:42 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:09:42 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:10:42 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:11:42 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:11:53 AM [32m    LOG[39m [38;5;3m[SlackSignatureGuard] [39m[32mSlack signature verified successfully[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:11:53 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32m[cf2b8237-10f6-423e-887a-480225b35112] Incoming POST /istack-buddy/slack-integration/slack/events[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:11:53 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32mData: {
  "userAgent": "Slackbot 1.0 (+https://api.slack.com/robots)",
  "ip": "::ffff:127.0.0.1",
  "params": {},
  "query": {}
}[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:11:53 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mReceived app mention event[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:11:53 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mDEBUG: Event text: "<@U092RRN555X> /marv-session", trimmed: "<@U092RRN555X> /marv-session"[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:11:53 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mReceived /marv-session command via app mention[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:11:53 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mDEBUG: Slack conversationId: 1754813785.377319[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:11:53 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mDEBUG: Conversation record: undefined[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:11:53 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mDEBUG: Internal conversation ID: undefined[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:11:54 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mMessage sent to Slack channel C091Y5UNA1M[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:11:54 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32m[cf2b8237-10f6-423e-887a-480225b35112] Response POST /istack-buddy/slack-integration/slack/events 200 - 483ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:11:54 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32mData: {
  "statusCode": 200,
  "elapsed": "483ms"
}[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:12:42 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:12:51 AM [32m    LOG[39m [38;5;3m[SlackSignatureGuard] [39m[32mSlack signature verified successfully[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:12:51 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32m[376e79c3-cd9f-4953-abc2-2caff9532a42] Incoming POST /istack-buddy/slack-integration/slack/events[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:12:51 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32mData: {
  "userAgent": "Slackbot 1.0 (+https://api.slack.com/robots)",
  "ip": "::ffff:127.0.0.1",
  "params": {},
  "query": {}
}[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:12:51 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mReceived app mention event[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:12:51 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mDEBUG: Event text: "<@U092RRN555X> calculations observations for  6201623", trimmed: "<@U092RRN555X> calculations observations for  6201623"[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:12:51 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mAdding reaction :thinking_face: to message 1754817169.249749 in channel C091Y5UNA1M[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:12:51 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mAdded reaction :thinking_face: to message in channel C091Y5UNA1M[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:12:51 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mBroadcasting dashboard event: conversation_created[39m
{
  allConversationMessages: [
    {
      id: '482d1c55-68cb-47ad-802d-5d7634887caa',
      content: [Object],
      conversationId: 'f7761d10-f9d9-416d-bebe-b0e70f8a8cba',
      fromUserId: 'cx-slack-robot',
      fromRole: 'cx-customer',
      toRole: 'cx-agent',
      messageType: 'text',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T09:12:51.535Z,
      updatedAt: 2025-08-10T09:12:51.535Z
    }
  ]
}
[95m[Nest] 1968593  - [39m08/10/2025, 4:12:51 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mBroadcasting dashboard event: conversation_updated[39m
Gateway: Broadcasting new_message to conversation f7761d10-f9d9-416d-bebe-b0e70f8a8cba: {
  message: {
    id: '482d1c55-68cb-47ad-802d-5d7634887caa',
    content: {
      type: 'text/plain',
      payload: '<@U092RRN555X> calculations observations for  6201623'
    },
    conversationId: 'f7761d10-f9d9-416d-bebe-b0e70f8a8cba',
    fromUserId: 'cx-slack-robot',
    fromRole: 'cx-customer',
    toRole: 'cx-agent',
    messageType: 'text',
    threadId: undefined,
    originalMessageId: undefined,
    createdAt: 2025-08-10T09:12:51.535Z,
    updatedAt: 2025-08-10T09:12:51.535Z
  },
  timestamp: '2025-08-10T09:12:51.535Z'
}
Gateway: Broadcast completed
[32m[Nest] 1968593  - [39m08/10/2025, 4:12:51 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mMessage 1: [cx-customer] [object Object][39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:12:51 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mBuilding OpenAI message history:[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:12:51 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mObject:[39m
{
  "historyLength": 0,
  "historyRoles": [],
  "currentMessage": "<@U092RRN555X> calculations observations for  6201623"
}

[32m[Nest] 1968593  - [39m08/10/2025, 4:12:51 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mAdding current message: <@U092RRN555X> calculations observations for  6201...[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:12:51 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mConversation being sent to robot:[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:12:51 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
[
  {
    "author": "user",
    "content": "<@U092RRN555X> calculations observations for  6201623..."
  }
]

[32m[Nest] 1968593  - [39m08/10/2025, 4:12:54 AM [32m    LOG[39m [38;5;3m[SlackSignatureGuard] [39m[32mSlack signature verified successfully[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:12:54 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32m[9657d092-db5c-48b8-9212-42956839bdc7] Incoming POST /istack-buddy/slack-integration/slack/events[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:12:54 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32mData: {
  "userAgent": "Slackbot 1.0 (+https://api.slack.com/robots)",
  "ip": "::ffff:127.0.0.1",
  "params": {},
  "query": {}
}[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:12:54 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mReceived app mention event[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:12:54 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mDuplicate event detected: Ev09AGU6QYC8[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:12:54 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32m[9657d092-db5c-48b8-9212-42956839bdc7] Response POST /istack-buddy/slack-integration/slack/events 200 - 2ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:12:54 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32mData: {
  "statusCode": 200,
  "elapsed": "2ms"
}[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:12:55 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mTool call completion detected[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:12:55 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormCalculationValidation",
  "finishReason": "tool_calls",
  "functionArgs": "{\"formId\":\"6201623\"}"
}

[95m[Nest] 1968593  - [39m08/10/2025, 4:12:55 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mExecuting function call[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:12:55 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormCalculationValidation",
  "functionArgs": {
    "formId": "6201623"
  }
}

[95m[Nest] 1968593  - [39m08/10/2025, 4:12:55 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mChecking onFullMessageReceived callback[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:12:55 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "hasCallback": true,
  "callbackType": "function"
}

[95m[Nest] 1968593  - [39m08/10/2025, 4:12:55 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mCalling onFullMessageReceived for tool start[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:12:55 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormCalculationValidation",
  "message": "Starting execution of fsRestrictedApiFormCalculationValidation..."
}

[95m[Nest] 1968593  - [39m08/10/2025, 4:12:55 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mExecuting tool: fsRestrictedApiFormCalculationValidation[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:12:55 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "toolArgs": {
    "formId": "6201623"
  }
}

[32m[Nest] 1968593  - [39m08/10/2025, 4:12:55 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mTool status updated: fsRestrictedApiFormCalculationValidation -> executing[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:12:55 AM [95m  DEBUG[39m [38;5;3m[MarvToolCall] [39m[95mMarv tool call log[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:12:55 AM [95m  DEBUG[39m [38;5;3m[MarvToolCall] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormCalculationValidation",
  "fnParamsJson": {
    "formId": "6201623"
  }
}

[32m[Nest] 1968593  - [39m08/10/2025, 4:12:56 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mTool fsRestrictedApiFormCalculationValidation result: "[object Object]"[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:12:56 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mTool status updated: fsRestrictedApiFormCalculationValidation -> completed[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:12:56 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mTool execution completed[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:12:56 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "toolName": "fsRestrictedApiFormCalculationValidation",
  "resultType": "object",
  "isMarvTool": true
}

ObservationMakerViewer.fromObservationResults called with: {
  hasResult: true,
  hasResponse: true,
  resultType: 'object',
  responseType: 'object'
}
extractLogItems called with: {
  responseType: 'object',
  isArray: false,
  hasLogItems: true,
  hasObservations: false,
  hasData: false,
  responseKeys: [ 'isObservationTrue', 'logItems' ]
}
Extracting from response.logItems, length: 34
Final log items count: 34
Extracted log items: {
  count: 34,
  logItems: '[\n' +
    '  {\n' +
    '    "subjectId": "183944809",\n' +
    '    "logLevel": "warn",\n' +
    '    "subjectType": "field",\n' +
    '    "observationClass": "ObservationMakerCalculationValidation",\n' +
    '    "observationMakerClass": "ObservationMakerCalculationValidation",\n' +
    '    "message": "Field Calculation Validation",\n' +
    `    "messageSecondary": "Circular reference detected. This subject's value is defined using the subject's own value. \\n            This field id: '183944809', attempted to expression from field: '183944810'",\n` +
    '    "relatedEntityIds": [],\n' +
    '    "isObservationTrue": true,\n' +
    '    "additionalDetails": {\n' +
    '      "dependencyChainFieldIds": [\n' +
    '        {\n' +
    '          "directOwnerFieldId": "183944810",\n' +
    '          "nodeId": "_root_:0:1"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "183944811",\n' +
    '          "nodeId": "_root_:0"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "183944809",\n' +
    '          "nodeId": "_root_"\n' +
    '        }\n' +
    '      ],\n' +
    `      "message": "Circular reference detected. This subject's value is defined using the subject's own value. \\n            This field id: '183944809', attempted to expression from field: '183944810'"\n` +
    '    }\n' +
    '  },\n' +
    '  {\n' +
    '    "subjectId": "183944810",\n' +
    '    "logLevel": "warn",\n' +
    '    "subjectType": "field",\n' +
    '    "observationClass": "ObservationMakerCalculationValidation",\n' +
    '    "observationMakerClass": "ObservationMakerCalculationValidation",\n' +
    '    "message": "Field Calculation Validation",\n' +
    `    "messageSecondary": "Circular reference detected. This subject's value is defined using the subject's own value. \\n            This field id: '183944810', attempted to expression from field: '183944811'",\n` +
    '    "relatedEntityIds": [],\n' +
    '    "isObservationTrue": true,\n' +
    '    "additionalDetails": {\n' +
    '      "dependencyChainFieldIds": [\n' +
    '        {\n' +
    '          "directOwnerFieldId": "183944811",\n' +
    '          "nodeId": "_root_:0:1"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "183944809",\n' +
    '          "nodeId": "_root_:0"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "183944810",\n' +
    '          "nodeId": "_root_"\n' +
    '        }\n' +
    '      ],\n' +
    `      "message": "Circular reference detected. This subject's value is defined using the subject's own value. \\n            This field id: '183944810', attempted to expression from field: '183944811'"\n` +
    '    }\n' +
    '  }\n' +
    ']'
}
[95m[Nest] 1968593  - [39m08/10/2025, 4:12:56 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mCalling onFullMessageReceived for tool completion[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:12:56 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormCalculationValidation",
  "message": "Finished running fsRestrictedApiFormCalculationValidation. Analysis complete."
}

[32m[Nest] 1968593  - [39m08/10/2025, 4:12:56 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mBuilding OpenAI message history:[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:12:56 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mObject:[39m
{
  "historyLength": 1,
  "historyRoles": [
    {
      "fromRole": "cx-customer",
      "content": "<@U092RRN555X> calculations observations for  6201..."
    }
  ],
  "currentMessage": "<@U092RRN555X> calculations observations for  6201623"
}

[32m[Nest] 1968593  - [39m08/10/2025, 4:12:56 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mProcessing message with role: cx-customer[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:12:56 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mAdding customer message: <@U092RRN555X> calculations observations for  6201...[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:12:56 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mCurrent message already in history, skipping[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:12:56 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mConversation being sent to robot:[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:12:56 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
[
  {
    "author": "user",
    "content": "<@U092RRN555X> calculations observations for  6201623..."
  }
]

[32m[Nest] 1968593  - [39m08/10/2025, 4:12:56 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32m[376e79c3-cd9f-4953-abc2-2caff9532a42] Response POST /istack-buddy/slack-integration/slack/events 200 - 5803ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:12:56 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32mData: {
  "statusCode": 200,
  "elapsed": "5803ms"
}[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:12:59 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mTool call completion detected[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:12:59 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormCalculationValidation",
  "finishReason": "tool_calls",
  "functionArgs": "{\"formId\":\"6201623\"}"
}

[95m[Nest] 1968593  - [39m08/10/2025, 4:12:59 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mExecuting function call[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:12:59 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormCalculationValidation",
  "functionArgs": {
    "formId": "6201623"
  }
}

[95m[Nest] 1968593  - [39m08/10/2025, 4:12:59 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mChecking onFullMessageReceived callback[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:12:59 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "hasCallback": true,
  "callbackType": "function"
}

[95m[Nest] 1968593  - [39m08/10/2025, 4:12:59 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mCalling onFullMessageReceived for tool start[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:12:59 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormCalculationValidation",
  "message": "Starting execution of fsRestrictedApiFormCalculationValidation..."
}

[95m[Nest] 1968593  - [39m08/10/2025, 4:12:59 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95monFullMessageReceived called in multi-part response[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:12:59 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "contentLength": 65,
  "contentType": "text/plain"
}

[95m[Nest] 1968593  - [39m08/10/2025, 4:12:59 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mSending intermediate message via delayedMessageCallback[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:12:59 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "content": "Starting execution of fsRestrictedApiFormCalculationValidation......",
  "contentType": "text/plain"
}

{
  allConversationMessages: [
    {
      id: '482d1c55-68cb-47ad-802d-5d7634887caa',
      content: [Object],
      conversationId: 'f7761d10-f9d9-416d-bebe-b0e70f8a8cba',
      fromUserId: 'cx-slack-robot',
      fromRole: 'cx-customer',
      toRole: 'cx-agent',
      messageType: 'text',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T09:12:51.535Z,
      updatedAt: 2025-08-10T09:12:51.535Z
    },
    {
      id: 'c3a6f21c-62c2-4aaa-b889-a89b2122b182',
      content: [Object],
      conversationId: 'f7761d10-f9d9-416d-bebe-b0e70f8a8cba',
      fromUserId: 'cx-slack-robot',
      fromRole: 'robot',
      toRole: 'cx-customer',
      messageType: 'robot',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T09:12:59.858Z,
      updatedAt: 2025-08-10T09:12:59.858Z
    }
  ]
}
[95m[Nest] 1968593  - [39m08/10/2025, 4:12:59 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mBroadcasting dashboard event: conversation_updated[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:12:59 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mExecuting tool: fsRestrictedApiFormCalculationValidation[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:12:59 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "toolArgs": {
    "formId": "6201623"
  }
}

[32m[Nest] 1968593  - [39m08/10/2025, 4:12:59 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mTool status updated: fsRestrictedApiFormCalculationValidation -> executing[39m
Gateway: Broadcasting new_message to conversation f7761d10-f9d9-416d-bebe-b0e70f8a8cba: {
  message: {
    id: 'c3a6f21c-62c2-4aaa-b889-a89b2122b182',
    content: {
      type: 'text/plain',
      payload: 'Starting execution of fsRestrictedApiFormCalculationValidation...'
    },
    conversationId: 'f7761d10-f9d9-416d-bebe-b0e70f8a8cba',
    fromUserId: 'cx-slack-robot',
    fromRole: 'robot',
    toRole: 'cx-customer',
    messageType: 'robot',
    threadId: undefined,
    originalMessageId: undefined,
    createdAt: 2025-08-10T09:12:59.858Z,
    updatedAt: 2025-08-10T09:12:59.858Z
  },
  timestamp: '2025-08-10T09:12:59.858Z'
}
Gateway: Broadcast completed
[95m[Nest] 1968593  - [39m08/10/2025, 4:12:59 AM [95m  DEBUG[39m [38;5;3m[MarvToolCall] [39m[95mMarv tool call log[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:12:59 AM [95m  DEBUG[39m [38;5;3m[MarvToolCall] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormCalculationValidation",
  "fnParamsJson": {
    "formId": "6201623"
  }
}

[32m[Nest] 1968593  - [39m08/10/2025, 4:13:00 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mMessage sent to Slack channel C091Y5UNA1M[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:13:00 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mTool fsRestrictedApiFormCalculationValidation result: "[object Object]"[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:13:00 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mTool status updated: fsRestrictedApiFormCalculationValidation -> completed[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:13:00 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mTool execution completed[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:13:00 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "toolName": "fsRestrictedApiFormCalculationValidation",
  "resultType": "object",
  "isMarvTool": true
}

ObservationMakerViewer.fromObservationResults called with: {
  hasResult: true,
  hasResponse: true,
  resultType: 'object',
  responseType: 'object'
}
extractLogItems called with: {
  responseType: 'object',
  isArray: false,
  hasLogItems: true,
  hasObservations: false,
  hasData: false,
  responseKeys: [ 'isObservationTrue', 'logItems' ]
}
Extracting from response.logItems, length: 34
Final log items count: 34
Extracted log items: {
  count: 34,
  logItems: '[\n' +
    '  {\n' +
    '    "subjectId": "183944809",\n' +
    '    "logLevel": "warn",\n' +
    '    "subjectType": "field",\n' +
    '    "observationClass": "ObservationMakerCalculationValidation",\n' +
    '    "observationMakerClass": "ObservationMakerCalculationValidation",\n' +
    '    "message": "Field Calculation Validation",\n' +
    `    "messageSecondary": "Circular reference detected. This subject's value is defined using the subject's own value. \\n            This field id: '183944809', attempted to expression from field: '183944810'",\n` +
    '    "relatedEntityIds": [],\n' +
    '    "isObservationTrue": true,\n' +
    '    "additionalDetails": {\n' +
    '      "dependencyChainFieldIds": [\n' +
    '        {\n' +
    '          "directOwnerFieldId": "183944810",\n' +
    '          "nodeId": "_root_:0:1"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "183944811",\n' +
    '          "nodeId": "_root_:0"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "183944809",\n' +
    '          "nodeId": "_root_"\n' +
    '        }\n' +
    '      ],\n' +
    `      "message": "Circular reference detected. This subject's value is defined using the subject's own value. \\n            This field id: '183944809', attempted to expression from field: '183944810'"\n` +
    '    }\n' +
    '  },\n' +
    '  {\n' +
    '    "subjectId": "183944810",\n' +
    '    "logLevel": "warn",\n' +
    '    "subjectType": "field",\n' +
    '    "observationClass": "ObservationMakerCalculationValidation",\n' +
    '    "observationMakerClass": "ObservationMakerCalculationValidation",\n' +
    '    "message": "Field Calculation Validation",\n' +
    `    "messageSecondary": "Circular reference detected. This subject's value is defined using the subject's own value. \\n            This field id: '183944810', attempted to expression from field: '183944811'",\n` +
    '    "relatedEntityIds": [],\n' +
    '    "isObservationTrue": true,\n' +
    '    "additionalDetails": {\n' +
    '      "dependencyChainFieldIds": [\n' +
    '        {\n' +
    '          "directOwnerFieldId": "183944811",\n' +
    '          "nodeId": "_root_:0:1"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "183944809",\n' +
    '          "nodeId": "_root_:0"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "183944810",\n' +
    '          "nodeId": "_root_"\n' +
    '        }\n' +
    '      ],\n' +
    `      "message": "Circular reference detected. This subject's value is defined using the subject's own value. \\n            This field id: '183944810', attempted to expression from field: '183944811'"\n` +
    '    }\n' +
    '  }\n' +
    ']'
}
[95m[Nest] 1968593  - [39m08/10/2025, 4:13:00 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mCalling onFullMessageReceived for tool completion[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:13:00 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormCalculationValidation",
  "message": "Finished running fsRestrictedApiFormCalculationValidation. Analysis complete."
}

[95m[Nest] 1968593  - [39m08/10/2025, 4:13:00 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95monFullMessageReceived called in multi-part response[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:13:00 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "contentLength": 77,
  "contentType": "text/plain"
}

[95m[Nest] 1968593  - [39m08/10/2025, 4:13:00 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mSending intermediate message via delayedMessageCallback[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:13:00 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "content": "Finished running fsRestrictedApiFormCalculationValidation. Analysis complete....",
  "contentType": "text/plain"
}

{
  allConversationMessages: [
    {
      id: '482d1c55-68cb-47ad-802d-5d7634887caa',
      content: [Object],
      conversationId: 'f7761d10-f9d9-416d-bebe-b0e70f8a8cba',
      fromUserId: 'cx-slack-robot',
      fromRole: 'cx-customer',
      toRole: 'cx-agent',
      messageType: 'text',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T09:12:51.535Z,
      updatedAt: 2025-08-10T09:12:51.535Z
    },
    {
      id: 'c3a6f21c-62c2-4aaa-b889-a89b2122b182',
      content: [Object],
      conversationId: 'f7761d10-f9d9-416d-bebe-b0e70f8a8cba',
      fromUserId: 'cx-slack-robot',
      fromRole: 'robot',
      toRole: 'cx-customer',
      messageType: 'robot',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T09:12:59.858Z,
      updatedAt: 2025-08-10T09:12:59.858Z
    },
    {
      id: 'e2b77d86-c1b6-4ddd-93e0-f8ac89959348',
      content: [Object],
      conversationId: 'f7761d10-f9d9-416d-bebe-b0e70f8a8cba',
      fromUserId: 'cx-slack-robot',
      fromRole: 'robot',
      toRole: 'cx-customer',
      messageType: 'robot',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T09:13:00.790Z,
      updatedAt: 2025-08-10T09:13:00.790Z
    }
  ]
}
[95m[Nest] 1968593  - [39m08/10/2025, 4:13:00 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mBroadcasting dashboard event: conversation_updated[39m
Gateway: Broadcasting new_message to conversation f7761d10-f9d9-416d-bebe-b0e70f8a8cba: {
  message: {
    id: 'e2b77d86-c1b6-4ddd-93e0-f8ac89959348',
    content: {
      type: 'text/plain',
      payload: 'Finished running fsRestrictedApiFormCalculationValidation. Analysis complete.'
    },
    conversationId: 'f7761d10-f9d9-416d-bebe-b0e70f8a8cba',
    fromUserId: 'cx-slack-robot',
    fromRole: 'robot',
    toRole: 'cx-customer',
    messageType: 'robot',
    threadId: undefined,
    originalMessageId: undefined,
    createdAt: 2025-08-10T09:13:00.790Z,
    updatedAt: 2025-08-10T09:13:00.790Z
  },
  timestamp: '2025-08-10T09:13:00.790Z'
}
Gateway: Broadcast completed
[95m[Nest] 1968593  - [39m08/10/2025, 4:13:00 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95monStreamFinished called[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:13:00 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "contentLength": 6745,
  "authorRole": "assistant",
  "contentPreview": "The form with ID `6201623` requires a calculation validation check. I'll initiate the process to ana..."
}

[95m[Nest] 1968593  - [39m08/10/2025, 4:13:00 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mCalling delayedMessageCallback with finished message[39m
{
  allConversationMessages: [
    {
      id: '482d1c55-68cb-47ad-802d-5d7634887caa',
      content: [Object],
      conversationId: 'f7761d10-f9d9-416d-bebe-b0e70f8a8cba',
      fromUserId: 'cx-slack-robot',
      fromRole: 'cx-customer',
      toRole: 'cx-agent',
      messageType: 'text',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T09:12:51.535Z,
      updatedAt: 2025-08-10T09:12:51.535Z
    },
    {
      id: 'c3a6f21c-62c2-4aaa-b889-a89b2122b182',
      content: [Object],
      conversationId: 'f7761d10-f9d9-416d-bebe-b0e70f8a8cba',
      fromUserId: 'cx-slack-robot',
      fromRole: 'robot',
      toRole: 'cx-customer',
      messageType: 'robot',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T09:12:59.858Z,
      updatedAt: 2025-08-10T09:12:59.858Z
    },
    {
      id: 'e2b77d86-c1b6-4ddd-93e0-f8ac89959348',
      content: [Object],
      conversationId: 'f7761d10-f9d9-416d-bebe-b0e70f8a8cba',
      fromUserId: 'cx-slack-robot',
      fromRole: 'robot',
      toRole: 'cx-customer',
      messageType: 'robot',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T09:13:00.790Z,
      updatedAt: 2025-08-10T09:13:00.790Z
    },
    {
      id: 'e41f6897-cceb-4642-943c-f44e21ca185d',
      content: [Object],
      conversationId: 'f7761d10-f9d9-416d-bebe-b0e70f8a8cba',
      fromUserId: 'cx-slack-robot',
      fromRole: 'robot',
      toRole: 'cx-customer',
      messageType: 'robot',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T09:13:00.793Z,
      updatedAt: 2025-08-10T09:13:00.793Z
    }
  ]
}
[95m[Nest] 1968593  - [39m08/10/2025, 4:13:00 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mBroadcasting dashboard event: conversation_updated[39m
Gateway: Broadcasting new_message to conversation f7761d10-f9d9-416d-bebe-b0e70f8a8cba: {
  message: {
    id: 'e41f6897-cceb-4642-943c-f44e21ca185d',
    content: {
      type: 'text/plain',
      payload: "The form with ID `6201623` requires a calculation validation check. I'll initiate the process to analyze the calculations and identify potential issues. Please hold on for a moment.\n" +
        '🔍 *Calculation Validation Results*\n' +
        '\n' +
        '📊 *Summary:* 34 total log items\n' +
        '• ❌ 0 errors\n' +
        '• ⚠️ 30 warnings\n' +
        '• ℹ️ 4 info\n' +
        '• 🔍 0 debug\n' +
        '\n' +
        '⚠️ *Found 30 issue(s):*\n' +
        '\n' +
        '⚠️ *WARNING* (1/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '183944809', attempted to e...\n" +
        '• *Subject ID:* `183944809`\n' +
        '\n' +
        '⚠️ *WARNING* (2/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '183944810', attempted to e...\n" +
        '• *Subject ID:* `183944810`\n' +
        '\n' +
        '⚠️ *WARNING* (3/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '183944811', attempted to e...\n" +
        '• *Subject ID:* `183944811`\n' +
        '\n' +
        '⚠️ *WARNING* (4/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '183944851', attempted to e...\n" +
        '• *Subject ID:* `183944824`\n' +
        '\n' +
        '⚠️ *WARNING* (5/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '183944850', attempted to e...\n" +
        '• *Subject ID:* `183944850`\n' +
        '\n' +
        '⚠️ *WARNING* (6/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '183944851', attempted to e...\n" +
        '• *Subject ID:* `183944851`\n' +
        '\n' +
        '⚠️ *WARNING* (7/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '183944855', attempted to e...\n" +
        '• *Subject ID:* `183944855`\n' +
        '\n' +
        '⚠️ *WARNING* (8/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '183944855', attempted to e...\n" +
        '• *Subject ID:* `183944855`\n' +
        '\n' +
        '⚠️ *WARNING* (9/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '183944855', attempted to e...\n" +
        '• *Subject ID:* `183944856`\n' +
        '\n' +
        '⚠️ *WARNING* (10/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '183944856', attempted to e...\n" +
        '• *Subject ID:* `183944856`\n' +
        '\n' +
        '⚠️ *WARNING* (11/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '183944857', attempted to e...\n" +
        '• *Subject ID:* `183944857`\n' +
        '\n' +
        '⚠️ *WARNING* (12/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '183944855', attempted to e...\n" +
        '• *Subject ID:* `183944857`\n' +
        '\n' +
        '⚠️ *WARNING* (13/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128831', attempted to e...\n" +
        '• *Subject ID:* `184128788`\n' +
        '\n' +
        '⚠️ *WARNING* (14/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128791', attempted to e...\n" +
        '• *Subject ID:* `184128791`\n' +
        '\n' +
        '⚠️ *WARNING* (15/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128831', attempted to e...\n" +
        '• *Subject ID:* `184128794`\n' +
        '\n' +
        '⚠️ *WARNING* (16/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128831', attempted to e...\n" +
        '• *Subject ID:* `184128797`\n' +
        '\n' +
        '⚠️ *WARNING* (17/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128823', attempted to e...\n" +
        '• *Subject ID:* `184128819`\n' +
        '\n' +
        '⚠️ *WARNING* (18/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128824', attempted to e...\n" +
        '• *Subject ID:* `184128820`\n' +
        '\n' +
        '⚠️ *WARNING* (19/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128822', attempted to e...\n" +
        '• *Subject ID:* `184128821`\n' +
        '\n' +
        '⚠️ *WARNING* (20/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128822', attempted to e...\n" +
        '• *Subject ID:* `184128822`\n' +
        '\n' +
        '⚠️ *WARNING* (21/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128823', attempted to e...\n" +
        '• *Subject ID:* `184128823`\n' +
        '\n' +
        '⚠️ *WARNING* (22/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128824', attempted to e...\n" +
        '• *Subject ID:* `184128824`\n' +
        '\n' +
        '⚠️ *WARNING* (23/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128823', attempted to e...\n" +
        '• *Subject ID:* `184128825`\n' +
        '\n' +
        '⚠️ *WARNING* (24/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128824', attempted to e...\n" +
        '• *Subject ID:* `184128826`\n' +
        '\n' +
        '⚠️ *WARNING* (25/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128822', attempted to e...\n" +
        '• *Subject ID:* `184128827`\n' +
        '\n' +
        '⚠️ *WARNING* (26/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128823', attempted to e...\n" +
        '• *Subject ID:* `184128828`\n' +
        '\n' +
        '⚠️ *WARNING* (27/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128824', attempted to e...\n" +
        '• *Subject ID:* `184128829`\n' +
        '\n' +
        '⚠️ *WARNING* (28/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128822', attempted to e...\n" +
        '• *Subject ID:* `184128830`\n' +
        '\n' +
        '⚠️ *WARNING* (29/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128831', attempted to e...\n" +
        '• *Subject ID:* `184128831`\n' +
        '\n' +
        '⚠️ *WARNING* (30/30)\n' +
        `• *Message:* Shallow Tree Error of type: 'malformed-expression;, JSON: {"directOwnerFieldId":"185526622","isError":true,"errorType":"malformed-expression","calc...\n` +
        '• *Subject ID:* `185526622`\n' +
        '\n' +
        '\n'
    },
    conversationId: 'f7761d10-f9d9-416d-bebe-b0e70f8a8cba',
    fromUserId: 'cx-slack-robot',
    fromRole: 'robot',
    toRole: 'cx-customer',
    messageType: 'robot',
    threadId: undefined,
    originalMessageId: undefined,
    createdAt: 2025-08-10T09:13:00.793Z,
    updatedAt: 2025-08-10T09:13:00.793Z
  },
  timestamp: '2025-08-10T09:13:00.793Z'
}
Gateway: Broadcast completed
[32m[Nest] 1968593  - [39m08/10/2025, 4:13:01 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mMessage sent to Slack channel C091Y5UNA1M[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:13:01 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mMessage sent to Slack channel C091Y5UNA1M[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:13:20 AM [32m    LOG[39m [38;5;3m[SlackSignatureGuard] [39m[32mSlack signature verified successfully[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:13:20 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32m[93dc88e7-38b0-4635-b6ec-8b44c1865f6b] Incoming POST /istack-buddy/slack-integration/slack/events[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:13:20 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32mData: {
  "userAgent": "Slackbot 1.0 (+https://api.slack.com/robots)",
  "ip": "::ffff:127.0.0.1",
  "params": {},
  "query": {}
}[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:13:20 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mReceived app mention event[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:13:20 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mDEBUG: Event text: "<@U092RRN555X> /marv-session", trimmed: "<@U092RRN555X> /marv-session"[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:13:20 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mReceived /marv-session command via app mention[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:13:20 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mDEBUG: Slack conversationId: 1754817169.249749[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:13:20 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mDEBUG: Conversation record: {"internalConversationId":"f7761d10-f9d9-416d-bebe-b0e70f8a8cba","slackConversationId":"1754817169.249749"}[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:13:20 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mDEBUG: Internal conversation ID: f7761d10-f9d9-416d-bebe-b0e70f8a8cba[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:13:20 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.addUser] [39m[95mUser added successfully[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:13:20 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.addUser] [39m[95mData: {
  "userId": "f7761d10-f9d9-416d-bebe-b0e70f8a8cba",
  "ownPermissionsCount": 2,
  "groupMembershipsCount": 0
}[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:13:20 AM [32m    LOG[39m [38;5;3m[UserProfileService.addTemporaryUser] [39m[32mTemporary user profile added[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:13:20 AM [32m    LOG[39m [38;5;3m[UserProfileService.addTemporaryUser] [39m[32mData: {
  "userId": "f7761d10-f9d9-416d-bebe-b0e70f8a8cba"
}[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:13:20 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mExtracted potential form ID 6201623 from conversation message[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:13:20 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mMessage sent to Slack channel C091Y5UNA1M[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:13:20 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32m[93dc88e7-38b0-4635-b6ec-8b44c1865f6b] Response POST /istack-buddy/slack-integration/slack/events 200 - 515ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:13:20 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32mData: {
  "statusCode": 200,
  "elapsed": "515ms"
}[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:13:21 AM [95m  DEBUG[39m [95mJWT token from query parameter validated, allowing controller to handle redirect[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:13:21 AM [95m  DEBUG[39m [95mObject:[39m
{
  "userId": "f7761d10-f9d9-416d-bebe-b0e70f8a8cba",
  "endpoint": "/public/form-marv/f7761d10-f9d9-416d-bebe-b0e70f8a8cba/6201623?jwtToken=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJmNzc2MWQxMC1mOWQ5LTQxNmQtYmViZS1iMGU3MGY4YThjYmEiLCJlbWFpbCI6ImZvcm0tbWFydi0xNzU0ODE3MjAwMDE4QGV4YW1wbGUuY29tIiwidXNlcm5hbWUiOiJmNzc2MWQxMC1mOWQ5LTQxNmQtYmViZS1iMGU3MGY4YThjYmEiLCJhY2NvdW50VHlwZSI6IlRFTVBPUkFSWSIsImlhdCI6MTc1NDgxNzIwMCwiZXhwIjoxNzU0ODQ2MDAwfQ.aJ4U723syCmf7wkyZ14pCAWWLNE2DAXo78vBEYz7W8o",
  "method": "GET",
  "correlationId": "unknown"
}

[32m[Nest] 1968593  - [39m08/10/2025, 4:13:21 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32m[359fe0aa-6e2e-4e74-bb13-abc56d2451b6] Incoming GET /public/form-marv/f7761d10-f9d9-416d-bebe-b0e70f8a8cba/6201623?jwtToken=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJmNzc2MWQxMC1mOWQ5LTQxNmQtYmViZS1iMGU3MGY4YThjYmEiLCJlbWFpbCI6ImZvcm0tbWFydi0xNzU0ODE3MjAwMDE4QGV4YW1wbGUuY29tIiwidXNlcm5hbWUiOiJmNzc2MWQxMC1mOWQ5LTQxNmQtYmViZS1iMGU3MGY4YThjYmEiLCJhY2NvdW50VHlwZSI6IlRFTVBPUkFSWSIsImlhdCI6MTc1NDgxNzIwMCwiZXhwIjoxNzU0ODQ2MDAwfQ.aJ4U723syCmf7wkyZ14pCAWWLNE2DAXo78vBEYz7W8o[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:13:21 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32mData: {
  "userAgent": "Slackbot-LinkExpanding 1.0 (+https://api.slack.com/robots)",
  "ip": "::ffff:127.0.0.1",
  "params": {
    "conversationId": "f7761d10-f9d9-416d-bebe-b0e70f8a8cba",
    "formId": "6201623"
  },
  "query": {
    "jwtToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJmNzc2MWQxMC1mOWQ5LTQxNmQtYmViZS1iMGU3MGY4YThjYmEiLCJlbWFpbCI6ImZvcm0tbWFydi0xNzU0ODE3MjAwMDE4QGV4YW1wbGUuY29tIiwidXNlcm5hbWUiOiJmNzc2MWQxMC1mOWQ5LTQxNmQtYmViZS1iMGU3MGY4YThjYmEiLCJhY2NvdW50VHlwZSI6IlRFTVBPUkFSWSIsImlhdCI6MTc1NDgxNzIwMCwiZXhwIjoxNzU0ODQ2MDAwfQ.aJ4U723syCmf7wkyZ14pCAWWLNE2DAXo78vBEYz7W8o"
  }
}[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:13:21 AM [32m    LOG[39m [38;5;3m[AuthenticationService.authenticateUser] [39m[32mJWT authentication attempt started[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:13:21 AM [32m    LOG[39m [38;5;3m[AuthenticationService.authenticateUser] [39m[32mData: {
  "userId": "f7761d10-f9d9-416d-bebe-b0e70f8a8cba",
  "hasToken": true
}[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:13:21 AM [32m    LOG[39m [38;5;3m[AuthenticationService.authenticateUser] [39m[32mJWT authentication successful[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:13:21 AM [32m    LOG[39m [38;5;3m[AuthenticationService.authenticateUser] [39m[32mData: {
  "userId": "f7761d10-f9d9-416d-bebe-b0e70f8a8cba",
  "email": "form-marv-1754817200018@example.com"
}[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:13:21 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32m[359fe0aa-6e2e-4e74-bb13-abc56d2451b6] Response GET /public/form-marv/f7761d10-f9d9-416d-bebe-b0e70f8a8cba/6201623?jwtToken=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJmNzc2MWQxMC1mOWQ5LTQxNmQtYmViZS1iMGU3MGY4YThjYmEiLCJlbWFpbCI6ImZvcm0tbWFydi0xNzU0ODE3MjAwMDE4QGV4YW1wbGUuY29tIiwidXNlcm5hbWUiOiJmNzc2MWQxMC1mOWQ5LTQxNmQtYmViZS1iMGU3MGY4YThjYmEiLCJhY2NvdW50VHlwZSI6IlRFTVBPUkFSWSIsImlhdCI6MTc1NDgxNzIwMCwiZXhwIjoxNzU0ODQ2MDAwfQ.aJ4U723syCmf7wkyZ14pCAWWLNE2DAXo78vBEYz7W8o 302 - 2ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:13:21 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32mData: {
  "statusCode": 302,
  "elapsed": "2ms"
}[39m
[33m[Nest] 1968593  - [39m08/10/2025, 4:13:21 AM [33m   WARN[39m [33mNo authentication token provided[39m
[33m[Nest] 1968593  - [39m08/10/2025, 4:13:21 AM [33m   WARN[39m [33mObject:[39m
{
  "endpoint": "/public/form-marv/f7761d10-f9d9-416d-bebe-b0e70f8a8cba/6201623",
  "method": "GET",
  "correlationId": "unknown"
}

[31m[Nest] 1968593  - [39m08/10/2025, 4:13:21 AM [31m  ERROR[39m [38;5;3m[GlobalExceptionFilter] [39m[31mHTTP Exception 401: No authentication token provided[39m
UnauthorizedException: No authentication token provided
    at AuthPermissionGuard.canActivate (/mypart/tmc/projects/istack-buddy-server-take1/src/common/guards/auth-permission.guard.ts:97:13)
    at GuardsConsumer.tryActivate (/mypart/tmc/projects/istack-buddy-server-take1/node_modules/@nestjs/core/guards/guards-consumer.js:15:34)
    at canActivateFn (/mypart/tmc/projects/istack-buddy-server-take1/node_modules/@nestjs/core/router/router-execution-context.js:135:59)
    at /mypart/tmc/projects/istack-buddy-server-take1/node_modules/@nestjs/core/router/router-execution-context.js:42:37
    at /mypart/tmc/projects/istack-buddy-server-take1/node_modules/@nestjs/core/router/router-proxy.js:9:23
    at Layer.handle [as handle_request] (/mypart/tmc/projects/istack-buddy-server-take1/node_modules/express/lib/router/layer.js:95:5)
    at next (/mypart/tmc/projects/istack-buddy-server-take1/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/mypart/tmc/projects/istack-buddy-server-take1/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/mypart/tmc/projects/istack-buddy-server-take1/node_modules/express/lib/router/layer.js:95:5)
    at /mypart/tmc/projects/istack-buddy-server-take1/node_modules/express/lib/router/index.js:284:15
[31m[Nest] 1968593  - [39m08/10/2025, 4:13:21 AM [31m  ERROR[39m [38;5;3m[GlobalExceptionFilter] [39m[31mData: {
  "statusCode": 401,
  "requestBody": {},
  "requestQuery": {},
  "requestParams": {
    "conversationId": "f7761d10-f9d9-416d-bebe-b0e70f8a8cba",
    "formId": "6201623"
  }
}[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:13:21 AM [32m    LOG[39m [38;5;3m[GlobalExceptionFilter] [39m[32mAUDIT: ACCESS_DENIED - failure[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:13:21 AM [32m    LOG[39m [38;5;3m[GlobalExceptionFilter] [39m[32mData: {
  "auditEvent": "ACCESS_DENIED",
  "result": "failure",
  "details": {
    "statusCode": 401,
    "reason": "No authentication token provided",
    "attemptedResource": "/public/form-marv/f7761d10-f9d9-416d-bebe-b0e70f8a8cba/6201623"
  }
}[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:13:38 AM [95m  DEBUG[39m [95mJWT token from query parameter validated, allowing controller to handle redirect[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:13:38 AM [95m  DEBUG[39m [95mObject:[39m
{
  "userId": "f7761d10-f9d9-416d-bebe-b0e70f8a8cba",
  "endpoint": "/public/form-marv/f7761d10-f9d9-416d-bebe-b0e70f8a8cba/6201623?jwtToken=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJmNzc2MWQxMC1mOWQ5LTQxNmQtYmViZS1iMGU3MGY4YThjYmEiLCJlbWFpbCI6ImZvcm0tbWFydi0xNzU0ODE3MjAwMDE4QGV4YW1wbGUuY29tIiwidXNlcm5hbWUiOiJmNzc2MWQxMC1mOWQ5LTQxNmQtYmViZS1iMGU3MGY4YThjYmEiLCJhY2NvdW50VHlwZSI6IlRFTVBPUkFSWSIsImlhdCI6MTc1NDgxNzIwMCwiZXhwIjoxNzU0ODQ2MDAwfQ.aJ4U723syCmf7wkyZ14pCAWWLNE2DAXo78vBEYz7W8o",
  "method": "GET",
  "correlationId": "unknown"
}

[32m[Nest] 1968593  - [39m08/10/2025, 4:13:38 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32m[ae6c29c4-4e2b-4a4e-9bbe-b6b4f6c1281d] Incoming GET /public/form-marv/f7761d10-f9d9-416d-bebe-b0e70f8a8cba/6201623?jwtToken=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJmNzc2MWQxMC1mOWQ5LTQxNmQtYmViZS1iMGU3MGY4YThjYmEiLCJlbWFpbCI6ImZvcm0tbWFydi0xNzU0ODE3MjAwMDE4QGV4YW1wbGUuY29tIiwidXNlcm5hbWUiOiJmNzc2MWQxMC1mOWQ5LTQxNmQtYmViZS1iMGU3MGY4YThjYmEiLCJhY2NvdW50VHlwZSI6IlRFTVBPUkFSWSIsImlhdCI6MTc1NDgxNzIwMCwiZXhwIjoxNzU0ODQ2MDAwfQ.aJ4U723syCmf7wkyZ14pCAWWLNE2DAXo78vBEYz7W8o[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:13:38 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32mData: {
  "userAgent": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36",
  "ip": "::ffff:127.0.0.1",
  "params": {
    "conversationId": "f7761d10-f9d9-416d-bebe-b0e70f8a8cba",
    "formId": "6201623"
  },
  "query": {
    "jwtToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJmNzc2MWQxMC1mOWQ5LTQxNmQtYmViZS1iMGU3MGY4YThjYmEiLCJlbWFpbCI6ImZvcm0tbWFydi0xNzU0ODE3MjAwMDE4QGV4YW1wbGUuY29tIiwidXNlcm5hbWUiOiJmNzc2MWQxMC1mOWQ5LTQxNmQtYmViZS1iMGU3MGY4YThjYmEiLCJhY2NvdW50VHlwZSI6IlRFTVBPUkFSWSIsImlhdCI6MTc1NDgxNzIwMCwiZXhwIjoxNzU0ODQ2MDAwfQ.aJ4U723syCmf7wkyZ14pCAWWLNE2DAXo78vBEYz7W8o"
  }
}[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:13:38 AM [32m    LOG[39m [38;5;3m[AuthenticationService.authenticateUser] [39m[32mJWT authentication attempt started[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:13:38 AM [32m    LOG[39m [38;5;3m[AuthenticationService.authenticateUser] [39m[32mData: {
  "userId": "f7761d10-f9d9-416d-bebe-b0e70f8a8cba",
  "hasToken": true
}[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:13:38 AM [32m    LOG[39m [38;5;3m[AuthenticationService.authenticateUser] [39m[32mJWT authentication successful[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:13:38 AM [32m    LOG[39m [38;5;3m[AuthenticationService.authenticateUser] [39m[32mData: {
  "userId": "f7761d10-f9d9-416d-bebe-b0e70f8a8cba",
  "email": "form-marv-1754817200018@example.com"
}[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:13:38 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32m[ae6c29c4-4e2b-4a4e-9bbe-b6b4f6c1281d] Response GET /public/form-marv/f7761d10-f9d9-416d-bebe-b0e70f8a8cba/6201623?jwtToken=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJmNzc2MWQxMC1mOWQ5LTQxNmQtYmViZS1iMGU3MGY4YThjYmEiLCJlbWFpbCI6ImZvcm0tbWFydi0xNzU0ODE3MjAwMDE4QGV4YW1wbGUuY29tIiwidXNlcm5hbWUiOiJmNzc2MWQxMC1mOWQ5LTQxNmQtYmViZS1iMGU3MGY4YThjYmEiLCJhY2NvdW50VHlwZSI6IlRFTVBPUkFSWSIsImlhdCI6MTc1NDgxNzIwMCwiZXhwIjoxNzU0ODQ2MDAwfQ.aJ4U723syCmf7wkyZ14pCAWWLNE2DAXo78vBEYz7W8o 302 - 2ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:13:38 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32mData: {
  "statusCode": 302,
  "elapsed": "2ms"
}[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:13:38 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.getUserPermissions] [39m[95mGetting user permissions (legacy method)[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:13:38 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.getUserPermissions] [39m[95mData: {
  "userId": "f7761d10-f9d9-416d-bebe-b0e70f8a8cba"
}[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:13:38 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.getUserEffectivePermissions] [39m[95mGetting user effective permissions using helper function[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:13:38 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.getUserEffectivePermissions] [39m[95mData: {
  "userId": "f7761d10-f9d9-416d-bebe-b0e70f8a8cba"
}[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:13:38 AM [95m  DEBUG[39m [95mChecking user permissions[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:13:38 AM [95m  DEBUG[39m [95mObject:[39m
{
  "userId": "f7761d10-f9d9-416d-bebe-b0e70f8a8cba",
  "requiredPermissions": [
    "cx-agent:form-marv:read"
  ],
  "userPermissions": [
    "cx-agent:form-marv:read",
    "cx-agent:form-marv:write"
  ],
  "endpoint": "/public/form-marv/f7761d10-f9d9-416d-bebe-b0e70f8a8cba/6201623",
  "method": "GET",
  "correlationId": "unknown"
}

[95m[Nest] 1968593  - [39m08/10/2025, 4:13:38 AM [95m  DEBUG[39m [95mUser has required permissions, access granted[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:13:38 AM [95m  DEBUG[39m [95mObject:[39m
{
  "userId": "f7761d10-f9d9-416d-bebe-b0e70f8a8cba",
  "requiredPermissions": [
    "cx-agent:form-marv:read"
  ],
  "endpoint": "/public/form-marv/f7761d10-f9d9-416d-bebe-b0e70f8a8cba/6201623",
  "method": "GET",
  "correlationId": "unknown"
}

[32m[Nest] 1968593  - [39m08/10/2025, 4:13:38 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32m[27633141-e271-4370-aedc-57382f3f7a11] Incoming GET /public/form-marv/f7761d10-f9d9-416d-bebe-b0e70f8a8cba/6201623[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:13:38 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32mData: {
  "userAgent": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36",
  "ip": "::ffff:127.0.0.1",
  "params": {
    "conversationId": "f7761d10-f9d9-416d-bebe-b0e70f8a8cba",
    "formId": "6201623"
  },
  "query": {}
}[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:13:38 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32m[27633141-e271-4370-aedc-57382f3f7a11] Response GET /public/form-marv/f7761d10-f9d9-416d-bebe-b0e70f8a8cba/6201623 200 - 1ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:13:38 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32mData: {
  "statusCode": 200,
  "elapsed": "1ms"
}[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:13:38 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: LtmJHXy_elJO1ICmAAAH[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:13:38 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mJoin room data received[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:13:38 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "data": {
    "conversationId": "f7761d10-f9d9-416d-bebe-b0e70f8a8cba",
    "joinData": {
      "userId": "form-marv-user",
      "userRole": "CUSTOMER"
    }
  }
}

[ChatManagerService] Attempting to join conversation: f7761d10-f9d9-416d-bebe-b0e70f8a8cba
[ChatManagerService] Available conversations: [ 'f7761d10-f9d9-416d-bebe-b0e70f8a8cba' ]
[95m[Nest] 1968593  - [39m08/10/2025, 4:13:38 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mBroadcasting dashboard event: conversation_participant_added[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:13:38 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.getUserPermissions] [39m[95mGetting user permissions (legacy method)[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:13:38 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.getUserPermissions] [39m[95mData: {
  "userId": "f7761d10-f9d9-416d-bebe-b0e70f8a8cba"
}[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:13:38 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.getUserEffectivePermissions] [39m[95mGetting user effective permissions using helper function[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:13:38 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.getUserEffectivePermissions] [39m[95mData: {
  "userId": "f7761d10-f9d9-416d-bebe-b0e70f8a8cba"
}[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:13:38 AM [95m  DEBUG[39m [95mChecking user permissions[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:13:38 AM [95m  DEBUG[39m [95mObject:[39m
{
  "userId": "f7761d10-f9d9-416d-bebe-b0e70f8a8cba",
  "requiredPermissions": [
    "cx-agent:form-marv:read"
  ],
  "userPermissions": [
    "cx-agent:form-marv:read",
    "cx-agent:form-marv:write"
  ],
  "endpoint": "/public/form-marv/f7761d10-f9d9-416d-bebe-b0e70f8a8cba/6201623/chat-messages",
  "method": "GET",
  "correlationId": "unknown"
}

[95m[Nest] 1968593  - [39m08/10/2025, 4:13:38 AM [95m  DEBUG[39m [95mUser has required permissions, access granted[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:13:38 AM [95m  DEBUG[39m [95mObject:[39m
{
  "userId": "f7761d10-f9d9-416d-bebe-b0e70f8a8cba",
  "requiredPermissions": [
    "cx-agent:form-marv:read"
  ],
  "endpoint": "/public/form-marv/f7761d10-f9d9-416d-bebe-b0e70f8a8cba/6201623/chat-messages",
  "method": "GET",
  "correlationId": "unknown"
}

[32m[Nest] 1968593  - [39m08/10/2025, 4:13:38 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32m[2e34b71b-c723-4b8d-816e-908a7d739259] Incoming GET /public/form-marv/f7761d10-f9d9-416d-bebe-b0e70f8a8cba/6201623/chat-messages[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:13:38 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32mData: {
  "userAgent": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36",
  "ip": "::ffff:127.0.0.1",
  "params": {
    "conversationId": "f7761d10-f9d9-416d-bebe-b0e70f8a8cba",
    "formId": "6201623"
  },
  "query": {}
}[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:13:38 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32m[2e34b71b-c723-4b8d-816e-908a7d739259] Response GET /public/form-marv/f7761d10-f9d9-416d-bebe-b0e70f8a8cba/6201623/chat-messages 200 - 0ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:13:38 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32mData: {
  "statusCode": 200,
  "elapsed": "0ms"
}[39m
[31m[Nest] 1968593  - [39m08/10/2025, 4:13:38 AM [31m  ERROR[39m [38;5;3m[GlobalExceptionFilter] [39m[31mHTTP Exception 404: Cannot GET /favicon.ico[39m
NotFoundException: Cannot GET /favicon.ico
    at callback (/mypart/tmc/projects/istack-buddy-server-take1/node_modules/@nestjs/core/router/routes-resolver.js:77:19)
    at /mypart/tmc/projects/istack-buddy-server-take1/node_modules/@nestjs/core/router/router-proxy.js:9:23
    at Layer.handle [as handle_request] (/mypart/tmc/projects/istack-buddy-server-take1/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/mypart/tmc/projects/istack-buddy-server-take1/node_modules/express/lib/router/index.js:328:13)
    at /mypart/tmc/projects/istack-buddy-server-take1/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/mypart/tmc/projects/istack-buddy-server-take1/node_modules/express/lib/router/index.js:346:12)
    at next (/mypart/tmc/projects/istack-buddy-server-take1/node_modules/express/lib/router/index.js:280:10)
    at urlencodedParser (/mypart/tmc/projects/istack-buddy-server-take1/node_modules/body-parser/lib/types/urlencoded.js:94:7)
    at Layer.handle [as handle_request] (/mypart/tmc/projects/istack-buddy-server-take1/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/mypart/tmc/projects/istack-buddy-server-take1/node_modules/express/lib/router/index.js:328:13)
[31m[Nest] 1968593  - [39m08/10/2025, 4:13:38 AM [31m  ERROR[39m [38;5;3m[GlobalExceptionFilter] [39m[31mData: {
  "statusCode": 404,
  "requestBody": {},
  "requestQuery": {},
  "requestParams": {}
}[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:13:42 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:14:35 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.getUserPermissions] [39m[95mGetting user permissions (legacy method)[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:14:35 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.getUserPermissions] [39m[95mData: {
  "userId": "f7761d10-f9d9-416d-bebe-b0e70f8a8cba"
}[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:14:35 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.getUserEffectivePermissions] [39m[95mGetting user effective permissions using helper function[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:14:35 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.getUserEffectivePermissions] [39m[95mData: {
  "userId": "f7761d10-f9d9-416d-bebe-b0e70f8a8cba"
}[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:14:35 AM [95m  DEBUG[39m [95mChecking user permissions[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:14:35 AM [95m  DEBUG[39m [95mObject:[39m
{
  "userId": "f7761d10-f9d9-416d-bebe-b0e70f8a8cba",
  "requiredPermissions": [
    "cx-agent:form-marv:write"
  ],
  "userPermissions": [
    "cx-agent:form-marv:read",
    "cx-agent:form-marv:write"
  ],
  "endpoint": "/public/form-marv/f7761d10-f9d9-416d-bebe-b0e70f8a8cba/6201623/chat-messages",
  "method": "POST",
  "correlationId": "unknown"
}

[95m[Nest] 1968593  - [39m08/10/2025, 4:14:35 AM [95m  DEBUG[39m [95mUser has required permissions, access granted[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:14:35 AM [95m  DEBUG[39m [95mObject:[39m
{
  "userId": "f7761d10-f9d9-416d-bebe-b0e70f8a8cba",
  "requiredPermissions": [
    "cx-agent:form-marv:write"
  ],
  "endpoint": "/public/form-marv/f7761d10-f9d9-416d-bebe-b0e70f8a8cba/6201623/chat-messages",
  "method": "POST",
  "correlationId": "unknown"
}

[32m[Nest] 1968593  - [39m08/10/2025, 4:14:35 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32m[9a254f41-f727-4a14-bb92-dd44b7ca8e12] Incoming POST /public/form-marv/f7761d10-f9d9-416d-bebe-b0e70f8a8cba/6201623/chat-messages[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:14:35 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32mData: {
  "userAgent": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36",
  "ip": "::ffff:127.0.0.1",
  "params": {
    "conversationId": "f7761d10-f9d9-416d-bebe-b0e70f8a8cba",
    "formId": "6201623"
  },
  "query": {}
}[39m
Error posting chat message: TypeError: Cannot read properties of undefined (reading 'length')
    at ChatManagerService.messageToEnvelope (/mypart/tmc/projects/istack-buddy-server-take1/src/chat-manager/chat-manager.service.ts:389:72)
    at ChatManagerService.addMessage (/mypart/tmc/projects/istack-buddy-server-take1/src/chat-manager/chat-manager.service.ts:499:27)
    at PublicInterfaceController.postChatMessage (/mypart/tmc/projects/istack-buddy-server-take1/src/public-interface/public-interface.controller.ts:586:57)
    at /mypart/tmc/projects/istack-buddy-server-take1/node_modules/@nestjs/core/router/router-execution-context.js:38:29
[32m[Nest] 1968593  - [39m08/10/2025, 4:14:35 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32m[9a254f41-f727-4a14-bb92-dd44b7ca8e12] Response POST /public/form-marv/f7761d10-f9d9-416d-bebe-b0e70f8a8cba/6201623/chat-messages 201 - 7ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:14:35 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32mData: {
  "statusCode": 201,
  "elapsed": "7ms"
}[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:14:42 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:15:02 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.getUserPermissions] [39m[95mGetting user permissions (legacy method)[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:15:02 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.getUserPermissions] [39m[95mData: {
  "userId": "f7761d10-f9d9-416d-bebe-b0e70f8a8cba"
}[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:15:02 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.getUserEffectivePermissions] [39m[95mGetting user effective permissions using helper function[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:15:02 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.getUserEffectivePermissions] [39m[95mData: {
  "userId": "f7761d10-f9d9-416d-bebe-b0e70f8a8cba"
}[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:15:02 AM [95m  DEBUG[39m [95mChecking user permissions[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:15:02 AM [95m  DEBUG[39m [95mObject:[39m
{
  "userId": "f7761d10-f9d9-416d-bebe-b0e70f8a8cba",
  "requiredPermissions": [
    "cx-agent:form-marv:write"
  ],
  "userPermissions": [
    "cx-agent:form-marv:read",
    "cx-agent:form-marv:write"
  ],
  "endpoint": "/public/form-marv/f7761d10-f9d9-416d-bebe-b0e70f8a8cba/6201623/chat-messages",
  "method": "POST",
  "correlationId": "unknown"
}

[95m[Nest] 1968593  - [39m08/10/2025, 4:15:02 AM [95m  DEBUG[39m [95mUser has required permissions, access granted[39m
[95m[Nest] 1968593  - [39m08/10/2025, 4:15:02 AM [95m  DEBUG[39m [95mObject:[39m
{
  "userId": "f7761d10-f9d9-416d-bebe-b0e70f8a8cba",
  "requiredPermissions": [
    "cx-agent:form-marv:write"
  ],
  "endpoint": "/public/form-marv/f7761d10-f9d9-416d-bebe-b0e70f8a8cba/6201623/chat-messages",
  "method": "POST",
  "correlationId": "unknown"
}

[32m[Nest] 1968593  - [39m08/10/2025, 4:15:02 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32m[ff217bbf-2ec5-4c6e-be47-ea3caf2b72f0] Incoming POST /public/form-marv/f7761d10-f9d9-416d-bebe-b0e70f8a8cba/6201623/chat-messages[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:15:02 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32mData: {
  "userAgent": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36",
  "ip": "::ffff:127.0.0.1",
  "params": {
    "conversationId": "f7761d10-f9d9-416d-bebe-b0e70f8a8cba",
    "formId": "6201623"
  },
  "query": {}
}[39m
Error posting chat message: TypeError: Cannot read properties of undefined (reading 'length')
    at ChatManagerService.messageToEnvelope (/mypart/tmc/projects/istack-buddy-server-take1/src/chat-manager/chat-manager.service.ts:389:72)
    at ChatManagerService.addMessage (/mypart/tmc/projects/istack-buddy-server-take1/src/chat-manager/chat-manager.service.ts:499:27)
    at PublicInterfaceController.postChatMessage (/mypart/tmc/projects/istack-buddy-server-take1/src/public-interface/public-interface.controller.ts:586:57)
    at /mypart/tmc/projects/istack-buddy-server-take1/node_modules/@nestjs/core/router/router-execution-context.js:38:29
[32m[Nest] 1968593  - [39m08/10/2025, 4:15:02 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32m[ff217bbf-2ec5-4c6e-be47-ea3caf2b72f0] Response POST /public/form-marv/f7761d10-f9d9-416d-bebe-b0e70f8a8cba/6201623/chat-messages 201 - 1ms[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:15:02 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32mData: {
  "statusCode": 201,
  "elapsed": "1ms"
}[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:15:42 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:16:42 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1968593  - [39m08/10/2025, 4:17:42 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[2J[3J[H[[90m4:17:53 AM[0m] File change detected. Starting incremental compilation...

[96msrc/chat-manager/chat-manager.service.ts[0m:[93m389[0m:[93m15[0m - [91merror[0m[90m TS2339: [0mProperty 'getContentPayload' does not exist on type 'ChatManagerService'.

[7m389[0m         (this.getContentPayload(message.content) || '').length / 4,
[7m   [0m [91m              ~~~~~~~~~~~~~~~~~[0m

[[90m4:17:53 AM[0m] Found 1 error. Watching for file changes.

[2J[3J[H[[90m4:18:00 AM[0m] File change detected. Starting incremental compilation...

[[90m4:18:00 AM[0m] Found 0 errors. Watching for file changes.

[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[NestFactory] [39m[32mStarting Nest application...[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mRobotModule dependencies initialized[39m[38;5;3m +7ms[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConversationListServiceModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mLoggerModule dependencies initialized[39m[38;5;3m +0ms[39m
[95m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.constructor] [39m[95mFile-based permissions loaded successfully[39m
[95m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.constructor] [39m[95mData: {
  "userPermissionsCount": 0,
  "groupPermissionsCount": 0,
  "userGroupMembershipsCount": 0
}[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAuthorizationPermissionsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAppModule dependencies initialized[39m[38;5;3m +0ms[39m
[95m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [95m  DEBUG[39m [38;5;3m[AuthenticationService.constructor] [39m[95mAuthentication service initialized with configuration[39m
[95m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [95m  DEBUG[39m [38;5;3m[AuthenticationService.constructor] [39m[95mData: {
  "sessionTimeoutSeconds": 28800
}[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAuthenticationModule dependencies initialized[39m[38;5;3m +3ms[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mGuardsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mIstackBuddySlackApiModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mDevDebugModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mPublicInterfaceModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mChatManagerModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mUserProfileModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "join_room" message[39m[38;5;3m +13ms[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "leave_room" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "send_message" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "typing_start" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "typing_stop" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "get_messages" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "share_robot_message" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "join_dashboard" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "leave_dashboard" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAppController {/}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAuthenticationController {/auth}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/user, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/profile/me, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mUserProfileController {/user-profiles}:[39m[38;5;3m +1ms[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/user-profiles/me, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mDevDebugController {/dev-debug}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/auth, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/user-details/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/users, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/auth-status/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mChatManagerController {/chat}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/messages, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/messages, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/messages/last/:count, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/join, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/participants, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/dashboard/stats, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/start, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/leave, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mIstackBuddySlackApiController {/}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/istack-buddy/slack-integration/health, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/istack-buddy/slack-integration/debug, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/istack-buddy/slack-integration/slack/events, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mPublicInterfaceController {/public}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/debug-create, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId/:formId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId/:formId/chat-messages, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId/:formId/chat-messages, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[SlackyAnthropicAgent] [39m[32mSlackyAnthropicAgent constructor called - class loaded[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mSlackyOpenAiAgent constructor called - class loaded[39m
[95m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: ChatRobotParrot v1.0.0[39m
[95m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: AgentRobotParrot v1.0.0[39m
[95m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: RobotChatOpenAI v1.0.0-test-dev[39m
[95m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: RobotChatAnthropic v1.0.0[39m
[95m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackyAnthropicAgent v1.0.0[39m
[95m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: MarvOpenAiAgent v1.0.0[39m
[95m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackyOpenAiAgent v1.0.0[39m
[95m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: AnthropicMarv v1.0.0[39m
[95m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackAgentCoreFormsParrot v1.0.0[39m
[95m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackAgentCoreFormsSsoAutofillParrot v1.0.0[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[RobotService] [39m[32mInitialized 10 robots[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[NestApplication] [39m[32mNest application successfully started[39m[38;5;3m +1ms[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[Bootstrap] [39m[32miStack Buddy Server running on: http://localhost:3500[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [32m    LOG[39m [38;5;3m[Bootstrap] [39m[32mAPI Documentation available at: http://localhost:3500/api[39m
[33m[Nest] 1972031  - [39m08/10/2025, 4:18:00 AM [33m   WARN[39m [38;5;3m[Bootstrap] [39m[33mCORS enabled for ALL origins (temporary)[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:01 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: o1kZfkz2fTcNi2K8AAAB[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:02 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: WEpksI6UjZ0ti2HOAAAD[39m
[95m[Nest] 1972031  - [39m08/10/2025, 4:18:02 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mJoin room data received[39m
[95m[Nest] 1972031  - [39m08/10/2025, 4:18:02 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "data": {
    "conversationId": "bb9a404c-d7f8-48e3-88e7-5824edcee08c",
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[95m[Nest] 1972031  - [39m08/10/2025, 4:18:02 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mApplied default joinData[39m
[95m[Nest] 1972031  - [39m08/10/2025, 4:18:02 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "joinData": {
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[ChatManagerService] Attempting to join conversation: bb9a404c-d7f8-48e3-88e7-5824edcee08c
[ChatManagerService] Available conversations: []
[31m[Nest] 1972031  - [39m08/10/2025, 4:18:02 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError in handleJoinRoom[39m
[31m[Nest] 1972031  - [39m08/10/2025, 4:18:02 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError: Conversation bb9a404c-d7f8-48e3-88e7-5824edcee08c not found[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:02 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: btAPXm8YK-3WNYbAAAAG[39m
[95m[Nest] 1972031  - [39m08/10/2025, 4:18:02 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mJoin room data received[39m
[95m[Nest] 1972031  - [39m08/10/2025, 4:18:02 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "data": {
    "conversationId": "cae98459-9ded-42e1-bef7-31628f344b65",
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[95m[Nest] 1972031  - [39m08/10/2025, 4:18:02 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mApplied default joinData[39m
[95m[Nest] 1972031  - [39m08/10/2025, 4:18:02 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "joinData": {
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[ChatManagerService] Attempting to join conversation: cae98459-9ded-42e1-bef7-31628f344b65
[ChatManagerService] Available conversations: []
[31m[Nest] 1972031  - [39m08/10/2025, 4:18:02 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError in handleJoinRoom[39m
[31m[Nest] 1972031  - [39m08/10/2025, 4:18:02 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError: Conversation cae98459-9ded-42e1-bef7-31628f344b65 not found[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:18:02 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: XZVEl94BePkkl_ytAAAH[39m
[95m[Nest] 1972031  - [39m08/10/2025, 4:18:02 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mJoin room data received[39m
[95m[Nest] 1972031  - [39m08/10/2025, 4:18:02 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "data": {
    "conversationId": "321d767c-fa29-4565-88b7-bf2a9c237bc4",
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[95m[Nest] 1972031  - [39m08/10/2025, 4:18:02 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mApplied default joinData[39m
[95m[Nest] 1972031  - [39m08/10/2025, 4:18:02 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "joinData": {
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[ChatManagerService] Attempting to join conversation: 321d767c-fa29-4565-88b7-bf2a9c237bc4
[ChatManagerService] Available conversations: []
[31m[Nest] 1972031  - [39m08/10/2025, 4:18:02 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError in handleJoinRoom[39m
[31m[Nest] 1972031  - [39m08/10/2025, 4:18:02 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError: Conversation 321d767c-fa29-4565-88b7-bf2a9c237bc4 not found[39m
[32m[Nest] 1972031  - [39m08/10/2025, 4:19:00 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[2J[3J[H[[90m4:19:04 AM[0m] File change detected. Starting incremental compilation...

[[90m4:19:04 AM[0m] Found 0 errors. Watching for file changes.

[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[NestFactory] [39m[32mStarting Nest application...[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mRobotModule dependencies initialized[39m[38;5;3m +8ms[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConversationListServiceModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mLoggerModule dependencies initialized[39m[38;5;3m +0ms[39m
[95m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.constructor] [39m[95mFile-based permissions loaded successfully[39m
[95m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.constructor] [39m[95mData: {
  "userPermissionsCount": 0,
  "groupPermissionsCount": 0,
  "userGroupMembershipsCount": 0
}[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAuthorizationPermissionsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAppModule dependencies initialized[39m[38;5;3m +0ms[39m
[95m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [95m  DEBUG[39m [38;5;3m[AuthenticationService.constructor] [39m[95mAuthentication service initialized with configuration[39m
[95m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [95m  DEBUG[39m [38;5;3m[AuthenticationService.constructor] [39m[95mData: {
  "sessionTimeoutSeconds": 28800
}[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAuthenticationModule dependencies initialized[39m[38;5;3m +3ms[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mGuardsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mIstackBuddySlackApiModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mDevDebugModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mPublicInterfaceModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mChatManagerModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mUserProfileModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "join_room" message[39m[38;5;3m +13ms[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "leave_room" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "send_message" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "typing_start" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "typing_stop" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "get_messages" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "share_robot_message" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "join_dashboard" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "leave_dashboard" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAppController {/}:[39m[38;5;3m +1ms[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAuthenticationController {/auth}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/user, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/profile/me, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mUserProfileController {/user-profiles}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/user-profiles/me, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mDevDebugController {/dev-debug}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/auth, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/user-details/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/users, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/auth-status/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mChatManagerController {/chat}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/messages, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/messages, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/messages/last/:count, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/join, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/participants, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/dashboard/stats, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/start, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/leave, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mIstackBuddySlackApiController {/}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/istack-buddy/slack-integration/health, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/istack-buddy/slack-integration/debug, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/istack-buddy/slack-integration/slack/events, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mPublicInterfaceController {/public}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/debug-create, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId/:formId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId/:formId/chat-messages, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId/:formId/chat-messages, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[SlackyAnthropicAgent] [39m[32mSlackyAnthropicAgent constructor called - class loaded[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mSlackyOpenAiAgent constructor called - class loaded[39m
[95m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: ChatRobotParrot v1.0.0[39m
[95m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: AgentRobotParrot v1.0.0[39m
[95m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: RobotChatOpenAI v1.0.0-test-dev[39m
[95m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: RobotChatAnthropic v1.0.0[39m
[95m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackyAnthropicAgent v1.0.0[39m
[95m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: MarvOpenAiAgent v1.0.0[39m
[95m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackyOpenAiAgent v1.0.0[39m
[95m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: AnthropicMarv v1.0.0[39m
[95m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackAgentCoreFormsParrot v1.0.0[39m
[95m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackAgentCoreFormsSsoAutofillParrot v1.0.0[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[RobotService] [39m[32mInitialized 10 robots[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[NestApplication] [39m[32mNest application successfully started[39m[38;5;3m +0ms[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[Bootstrap] [39m[32miStack Buddy Server running on: http://localhost:3500[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [32m    LOG[39m [38;5;3m[Bootstrap] [39m[32mAPI Documentation available at: http://localhost:3500/api[39m
[33m[Nest] 1972642  - [39m08/10/2025, 4:19:05 AM [33m   WARN[39m [38;5;3m[Bootstrap] [39m[33mCORS enabled for ALL origins (temporary)[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:06 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: pHSIxrjpgWL8iI2fAAAB[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:06 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: HXSsKYCKK85h5sqMAAAD[39m
[95m[Nest] 1972642  - [39m08/10/2025, 4:19:06 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mJoin room data received[39m
[95m[Nest] 1972642  - [39m08/10/2025, 4:19:06 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "data": {
    "conversationId": "321d767c-fa29-4565-88b7-bf2a9c237bc4",
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[95m[Nest] 1972642  - [39m08/10/2025, 4:19:06 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mApplied default joinData[39m
[95m[Nest] 1972642  - [39m08/10/2025, 4:19:06 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "joinData": {
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[ChatManagerService] Attempting to join conversation: 321d767c-fa29-4565-88b7-bf2a9c237bc4
[ChatManagerService] Available conversations: []
[31m[Nest] 1972642  - [39m08/10/2025, 4:19:06 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError in handleJoinRoom[39m
[31m[Nest] 1972642  - [39m08/10/2025, 4:19:06 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError: Conversation 321d767c-fa29-4565-88b7-bf2a9c237bc4 not found[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:06 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: eU_UFNralVCV22uCAAAG[39m
[32m[Nest] 1972642  - [39m08/10/2025, 4:19:06 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: ptDcTDAkBADDRPUdAAAH[39m
[95m[Nest] 1972642  - [39m08/10/2025, 4:19:06 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mJoin room data received[39m
[95m[Nest] 1972642  - [39m08/10/2025, 4:19:06 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "data": {
    "conversationId": "cae98459-9ded-42e1-bef7-31628f344b65",
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[95m[Nest] 1972642  - [39m08/10/2025, 4:19:06 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mApplied default joinData[39m
[95m[Nest] 1972642  - [39m08/10/2025, 4:19:06 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "joinData": {
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[ChatManagerService] Attempting to join conversation: cae98459-9ded-42e1-bef7-31628f344b65
[ChatManagerService] Available conversations: []
[31m[Nest] 1972642  - [39m08/10/2025, 4:19:06 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError in handleJoinRoom[39m
[31m[Nest] 1972642  - [39m08/10/2025, 4:19:06 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError: Conversation cae98459-9ded-42e1-bef7-31628f344b65 not found[39m
[95m[Nest] 1972642  - [39m08/10/2025, 4:19:06 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mJoin room data received[39m
[95m[Nest] 1972642  - [39m08/10/2025, 4:19:06 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "data": {
    "conversationId": "bb9a404c-d7f8-48e3-88e7-5824edcee08c",
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[95m[Nest] 1972642  - [39m08/10/2025, 4:19:06 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mApplied default joinData[39m
[95m[Nest] 1972642  - [39m08/10/2025, 4:19:06 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "joinData": {
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[ChatManagerService] Attempting to join conversation: bb9a404c-d7f8-48e3-88e7-5824edcee08c
[ChatManagerService] Available conversations: []
[31m[Nest] 1972642  - [39m08/10/2025, 4:19:06 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError in handleJoinRoom[39m
[31m[Nest] 1972642  - [39m08/10/2025, 4:19:06 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError: Conversation bb9a404c-d7f8-48e3-88e7-5824edcee08c not found[39m
[2J[3J[H[[90m4:19:22 AM[0m] File change detected. Starting incremental compilation...

[[90m4:19:22 AM[0m] Found 0 errors. Watching for file changes.

[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[NestFactory] [39m[32mStarting Nest application...[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mRobotModule dependencies initialized[39m[38;5;3m +8ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConversationListServiceModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mLoggerModule dependencies initialized[39m[38;5;3m +0ms[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.constructor] [39m[95mFile-based permissions loaded successfully[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.constructor] [39m[95mData: {
  "userPermissionsCount": 0,
  "groupPermissionsCount": 0,
  "userGroupMembershipsCount": 0
}[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAuthorizationPermissionsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAppModule dependencies initialized[39m[38;5;3m +0ms[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [95m  DEBUG[39m [38;5;3m[AuthenticationService.constructor] [39m[95mAuthentication service initialized with configuration[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [95m  DEBUG[39m [38;5;3m[AuthenticationService.constructor] [39m[95mData: {
  "sessionTimeoutSeconds": 28800
}[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAuthenticationModule dependencies initialized[39m[38;5;3m +2ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mGuardsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mIstackBuddySlackApiModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mDevDebugModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mPublicInterfaceModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mChatManagerModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mUserProfileModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "join_room" message[39m[38;5;3m +13ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "leave_room" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "send_message" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "typing_start" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "typing_stop" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "get_messages" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "share_robot_message" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "join_dashboard" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "leave_dashboard" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAppController {/}:[39m[38;5;3m +1ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAuthenticationController {/auth}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/user, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/profile/me, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mUserProfileController {/user-profiles}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/user-profiles/me, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mDevDebugController {/dev-debug}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/auth, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/user-details/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/users, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/auth-status/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mChatManagerController {/chat}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/messages, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/messages, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/messages/last/:count, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/join, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/participants, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/dashboard/stats, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/start, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/leave, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mIstackBuddySlackApiController {/}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/istack-buddy/slack-integration/health, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/istack-buddy/slack-integration/debug, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/istack-buddy/slack-integration/slack/events, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mPublicInterfaceController {/public}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/debug-create, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId/:formId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId/:formId/chat-messages, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId/:formId/chat-messages, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[SlackyAnthropicAgent] [39m[32mSlackyAnthropicAgent constructor called - class loaded[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mSlackyOpenAiAgent constructor called - class loaded[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: ChatRobotParrot v1.0.0[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: AgentRobotParrot v1.0.0[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: RobotChatOpenAI v1.0.0-test-dev[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: RobotChatAnthropic v1.0.0[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackyAnthropicAgent v1.0.0[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: MarvOpenAiAgent v1.0.0[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackyOpenAiAgent v1.0.0[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: AnthropicMarv v1.0.0[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackAgentCoreFormsParrot v1.0.0[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackAgentCoreFormsSsoAutofillParrot v1.0.0[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[RobotService] [39m[32mInitialized 10 robots[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[NestApplication] [39m[32mNest application successfully started[39m[38;5;3m +1ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[Bootstrap] [39m[32miStack Buddy Server running on: http://localhost:3500[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[Bootstrap] [39m[32mAPI Documentation available at: http://localhost:3500/api[39m
[33m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [33m   WARN[39m [38;5;3m[Bootstrap] [39m[33mCORS enabled for ALL origins (temporary)[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:23 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: aDEncVuO-gTRNuhXAAAB[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:24 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: jTYVdP554ZK8YH9eAAAD[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:19:24 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mJoin room data received[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:19:24 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "data": {
    "conversationId": "321d767c-fa29-4565-88b7-bf2a9c237bc4",
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[95m[Nest] 1972739  - [39m08/10/2025, 4:19:24 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mApplied default joinData[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:19:24 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "joinData": {
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[ChatManagerService] Attempting to join conversation: 321d767c-fa29-4565-88b7-bf2a9c237bc4
[ChatManagerService] Available conversations: []
[31m[Nest] 1972739  - [39m08/10/2025, 4:19:24 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError in handleJoinRoom[39m
[31m[Nest] 1972739  - [39m08/10/2025, 4:19:24 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError: Conversation 321d767c-fa29-4565-88b7-bf2a9c237bc4 not found[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:24 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: 7P0NUX83m3wc2XtkAAAG[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:19:24 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mJoin room data received[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:19:24 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "data": {
    "conversationId": "bb9a404c-d7f8-48e3-88e7-5824edcee08c",
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[95m[Nest] 1972739  - [39m08/10/2025, 4:19:24 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mApplied default joinData[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:19:24 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "joinData": {
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[ChatManagerService] Attempting to join conversation: bb9a404c-d7f8-48e3-88e7-5824edcee08c
[ChatManagerService] Available conversations: []
[31m[Nest] 1972739  - [39m08/10/2025, 4:19:24 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError in handleJoinRoom[39m
[31m[Nest] 1972739  - [39m08/10/2025, 4:19:24 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError: Conversation bb9a404c-d7f8-48e3-88e7-5824edcee08c not found[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:19:24 AM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: lbtcYsXnk0RyG7sWAAAH[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:19:24 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mJoin room data received[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:19:24 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "data": {
    "conversationId": "cae98459-9ded-42e1-bef7-31628f344b65",
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[95m[Nest] 1972739  - [39m08/10/2025, 4:19:24 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mApplied default joinData[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:19:24 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "joinData": {
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[ChatManagerService] Attempting to join conversation: cae98459-9ded-42e1-bef7-31628f344b65
[ChatManagerService] Available conversations: []
[31m[Nest] 1972739  - [39m08/10/2025, 4:19:24 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError in handleJoinRoom[39m
[31m[Nest] 1972739  - [39m08/10/2025, 4:19:24 AM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError: Conversation cae98459-9ded-42e1-bef7-31628f344b65 not found[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:20:09 AM [32m    LOG[39m [38;5;3m[SlackSignatureGuard] [39m[32mSlack signature verified successfully[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:20:09 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32m[05d08230-b667-4ea1-b2d5-10d5465e1423] Incoming POST /istack-buddy/slack-integration/slack/events[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:20:09 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32mData: {
  "userAgent": "Slackbot 1.0 (+https://api.slack.com/robots)",
  "ip": "::ffff:127.0.0.1",
  "params": {},
  "query": {}
}[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:20:09 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mReceived app mention event[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:20:09 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mDEBUG: Event text: "<@U092RRN555X> calculations observations for  6201623", trimmed: "<@U092RRN555X> calculations observations for  6201623"[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:20:09 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mAdding reaction :thinking_face: to message 1754817607.055309 in channel C091Y5UNA1M[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:20:10 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mAdded reaction :thinking_face: to message in channel C091Y5UNA1M[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:20:10 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mBroadcasting dashboard event: conversation_created[39m
{
  allConversationMessages: [
    {
      id: '8daa5343-0440-4250-9ec6-ae02738f5a0e',
      content: [Object],
      conversationId: 'd24107f8-cd28-46c4-908f-1419ccd0e85c',
      fromUserId: 'cx-slack-robot',
      fromRole: 'cx-customer',
      toRole: 'cx-agent',
      messageType: 'text',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T09:20:10.285Z,
      updatedAt: 2025-08-10T09:20:10.285Z
    }
  ]
}
[95m[Nest] 1972739  - [39m08/10/2025, 4:20:10 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mBroadcasting dashboard event: conversation_updated[39m
Gateway: Broadcasting new_message to conversation d24107f8-cd28-46c4-908f-1419ccd0e85c: {
  message: {
    id: '8daa5343-0440-4250-9ec6-ae02738f5a0e',
    content: {
      type: 'text/plain',
      payload: '<@U092RRN555X> calculations observations for  6201623'
    },
    conversationId: 'd24107f8-cd28-46c4-908f-1419ccd0e85c',
    fromUserId: 'cx-slack-robot',
    fromRole: 'cx-customer',
    toRole: 'cx-agent',
    messageType: 'text',
    threadId: undefined,
    originalMessageId: undefined,
    createdAt: 2025-08-10T09:20:10.285Z,
    updatedAt: 2025-08-10T09:20:10.285Z
  },
  timestamp: '2025-08-10T09:20:10.285Z'
}
Gateway: Broadcast completed
[32m[Nest] 1972739  - [39m08/10/2025, 4:20:10 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mMessage 1: [cx-customer] [object Object][39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:20:10 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mBuilding OpenAI message history:[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:20:10 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mObject:[39m
{
  "historyLength": 0,
  "historyRoles": [],
  "currentMessage": "<@U092RRN555X> calculations observations for  6201623"
}

[32m[Nest] 1972739  - [39m08/10/2025, 4:20:10 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mAdding current message: <@U092RRN555X> calculations observations for  6201...[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:20:10 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mConversation being sent to robot:[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:20:10 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
[
  {
    "author": "user",
    "content": "<@U092RRN555X> calculations observations for  6201623..."
  }
]

[95m[Nest] 1972739  - [39m08/10/2025, 4:20:11 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mTool call completion detected[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:20:11 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormCalculationValidation",
  "finishReason": "tool_calls",
  "functionArgs": "{\"formId\":\"6201623\"}"
}

[95m[Nest] 1972739  - [39m08/10/2025, 4:20:11 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mExecuting function call[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:20:11 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormCalculationValidation",
  "functionArgs": {
    "formId": "6201623"
  }
}

[95m[Nest] 1972739  - [39m08/10/2025, 4:20:11 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mChecking onFullMessageReceived callback[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:20:11 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "hasCallback": true,
  "callbackType": "function"
}

[95m[Nest] 1972739  - [39m08/10/2025, 4:20:11 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mCalling onFullMessageReceived for tool start[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:20:11 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormCalculationValidation",
  "message": "Starting execution of fsRestrictedApiFormCalculationValidation..."
}

[95m[Nest] 1972739  - [39m08/10/2025, 4:20:11 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mExecuting tool: fsRestrictedApiFormCalculationValidation[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:20:11 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "toolArgs": {
    "formId": "6201623"
  }
}

[32m[Nest] 1972739  - [39m08/10/2025, 4:20:11 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mTool status updated: fsRestrictedApiFormCalculationValidation -> executing[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:20:11 AM [95m  DEBUG[39m [38;5;3m[MarvToolCall] [39m[95mMarv tool call log[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:20:11 AM [95m  DEBUG[39m [38;5;3m[MarvToolCall] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormCalculationValidation",
  "fnParamsJson": {
    "formId": "6201623"
  }
}

[32m[Nest] 1972739  - [39m08/10/2025, 4:20:13 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mTool fsRestrictedApiFormCalculationValidation result: "[object Object]"[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:20:13 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mTool status updated: fsRestrictedApiFormCalculationValidation -> completed[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:20:13 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mTool execution completed[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:20:13 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "toolName": "fsRestrictedApiFormCalculationValidation",
  "resultType": "object",
  "isMarvTool": true
}

ObservationMakerViewer.fromObservationResults called with: {
  hasResult: true,
  hasResponse: true,
  resultType: 'object',
  responseType: 'object'
}
extractLogItems called with: {
  responseType: 'object',
  isArray: false,
  hasLogItems: true,
  hasObservations: false,
  hasData: false,
  responseKeys: [ 'isObservationTrue', 'logItems' ]
}
Extracting from response.logItems, length: 34
Final log items count: 34
Extracted log items: {
  count: 34,
  logItems: '[\n' +
    '  {\n' +
    '    "subjectId": "183944809",\n' +
    '    "logLevel": "warn",\n' +
    '    "subjectType": "field",\n' +
    '    "observationClass": "ObservationMakerCalculationValidation",\n' +
    '    "observationMakerClass": "ObservationMakerCalculationValidation",\n' +
    '    "message": "Field Calculation Validation",\n' +
    `    "messageSecondary": "Circular reference detected. This subject's value is defined using the subject's own value. \\n            This field id: '183944809', attempted to expression from field: '183944810'",\n` +
    '    "relatedEntityIds": [],\n' +
    '    "isObservationTrue": true,\n' +
    '    "additionalDetails": {\n' +
    '      "dependencyChainFieldIds": [\n' +
    '        {\n' +
    '          "directOwnerFieldId": "183944810",\n' +
    '          "nodeId": "_root_:0:1"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "183944811",\n' +
    '          "nodeId": "_root_:0"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "183944809",\n' +
    '          "nodeId": "_root_"\n' +
    '        }\n' +
    '      ],\n' +
    `      "message": "Circular reference detected. This subject's value is defined using the subject's own value. \\n            This field id: '183944809', attempted to expression from field: '183944810'"\n` +
    '    }\n' +
    '  },\n' +
    '  {\n' +
    '    "subjectId": "183944810",\n' +
    '    "logLevel": "warn",\n' +
    '    "subjectType": "field",\n' +
    '    "observationClass": "ObservationMakerCalculationValidation",\n' +
    '    "observationMakerClass": "ObservationMakerCalculationValidation",\n' +
    '    "message": "Field Calculation Validation",\n' +
    `    "messageSecondary": "Circular reference detected. This subject's value is defined using the subject's own value. \\n            This field id: '183944810', attempted to expression from field: '183944811'",\n` +
    '    "relatedEntityIds": [],\n' +
    '    "isObservationTrue": true,\n' +
    '    "additionalDetails": {\n' +
    '      "dependencyChainFieldIds": [\n' +
    '        {\n' +
    '          "directOwnerFieldId": "183944811",\n' +
    '          "nodeId": "_root_:0:1"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "183944809",\n' +
    '          "nodeId": "_root_:0"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "183944810",\n' +
    '          "nodeId": "_root_"\n' +
    '        }\n' +
    '      ],\n' +
    `      "message": "Circular reference detected. This subject's value is defined using the subject's own value. \\n            This field id: '183944810', attempted to expression from field: '183944811'"\n` +
    '    }\n' +
    '  }\n' +
    ']'
}
[95m[Nest] 1972739  - [39m08/10/2025, 4:20:13 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mCalling onFullMessageReceived for tool completion[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:20:13 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormCalculationValidation",
  "message": "Finished running fsRestrictedApiFormCalculationValidation. Analysis complete."
}

[32m[Nest] 1972739  - [39m08/10/2025, 4:20:13 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mBuilding OpenAI message history:[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:20:13 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mObject:[39m
{
  "historyLength": 1,
  "historyRoles": [
    {
      "fromRole": "cx-customer",
      "content": "<@U092RRN555X> calculations observations for  6201..."
    }
  ],
  "currentMessage": "<@U092RRN555X> calculations observations for  6201623"
}

[32m[Nest] 1972739  - [39m08/10/2025, 4:20:13 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mProcessing message with role: cx-customer[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:20:13 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mAdding customer message: <@U092RRN555X> calculations observations for  6201...[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:20:13 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mCurrent message already in history, skipping[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:20:13 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mConversation being sent to robot:[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:20:13 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
[
  {
    "author": "user",
    "content": "<@U092RRN555X> calculations observations for  6201623..."
  }
]

[32m[Nest] 1972739  - [39m08/10/2025, 4:20:13 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32m[05d08230-b667-4ea1-b2d5-10d5465e1423] Response POST /istack-buddy/slack-integration/slack/events 200 - 3371ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:20:13 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32mData: {
  "statusCode": 200,
  "elapsed": "3371ms"
}[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:20:13 AM [32m    LOG[39m [38;5;3m[SlackSignatureGuard] [39m[32mSlack signature verified successfully[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:20:13 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32m[d39e9334-f560-48b3-9f4a-8be1543b909e] Incoming POST /istack-buddy/slack-integration/slack/events[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:20:13 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32mData: {
  "userAgent": "Slackbot 1.0 (+https://api.slack.com/robots)",
  "ip": "::ffff:127.0.0.1",
  "params": {},
  "query": {}
}[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:20:13 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mReceived app mention event[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:20:13 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mDuplicate event detected: Ev09AGUHJ9NC[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:20:13 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32m[d39e9334-f560-48b3-9f4a-8be1543b909e] Response POST /istack-buddy/slack-integration/slack/events 200 - 2ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:20:13 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32mData: {
  "statusCode": 200,
  "elapsed": "2ms"
}[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:20:14 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mTool call completion detected[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:20:14 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormCalculationValidation",
  "finishReason": "tool_calls",
  "functionArgs": "{\"formId\":\"6201623\"}"
}

[95m[Nest] 1972739  - [39m08/10/2025, 4:20:14 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mExecuting function call[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:20:14 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormCalculationValidation",
  "functionArgs": {
    "formId": "6201623"
  }
}

[95m[Nest] 1972739  - [39m08/10/2025, 4:20:14 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mChecking onFullMessageReceived callback[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:20:14 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "hasCallback": true,
  "callbackType": "function"
}

[95m[Nest] 1972739  - [39m08/10/2025, 4:20:14 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mCalling onFullMessageReceived for tool start[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:20:14 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormCalculationValidation",
  "message": "Starting execution of fsRestrictedApiFormCalculationValidation..."
}

[95m[Nest] 1972739  - [39m08/10/2025, 4:20:14 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95monFullMessageReceived called in multi-part response[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:20:14 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "contentLength": 65,
  "contentType": "text/plain"
}

[95m[Nest] 1972739  - [39m08/10/2025, 4:20:14 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mSending intermediate message via delayedMessageCallback[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:20:14 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "content": "Starting execution of fsRestrictedApiFormCalculationValidation......",
  "contentType": "text/plain"
}

{
  allConversationMessages: [
    {
      id: '8daa5343-0440-4250-9ec6-ae02738f5a0e',
      content: [Object],
      conversationId: 'd24107f8-cd28-46c4-908f-1419ccd0e85c',
      fromUserId: 'cx-slack-robot',
      fromRole: 'cx-customer',
      toRole: 'cx-agent',
      messageType: 'text',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T09:20:10.285Z,
      updatedAt: 2025-08-10T09:20:10.285Z
    },
    {
      id: 'e472968b-657b-40be-bfa1-84e178d67945',
      content: [Object],
      conversationId: 'd24107f8-cd28-46c4-908f-1419ccd0e85c',
      fromUserId: 'cx-slack-robot',
      fromRole: 'robot',
      toRole: 'cx-customer',
      messageType: 'robot',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T09:20:14.232Z,
      updatedAt: 2025-08-10T09:20:14.232Z
    }
  ]
}
[95m[Nest] 1972739  - [39m08/10/2025, 4:20:14 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mBroadcasting dashboard event: conversation_updated[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:20:14 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mExecuting tool: fsRestrictedApiFormCalculationValidation[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:20:14 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "toolArgs": {
    "formId": "6201623"
  }
}

[32m[Nest] 1972739  - [39m08/10/2025, 4:20:14 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mTool status updated: fsRestrictedApiFormCalculationValidation -> executing[39m
Gateway: Broadcasting new_message to conversation d24107f8-cd28-46c4-908f-1419ccd0e85c: {
  message: {
    id: 'e472968b-657b-40be-bfa1-84e178d67945',
    content: {
      type: 'text/plain',
      payload: 'Starting execution of fsRestrictedApiFormCalculationValidation...'
    },
    conversationId: 'd24107f8-cd28-46c4-908f-1419ccd0e85c',
    fromUserId: 'cx-slack-robot',
    fromRole: 'robot',
    toRole: 'cx-customer',
    messageType: 'robot',
    threadId: undefined,
    originalMessageId: undefined,
    createdAt: 2025-08-10T09:20:14.232Z,
    updatedAt: 2025-08-10T09:20:14.232Z
  },
  timestamp: '2025-08-10T09:20:14.232Z'
}
Gateway: Broadcast completed
[95m[Nest] 1972739  - [39m08/10/2025, 4:20:14 AM [95m  DEBUG[39m [38;5;3m[MarvToolCall] [39m[95mMarv tool call log[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:20:14 AM [95m  DEBUG[39m [38;5;3m[MarvToolCall] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormCalculationValidation",
  "fnParamsJson": {
    "formId": "6201623"
  }
}

[32m[Nest] 1972739  - [39m08/10/2025, 4:20:14 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mMessage sent to Slack channel C091Y5UNA1M[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:20:14 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mTool fsRestrictedApiFormCalculationValidation result: "[object Object]"[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:20:14 AM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mTool status updated: fsRestrictedApiFormCalculationValidation -> completed[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:20:14 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mTool execution completed[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:20:14 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "toolName": "fsRestrictedApiFormCalculationValidation",
  "resultType": "object",
  "isMarvTool": true
}

ObservationMakerViewer.fromObservationResults called with: {
  hasResult: true,
  hasResponse: true,
  resultType: 'object',
  responseType: 'object'
}
extractLogItems called with: {
  responseType: 'object',
  isArray: false,
  hasLogItems: true,
  hasObservations: false,
  hasData: false,
  responseKeys: [ 'isObservationTrue', 'logItems' ]
}
Extracting from response.logItems, length: 34
Final log items count: 34
Extracted log items: {
  count: 34,
  logItems: '[\n' +
    '  {\n' +
    '    "subjectId": "183944809",\n' +
    '    "logLevel": "warn",\n' +
    '    "subjectType": "field",\n' +
    '    "observationClass": "ObservationMakerCalculationValidation",\n' +
    '    "observationMakerClass": "ObservationMakerCalculationValidation",\n' +
    '    "message": "Field Calculation Validation",\n' +
    `    "messageSecondary": "Circular reference detected. This subject's value is defined using the subject's own value. \\n            This field id: '183944809', attempted to expression from field: '183944810'",\n` +
    '    "relatedEntityIds": [],\n' +
    '    "isObservationTrue": true,\n' +
    '    "additionalDetails": {\n' +
    '      "dependencyChainFieldIds": [\n' +
    '        {\n' +
    '          "directOwnerFieldId": "183944810",\n' +
    '          "nodeId": "_root_:0:1"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "183944811",\n' +
    '          "nodeId": "_root_:0"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "183944809",\n' +
    '          "nodeId": "_root_"\n' +
    '        }\n' +
    '      ],\n' +
    `      "message": "Circular reference detected. This subject's value is defined using the subject's own value. \\n            This field id: '183944809', attempted to expression from field: '183944810'"\n` +
    '    }\n' +
    '  },\n' +
    '  {\n' +
    '    "subjectId": "183944810",\n' +
    '    "logLevel": "warn",\n' +
    '    "subjectType": "field",\n' +
    '    "observationClass": "ObservationMakerCalculationValidation",\n' +
    '    "observationMakerClass": "ObservationMakerCalculationValidation",\n' +
    '    "message": "Field Calculation Validation",\n' +
    `    "messageSecondary": "Circular reference detected. This subject's value is defined using the subject's own value. \\n            This field id: '183944810', attempted to expression from field: '183944811'",\n` +
    '    "relatedEntityIds": [],\n' +
    '    "isObservationTrue": true,\n' +
    '    "additionalDetails": {\n' +
    '      "dependencyChainFieldIds": [\n' +
    '        {\n' +
    '          "directOwnerFieldId": "183944811",\n' +
    '          "nodeId": "_root_:0:1"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "183944809",\n' +
    '          "nodeId": "_root_:0"\n' +
    '        },\n' +
    '        {\n' +
    '          "directOwnerFieldId": "183944810",\n' +
    '          "nodeId": "_root_"\n' +
    '        }\n' +
    '      ],\n' +
    `      "message": "Circular reference detected. This subject's value is defined using the subject's own value. \\n            This field id: '183944810', attempted to expression from field: '183944811'"\n` +
    '    }\n' +
    '  }\n' +
    ']'
}
[95m[Nest] 1972739  - [39m08/10/2025, 4:20:14 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mCalling onFullMessageReceived for tool completion[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:20:14 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "functionName": "fsRestrictedApiFormCalculationValidation",
  "message": "Finished running fsRestrictedApiFormCalculationValidation. Analysis complete."
}

[95m[Nest] 1972739  - [39m08/10/2025, 4:20:14 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95monFullMessageReceived called in multi-part response[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:20:14 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "contentLength": 77,
  "contentType": "text/plain"
}

[95m[Nest] 1972739  - [39m08/10/2025, 4:20:14 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mSending intermediate message via delayedMessageCallback[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:20:14 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "content": "Finished running fsRestrictedApiFormCalculationValidation. Analysis complete....",
  "contentType": "text/plain"
}

{
  allConversationMessages: [
    {
      id: '8daa5343-0440-4250-9ec6-ae02738f5a0e',
      content: [Object],
      conversationId: 'd24107f8-cd28-46c4-908f-1419ccd0e85c',
      fromUserId: 'cx-slack-robot',
      fromRole: 'cx-customer',
      toRole: 'cx-agent',
      messageType: 'text',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T09:20:10.285Z,
      updatedAt: 2025-08-10T09:20:10.285Z
    },
    {
      id: 'e472968b-657b-40be-bfa1-84e178d67945',
      content: [Object],
      conversationId: 'd24107f8-cd28-46c4-908f-1419ccd0e85c',
      fromUserId: 'cx-slack-robot',
      fromRole: 'robot',
      toRole: 'cx-customer',
      messageType: 'robot',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T09:20:14.232Z,
      updatedAt: 2025-08-10T09:20:14.232Z
    },
    {
      id: '841e26a6-d097-414c-80bc-225e1856e088',
      content: [Object],
      conversationId: 'd24107f8-cd28-46c4-908f-1419ccd0e85c',
      fromUserId: 'cx-slack-robot',
      fromRole: 'robot',
      toRole: 'cx-customer',
      messageType: 'robot',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T09:20:14.767Z,
      updatedAt: 2025-08-10T09:20:14.767Z
    }
  ]
}
[95m[Nest] 1972739  - [39m08/10/2025, 4:20:14 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mBroadcasting dashboard event: conversation_updated[39m
Gateway: Broadcasting new_message to conversation d24107f8-cd28-46c4-908f-1419ccd0e85c: {
  message: {
    id: '841e26a6-d097-414c-80bc-225e1856e088',
    content: {
      type: 'text/plain',
      payload: 'Finished running fsRestrictedApiFormCalculationValidation. Analysis complete.'
    },
    conversationId: 'd24107f8-cd28-46c4-908f-1419ccd0e85c',
    fromUserId: 'cx-slack-robot',
    fromRole: 'robot',
    toRole: 'cx-customer',
    messageType: 'robot',
    threadId: undefined,
    originalMessageId: undefined,
    createdAt: 2025-08-10T09:20:14.767Z,
    updatedAt: 2025-08-10T09:20:14.767Z
  },
  timestamp: '2025-08-10T09:20:14.767Z'
}
Gateway: Broadcast completed
[95m[Nest] 1972739  - [39m08/10/2025, 4:20:14 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95monStreamFinished called[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:20:14 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
{
  "contentLength": 6564,
  "authorRole": "assistant",
  "contentPreview": "\n🔍 *Calculation Validation Results*\n\n📊 *Summary:* 34 total log items\n• ❌ 0 errors\n• ⚠️ 30 warnings..."
}

[95m[Nest] 1972739  - [39m08/10/2025, 4:20:14 AM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mCalling delayedMessageCallback with finished message[39m
{
  allConversationMessages: [
    {
      id: '8daa5343-0440-4250-9ec6-ae02738f5a0e',
      content: [Object],
      conversationId: 'd24107f8-cd28-46c4-908f-1419ccd0e85c',
      fromUserId: 'cx-slack-robot',
      fromRole: 'cx-customer',
      toRole: 'cx-agent',
      messageType: 'text',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T09:20:10.285Z,
      updatedAt: 2025-08-10T09:20:10.285Z
    },
    {
      id: 'e472968b-657b-40be-bfa1-84e178d67945',
      content: [Object],
      conversationId: 'd24107f8-cd28-46c4-908f-1419ccd0e85c',
      fromUserId: 'cx-slack-robot',
      fromRole: 'robot',
      toRole: 'cx-customer',
      messageType: 'robot',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T09:20:14.232Z,
      updatedAt: 2025-08-10T09:20:14.232Z
    },
    {
      id: '841e26a6-d097-414c-80bc-225e1856e088',
      content: [Object],
      conversationId: 'd24107f8-cd28-46c4-908f-1419ccd0e85c',
      fromUserId: 'cx-slack-robot',
      fromRole: 'robot',
      toRole: 'cx-customer',
      messageType: 'robot',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T09:20:14.767Z,
      updatedAt: 2025-08-10T09:20:14.767Z
    },
    {
      id: 'c59c7659-213f-4fe7-9bc9-a48674ee8992',
      content: [Object],
      conversationId: 'd24107f8-cd28-46c4-908f-1419ccd0e85c',
      fromUserId: 'cx-slack-robot',
      fromRole: 'robot',
      toRole: 'cx-customer',
      messageType: 'robot',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-10T09:20:14.770Z,
      updatedAt: 2025-08-10T09:20:14.770Z
    }
  ]
}
[95m[Nest] 1972739  - [39m08/10/2025, 4:20:14 AM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mBroadcasting dashboard event: conversation_updated[39m
Gateway: Broadcasting new_message to conversation d24107f8-cd28-46c4-908f-1419ccd0e85c: {
  message: {
    id: 'c59c7659-213f-4fe7-9bc9-a48674ee8992',
    content: {
      type: 'text/plain',
      payload: '\n' +
        '🔍 *Calculation Validation Results*\n' +
        '\n' +
        '📊 *Summary:* 34 total log items\n' +
        '• ❌ 0 errors\n' +
        '• ⚠️ 30 warnings\n' +
        '• ℹ️ 4 info\n' +
        '• 🔍 0 debug\n' +
        '\n' +
        '⚠️ *Found 30 issue(s):*\n' +
        '\n' +
        '⚠️ *WARNING* (1/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '183944809', attempted to e...\n" +
        '• *Subject ID:* `183944809`\n' +
        '\n' +
        '⚠️ *WARNING* (2/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '183944810', attempted to e...\n" +
        '• *Subject ID:* `183944810`\n' +
        '\n' +
        '⚠️ *WARNING* (3/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '183944811', attempted to e...\n" +
        '• *Subject ID:* `183944811`\n' +
        '\n' +
        '⚠️ *WARNING* (4/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '183944851', attempted to e...\n" +
        '• *Subject ID:* `183944824`\n' +
        '\n' +
        '⚠️ *WARNING* (5/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '183944850', attempted to e...\n" +
        '• *Subject ID:* `183944850`\n' +
        '\n' +
        '⚠️ *WARNING* (6/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '183944851', attempted to e...\n" +
        '• *Subject ID:* `183944851`\n' +
        '\n' +
        '⚠️ *WARNING* (7/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '183944855', attempted to e...\n" +
        '• *Subject ID:* `183944855`\n' +
        '\n' +
        '⚠️ *WARNING* (8/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '183944855', attempted to e...\n" +
        '• *Subject ID:* `183944855`\n' +
        '\n' +
        '⚠️ *WARNING* (9/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '183944855', attempted to e...\n" +
        '• *Subject ID:* `183944856`\n' +
        '\n' +
        '⚠️ *WARNING* (10/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '183944856', attempted to e...\n" +
        '• *Subject ID:* `183944856`\n' +
        '\n' +
        '⚠️ *WARNING* (11/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '183944857', attempted to e...\n" +
        '• *Subject ID:* `183944857`\n' +
        '\n' +
        '⚠️ *WARNING* (12/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '183944855', attempted to e...\n" +
        '• *Subject ID:* `183944857`\n' +
        '\n' +
        '⚠️ *WARNING* (13/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128831', attempted to e...\n" +
        '• *Subject ID:* `184128788`\n' +
        '\n' +
        '⚠️ *WARNING* (14/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128791', attempted to e...\n" +
        '• *Subject ID:* `184128791`\n' +
        '\n' +
        '⚠️ *WARNING* (15/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128831', attempted to e...\n" +
        '• *Subject ID:* `184128794`\n' +
        '\n' +
        '⚠️ *WARNING* (16/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128831', attempted to e...\n" +
        '• *Subject ID:* `184128797`\n' +
        '\n' +
        '⚠️ *WARNING* (17/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128823', attempted to e...\n" +
        '• *Subject ID:* `184128819`\n' +
        '\n' +
        '⚠️ *WARNING* (18/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128824', attempted to e...\n" +
        '• *Subject ID:* `184128820`\n' +
        '\n' +
        '⚠️ *WARNING* (19/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128822', attempted to e...\n" +
        '• *Subject ID:* `184128821`\n' +
        '\n' +
        '⚠️ *WARNING* (20/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128822', attempted to e...\n" +
        '• *Subject ID:* `184128822`\n' +
        '\n' +
        '⚠️ *WARNING* (21/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128823', attempted to e...\n" +
        '• *Subject ID:* `184128823`\n' +
        '\n' +
        '⚠️ *WARNING* (22/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128824', attempted to e...\n" +
        '• *Subject ID:* `184128824`\n' +
        '\n' +
        '⚠️ *WARNING* (23/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128823', attempted to e...\n" +
        '• *Subject ID:* `184128825`\n' +
        '\n' +
        '⚠️ *WARNING* (24/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128824', attempted to e...\n" +
        '• *Subject ID:* `184128826`\n' +
        '\n' +
        '⚠️ *WARNING* (25/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128822', attempted to e...\n" +
        '• *Subject ID:* `184128827`\n' +
        '\n' +
        '⚠️ *WARNING* (26/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128823', attempted to e...\n" +
        '• *Subject ID:* `184128828`\n' +
        '\n' +
        '⚠️ *WARNING* (27/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128824', attempted to e...\n" +
        '• *Subject ID:* `184128829`\n' +
        '\n' +
        '⚠️ *WARNING* (28/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128822', attempted to e...\n" +
        '• *Subject ID:* `184128830`\n' +
        '\n' +
        '⚠️ *WARNING* (29/30)\n' +
        "• *Message:* Circular reference detected. This subject's value is defined using the subject's own value. \n" +
        "            This field id: '184128831', attempted to e...\n" +
        '• *Subject ID:* `184128831`\n' +
        '\n' +
        '⚠️ *WARNING* (30/30)\n' +
        `• *Message:* Shallow Tree Error of type: 'malformed-expression;, JSON: {"directOwnerFieldId":"185526622","isError":true,"errorType":"malformed-expression","calc...\n` +
        '• *Subject ID:* `185526622`\n' +
        '\n' +
        '\n'
    },
    conversationId: 'd24107f8-cd28-46c4-908f-1419ccd0e85c',
    fromUserId: 'cx-slack-robot',
    fromRole: 'robot',
    toRole: 'cx-customer',
    messageType: 'robot',
    threadId: undefined,
    originalMessageId: undefined,
    createdAt: 2025-08-10T09:20:14.770Z,
    updatedAt: 2025-08-10T09:20:14.770Z
  },
  timestamp: '2025-08-10T09:20:14.770Z'
}
Gateway: Broadcast completed
[32m[Nest] 1972739  - [39m08/10/2025, 4:20:15 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mMessage sent to Slack channel C091Y5UNA1M[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:20:15 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mMessage sent to Slack channel C091Y5UNA1M[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:20:23 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:20:32 AM [32m    LOG[39m [38;5;3m[SlackSignatureGuard] [39m[32mSlack signature verified successfully[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:20:32 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32m[f6c146c0-2edf-4a4f-a4b2-9d99dbb265db] Incoming POST /istack-buddy/slack-integration/slack/events[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:20:32 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32mData: {
  "userAgent": "Slackbot 1.0 (+https://api.slack.com/robots)",
  "ip": "::ffff:127.0.0.1",
  "params": {},
  "query": {}
}[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:20:32 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mReceived app mention event[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:20:32 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mDEBUG: Event text: "<@U092RRN555X> /marv-session", trimmed: "<@U092RRN555X> /marv-session"[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:20:32 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mReceived /marv-session command via app mention[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:20:32 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mDEBUG: Slack conversationId: 1754817607.055309[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:20:32 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mDEBUG: Conversation record: {"internalConversationId":"d24107f8-cd28-46c4-908f-1419ccd0e85c","slackConversationId":"1754817607.055309"}[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:20:32 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mDEBUG: Internal conversation ID: d24107f8-cd28-46c4-908f-1419ccd0e85c[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:20:32 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.addUser] [39m[95mUser added successfully[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:20:32 AM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.addUser] [39m[95mData: {
  "userId": "d24107f8-cd28-46c4-908f-1419ccd0e85c",
  "ownPermissionsCount": 2,
  "groupMembershipsCount": 0
}[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:20:32 AM [32m    LOG[39m [38;5;3m[UserProfileService.addTemporaryUser] [39m[32mTemporary user profile added[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:20:32 AM [32m    LOG[39m [38;5;3m[UserProfileService.addTemporaryUser] [39m[32mData: {
  "userId": "d24107f8-cd28-46c4-908f-1419ccd0e85c"
}[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:20:32 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mExtracted potential form ID 6201623 from conversation message[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:20:32 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mMessage sent to Slack channel C091Y5UNA1M[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:20:32 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32m[f6c146c0-2edf-4a4f-a4b2-9d99dbb265db] Response POST /istack-buddy/slack-integration/slack/events 200 - 512ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:20:32 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32mData: {
  "statusCode": 200,
  "elapsed": "512ms"
}[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:20:34 AM [95m  DEBUG[39m [95mJWT token from query parameter validated, allowing controller to handle redirect[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:20:34 AM [95m  DEBUG[39m [95mObject:[39m
{
  "userId": "d24107f8-cd28-46c4-908f-1419ccd0e85c",
  "endpoint": "/public/form-marv/d24107f8-cd28-46c4-908f-1419ccd0e85c/6201623?jwtToken=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJkMjQxMDdmOC1jZDI4LTQ2YzQtOTA4Zi0xNDE5Y2NkMGU4NWMiLCJlbWFpbCI6ImZvcm0tbWFydi0xNzU0ODE3NjMyNDY3QGV4YW1wbGUuY29tIiwidXNlcm5hbWUiOiJkMjQxMDdmOC1jZDI4LTQ2YzQtOTA4Zi0xNDE5Y2NkMGU4NWMiLCJhY2NvdW50VHlwZSI6IlRFTVBPUkFSWSIsImlhdCI6MTc1NDgxNzYzMiwiZXhwIjoxNzU0ODQ2NDMyfQ.ILm21yxdt_Wi9lnw0ymFN2et3BPbeorp8Kaa4BYmbtE",
  "method": "GET",
  "correlationId": "unknown"
}

[32m[Nest] 1972739  - [39m08/10/2025, 4:20:34 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32m[3ee25868-3944-4b9e-bc77-f559a1c25f96] Incoming GET /public/form-marv/d24107f8-cd28-46c4-908f-1419ccd0e85c/6201623?jwtToken=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJkMjQxMDdmOC1jZDI4LTQ2YzQtOTA4Zi0xNDE5Y2NkMGU4NWMiLCJlbWFpbCI6ImZvcm0tbWFydi0xNzU0ODE3NjMyNDY3QGV4YW1wbGUuY29tIiwidXNlcm5hbWUiOiJkMjQxMDdmOC1jZDI4LTQ2YzQtOTA4Zi0xNDE5Y2NkMGU4NWMiLCJhY2NvdW50VHlwZSI6IlRFTVBPUkFSWSIsImlhdCI6MTc1NDgxNzYzMiwiZXhwIjoxNzU0ODQ2NDMyfQ.ILm21yxdt_Wi9lnw0ymFN2et3BPbeorp8Kaa4BYmbtE[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:20:34 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32mData: {
  "userAgent": "Slackbot-LinkExpanding 1.0 (+https://api.slack.com/robots)",
  "ip": "::ffff:127.0.0.1",
  "params": {
    "conversationId": "d24107f8-cd28-46c4-908f-1419ccd0e85c",
    "formId": "6201623"
  },
  "query": {
    "jwtToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJkMjQxMDdmOC1jZDI4LTQ2YzQtOTA4Zi0xNDE5Y2NkMGU4NWMiLCJlbWFpbCI6ImZvcm0tbWFydi0xNzU0ODE3NjMyNDY3QGV4YW1wbGUuY29tIiwidXNlcm5hbWUiOiJkMjQxMDdmOC1jZDI4LTQ2YzQtOTA4Zi0xNDE5Y2NkMGU4NWMiLCJhY2NvdW50VHlwZSI6IlRFTVBPUkFSWSIsImlhdCI6MTc1NDgxNzYzMiwiZXhwIjoxNzU0ODQ2NDMyfQ.ILm21yxdt_Wi9lnw0ymFN2et3BPbeorp8Kaa4BYmbtE"
  }
}[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:20:34 AM [32m    LOG[39m [38;5;3m[AuthenticationService.authenticateUser] [39m[32mJWT authentication attempt started[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:20:34 AM [32m    LOG[39m [38;5;3m[AuthenticationService.authenticateUser] [39m[32mData: {
  "userId": "d24107f8-cd28-46c4-908f-1419ccd0e85c",
  "hasToken": true
}[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:20:34 AM [32m    LOG[39m [38;5;3m[AuthenticationService.authenticateUser] [39m[32mJWT authentication successful[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:20:34 AM [32m    LOG[39m [38;5;3m[AuthenticationService.authenticateUser] [39m[32mData: {
  "userId": "d24107f8-cd28-46c4-908f-1419ccd0e85c",
  "email": "form-marv-1754817632467@example.com"
}[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:20:34 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32m[3ee25868-3944-4b9e-bc77-f559a1c25f96] Response GET /public/form-marv/d24107f8-cd28-46c4-908f-1419ccd0e85c/6201623?jwtToken=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJkMjQxMDdmOC1jZDI4LTQ2YzQtOTA4Zi0xNDE5Y2NkMGU4NWMiLCJlbWFpbCI6ImZvcm0tbWFydi0xNzU0ODE3NjMyNDY3QGV4YW1wbGUuY29tIiwidXNlcm5hbWUiOiJkMjQxMDdmOC1jZDI4LTQ2YzQtOTA4Zi0xNDE5Y2NkMGU4NWMiLCJhY2NvdW50VHlwZSI6IlRFTVBPUkFSWSIsImlhdCI6MTc1NDgxNzYzMiwiZXhwIjoxNzU0ODQ2NDMyfQ.ILm21yxdt_Wi9lnw0ymFN2et3BPbeorp8Kaa4BYmbtE 302 - 3ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:20:34 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32mData: {
  "statusCode": 302,
  "elapsed": "3ms"
}[39m
[33m[Nest] 1972739  - [39m08/10/2025, 4:20:34 AM [33m   WARN[39m [33mNo authentication token provided[39m
[33m[Nest] 1972739  - [39m08/10/2025, 4:20:34 AM [33m   WARN[39m [33mObject:[39m
{
  "endpoint": "/public/form-marv/d24107f8-cd28-46c4-908f-1419ccd0e85c/6201623",
  "method": "GET",
  "correlationId": "unknown"
}

[31m[Nest] 1972739  - [39m08/10/2025, 4:20:34 AM [31m  ERROR[39m [38;5;3m[GlobalExceptionFilter] [39m[31mHTTP Exception 401: No authentication token provided[39m
UnauthorizedException: No authentication token provided
    at AuthPermissionGuard.canActivate (/mypart/tmc/projects/istack-buddy-server-take1/src/common/guards/auth-permission.guard.ts:97:13)
    at GuardsConsumer.tryActivate (/mypart/tmc/projects/istack-buddy-server-take1/node_modules/@nestjs/core/guards/guards-consumer.js:15:34)
    at canActivateFn (/mypart/tmc/projects/istack-buddy-server-take1/node_modules/@nestjs/core/router/router-execution-context.js:135:59)
    at /mypart/tmc/projects/istack-buddy-server-take1/node_modules/@nestjs/core/router/router-execution-context.js:42:37
    at /mypart/tmc/projects/istack-buddy-server-take1/node_modules/@nestjs/core/router/router-proxy.js:9:23
    at Layer.handle [as handle_request] (/mypart/tmc/projects/istack-buddy-server-take1/node_modules/express/lib/router/layer.js:95:5)
    at next (/mypart/tmc/projects/istack-buddy-server-take1/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/mypart/tmc/projects/istack-buddy-server-take1/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/mypart/tmc/projects/istack-buddy-server-take1/node_modules/express/lib/router/layer.js:95:5)
    at /mypart/tmc/projects/istack-buddy-server-take1/node_modules/express/lib/router/index.js:284:15
[31m[Nest] 1972739  - [39m08/10/2025, 4:20:34 AM [31m  ERROR[39m [38;5;3m[GlobalExceptionFilter] [39m[31mData: {
  "statusCode": 401,
  "requestBody": {},
  "requestQuery": {},
  "requestParams": {
    "conversationId": "d24107f8-cd28-46c4-908f-1419ccd0e85c",
    "formId": "6201623"
  }
}[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:20:34 AM [32m    LOG[39m [38;5;3m[GlobalExceptionFilter] [39m[32mAUDIT: ACCESS_DENIED - failure[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:20:34 AM [32m    LOG[39m [38;5;3m[GlobalExceptionFilter] [39m[32mData: {
  "auditEvent": "ACCESS_DENIED",
  "result": "failure",
  "details": {
    "statusCode": 401,
    "reason": "No authentication token provided",
    "attemptedResource": "/public/form-marv/d24107f8-cd28-46c4-908f-1419ccd0e85c/6201623"
  }
}[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:21:23 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:22:23 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:23:23 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:24:23 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:25:23 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:26:23 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:27:23 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:28:23 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:29:23 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:30:23 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:31:23 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:32:23 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:33:23 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:34:23 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:35:23 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:36:23 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:37:23 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:38:18 AM [95m  DEBUG[39m [95mJWT token from query parameter validated, allowing controller to handle redirect[39m
[95m[Nest] 1972739  - [39m08/10/2025, 4:38:18 AM [95m  DEBUG[39m [95mObject:[39m
{
  "userId": "d24107f8-cd28-46c4-908f-1419ccd0e85c",
  "endpoint": "/public/form-marv/d24107f8-cd28-46c4-908f-1419ccd0e85c/6201623?jwtToken=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJkMjQxMDdmOC1jZDI4LTQ2YzQtOTA4Zi0xNDE5Y2NkMGU4NWMiLCJlbWFpbCI6ImZvcm0tbWFydi0xNzU0ODE3NjMyNDY3QGV4YW1wbGUuY29tIiwidXNlcm5hbWUiOiJkMjQxMDdmOC1jZDI4LTQ2YzQtOTA4Zi0xNDE5Y2NkMGU4NWMiLCJhY2NvdW50VHlwZSI6IlRFTVBPUkFSWSIsImlhdCI6MTc1NDgxNzYzMiwiZXhwIjoxNzU0ODQ2NDMyfQ.ILm21yxdt_Wi9lnw0ymFN2et3BPbeorp8Kaa4BYmbtE",
  "method": "GET",
  "correlationId": "unknown"
}

[32m[Nest] 1972739  - [39m08/10/2025, 4:38:18 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32m[8dc90f17-af64-46bb-b99e-95c353a85301] Incoming GET /public/form-marv/d24107f8-cd28-46c4-908f-1419ccd0e85c/6201623?jwtToken=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJkMjQxMDdmOC1jZDI4LTQ2YzQtOTA4Zi0xNDE5Y2NkMGU4NWMiLCJlbWFpbCI6ImZvcm0tbWFydi0xNzU0ODE3NjMyNDY3QGV4YW1wbGUuY29tIiwidXNlcm5hbWUiOiJkMjQxMDdmOC1jZDI4LTQ2YzQtOTA4Zi0xNDE5Y2NkMGU4NWMiLCJhY2NvdW50VHlwZSI6IlRFTVBPUkFSWSIsImlhdCI6MTc1NDgxNzYzMiwiZXhwIjoxNzU0ODQ2NDMyfQ.ILm21yxdt_Wi9lnw0ymFN2et3BPbeorp8Kaa4BYmbtE[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:38:18 AM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32mData: {
  "userAgent": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/138.0.0.0 Safari/537.36",
  "ip": "::ffff:127.0.0.1",
  "params": {
    "conversationId": "d24107f8-cd28-46c4-908f-1419ccd0e85c",
    "formId": "6201623"
  },
  "query": {
    "jwtToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJkMjQxMDdmOC1jZDI4LTQ2YzQtOTA4Zi0xNDE5Y2NkMGU4NWMiLCJlbWFpbCI6ImZvcm0tbWFydi0xNzU0ODE3NjMyNDY3QGV4YW1wbGUuY29tIiwidXNlcm5hbWUiOiJkMjQxMDdmOC1jZDI4LTQ2YzQtOTA4Zi0xNDE5Y2NkMGU4NWMiLCJhY2NvdW50VHlwZSI6IlRFTVBPUkFSWSIsImlhdCI6MTc1NDgxNzYzMiwiZXhwIjoxNzU0ODQ2NDMyfQ.ILm21yxdt_Wi9lnw0ymFN2et3BPbeorp8Kaa4BYmbtE"
  }
}[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:38:18 AM [32m    LOG[39m [38;5;3m[AuthenticationService.authenticateUser] [39m[32mJWT authentication attempt started[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:38:18 AM [32m    LOG[39m [38;5;3m[AuthenticationService.authenticateUser] [39m[32mData: {
  "userId": "d24107f8-cd28-46c4-908f-1419ccd0e85c",
  "hasToken": true
}[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:38:18 AM [32m    LOG[39m [38;5;3m[AuthenticationService.authenticateUser] [39m[32mJWT authentication successful[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:38:18 AM [32m    LOG[39m [38;5;3m[AuthenticationService.authenticateUser] [39m[32mData: {
  "userId": "d24107f8-cd28-46c4-908f-1419ccd0e85c",
  "email": "form-marv-1754817632467@example.com"
}[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:38:18 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32m[8dc90f17-af64-46bb-b99e-95c353a85301] Response GET /public/form-marv/d24107f8-cd28-46c4-908f-1419ccd0e85c/6201623?jwtToken=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiJkMjQxMDdmOC1jZDI4LTQ2YzQtOTA4Zi0xNDE5Y2NkMGU4NWMiLCJlbWFpbCI6ImZvcm0tbWFydi0xNzU0ODE3NjMyNDY3QGV4YW1wbGUuY29tIiwidXNlcm5hbWUiOiJkMjQxMDdmOC1jZDI4LTQ2YzQtOTA4Zi0xNDE5Y2NkMGU4NWMiLCJhY2NvdW50VHlwZSI6IlRFTVBPUkFSWSIsImlhdCI6MTc1NDgxNzYzMiwiZXhwIjoxNzU0ODQ2NDMyfQ.ILm21yxdt_Wi9lnw0ymFN2et3BPbeorp8Kaa4BYmbtE 302 - 1ms[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:38:18 AM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32mData: {
  "statusCode": 302,
  "elapsed": "1ms"
}[39m
[33m[Nest] 1972739  - [39m08/10/2025, 4:38:18 AM [33m   WARN[39m [33mNo authentication token provided[39m
[33m[Nest] 1972739  - [39m08/10/2025, 4:38:18 AM [33m   WARN[39m [33mObject:[39m
{
  "endpoint": "/public/form-marv/d24107f8-cd28-46c4-908f-1419ccd0e85c/6201623",
  "method": "GET",
  "correlationId": "unknown"
}

[31m[Nest] 1972739  - [39m08/10/2025, 4:38:18 AM [31m  ERROR[39m [38;5;3m[GlobalExceptionFilter] [39m[31mHTTP Exception 401: No authentication token provided[39m
UnauthorizedException: No authentication token provided
    at AuthPermissionGuard.canActivate (/mypart/tmc/projects/istack-buddy-server-take1/src/common/guards/auth-permission.guard.ts:97:13)
    at GuardsConsumer.tryActivate (/mypart/tmc/projects/istack-buddy-server-take1/node_modules/@nestjs/core/guards/guards-consumer.js:15:34)
    at canActivateFn (/mypart/tmc/projects/istack-buddy-server-take1/node_modules/@nestjs/core/router/router-execution-context.js:135:59)
    at /mypart/tmc/projects/istack-buddy-server-take1/node_modules/@nestjs/core/router/router-execution-context.js:42:37
    at /mypart/tmc/projects/istack-buddy-server-take1/node_modules/@nestjs/core/router/router-proxy.js:9:23
    at Layer.handle [as handle_request] (/mypart/tmc/projects/istack-buddy-server-take1/node_modules/express/lib/router/layer.js:95:5)
    at next (/mypart/tmc/projects/istack-buddy-server-take1/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/mypart/tmc/projects/istack-buddy-server-take1/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/mypart/tmc/projects/istack-buddy-server-take1/node_modules/express/lib/router/layer.js:95:5)
    at /mypart/tmc/projects/istack-buddy-server-take1/node_modules/express/lib/router/index.js:284:15
[31m[Nest] 1972739  - [39m08/10/2025, 4:38:18 AM [31m  ERROR[39m [38;5;3m[GlobalExceptionFilter] [39m[31mData: {
  "statusCode": 401,
  "requestBody": {},
  "requestQuery": {},
  "requestParams": {
    "conversationId": "d24107f8-cd28-46c4-908f-1419ccd0e85c",
    "formId": "6201623"
  }
}[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:38:18 AM [32m    LOG[39m [38;5;3m[GlobalExceptionFilter] [39m[32mAUDIT: ACCESS_DENIED - failure[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:38:18 AM [32m    LOG[39m [38;5;3m[GlobalExceptionFilter] [39m[32mData: {
  "auditEvent": "ACCESS_DENIED",
  "result": "failure",
  "details": {
    "statusCode": 401,
    "reason": "No authentication token provided",
    "attemptedResource": "/public/form-marv/d24107f8-cd28-46c4-908f-1419ccd0e85c/6201623"
  }
}[39m
[32m[Nest] 1972739  - [39m08/10/2025, 4:38:23 AM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
