
> istack-buddy-server-take1@0.0.1 start:dev
> nest start --watch

[2J[3J[H[[90m1:18:30 PM[0m] Starting compilation in watch mode...

[[90m1:18:32 PM[0m] Found 0 errors. Watching for file changes.

[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[NestFactory] [39m[32mStarting Nest application...[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mRobotModule dependencies initialized[39m[38;5;3m +13ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mConversationListServiceModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mLoggerModule dependencies initialized[39m[38;5;3m +0ms[39m
[95m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.constructor] [39m[95mFile-based permissions loaded successfully[39m
[95m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [95m  DEBUG[39m [38;5;3m[AuthorizationPermissionsService.constructor] [39m[95mData: {
  "userPermissionsCount": 0,
  "groupPermissionsCount": 0,
  "userGroupMembershipsCount": 0
}[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAuthorizationPermissionsModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAppModule dependencies initialized[39m[38;5;3m +0ms[39m
[95m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [95m  DEBUG[39m [38;5;3m[AuthenticationService.constructor] [39m[95mAuthentication service initialized with configuration[39m
[95m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [95m  DEBUG[39m [38;5;3m[AuthenticationService.constructor] [39m[95mData: {
  "sessionTimeoutSeconds": 28800
}[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mAuthenticationModule dependencies initialized[39m[38;5;3m +1ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mGuardsModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mIstackBuddySlackApiModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mDevDebugModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mPublicInterfaceModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mChatManagerModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[InstanceLoader] [39m[32mUserProfileModule dependencies initialized[39m[38;5;3m +0ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "join_room" message[39m[38;5;3m +17ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "leave_room" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "send_message" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "typing_start" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "typing_stop" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "get_messages" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "share_robot_message" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "join_dashboard" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[WebSocketsController] [39m[32mChatManagerGateway subscribed to the "leave_dashboard" message[39m[38;5;3m +0ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAppController {/}:[39m[38;5;3m +1ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mAuthenticationController {/auth}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/user, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/auth/profile/me, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mUserProfileController {/user-profiles}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/user-profiles/me, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mDevDebugController {/dev-debug}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/auth, POST} route[39m[38;5;3m +1ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/user-details/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/users, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/dev-debug/auth-status/:userId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mChatManagerController {/chat}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/messages, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/messages, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/messages/last/:count, GET} route[39m[38;5;3m +1ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/join, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/participants, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/dashboard/stats, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/start, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/chat/conversations/:conversationId/leave, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mIstackBuddySlackApiController {/}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/istack-buddy/slack-integration/health, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/istack-buddy/slack-integration/debug, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/istack-buddy/slack-integration/slack/events, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[RoutesResolver] [39m[32mPublicInterfaceController {/public}:[39m[38;5;3m +0ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/debug-create, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId/:formId, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId/:formId/chat-messages, GET} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[RouterExplorer] [39m[32mMapped {/public/form-marv/:conversationId/:formId/chat-messages, POST} route[39m[38;5;3m +0ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[SlackyAnthropicAgent] [39m[32mSlackyAnthropicAgent constructor called - class loaded[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mSlackyOpenAiAgent constructor called - class loaded[39m
[95m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: ChatRobotParrot v1.0.0[39m
[95m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: AgentRobotParrot v1.0.0[39m
[95m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: RobotChatOpenAI v1.0.0-test-dev[39m
[95m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: RobotChatAnthropic v1.0.0[39m
[95m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackyAnthropicAgent v1.0.0[39m
[95m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: MarvOpenAiAgent v1.0.0[39m
[95m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackyOpenAiAgent v1.0.0[39m
[95m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: AnthropicMarv v1.0.0[39m
[95m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackAgentCoreFormsParrot v1.0.0[39m
[95m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [95m  DEBUG[39m [38;5;3m[RobotService] [39m[95mRegistered robot: SlackAgentCoreFormsSsoAutofillParrot v1.0.0[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[RobotService] [39m[32mInitialized 10 robots[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[NestApplication] [39m[32mNest application successfully started[39m[38;5;3m +1ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[Bootstrap] [39m[32miStack Buddy Server running on: http://localhost:3500[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[Bootstrap] [39m[32mAPI Documentation available at: http://localhost:3500/api[39m
[33m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [33m   WARN[39m [38;5;3m[Bootstrap] [39m[33mCORS enabled for ALL origins (temporary)[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: XOydrzxE5G_mqqNrAAAB[39m
[95m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mJoin room data received[39m
[95m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "data": {
    "conversationId": "cae98459-9ded-42e1-bef7-31628f344b65",
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[95m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mApplied default joinData[39m
[95m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "joinData": {
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[ChatManagerService] Attempting to join conversation: cae98459-9ded-42e1-bef7-31628f344b65
[ChatManagerService] Available conversations: []
[31m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError in handleJoinRoom[39m
[31m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError: Conversation cae98459-9ded-42e1-bef7-31628f344b65 not found[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: 79zdTW8kyIoFR567AAAD[39m
[95m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mJoin room data received[39m
[95m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "data": {
    "conversationId": "321d767c-fa29-4565-88b7-bf2a9c237bc4",
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[95m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mApplied default joinData[39m
[95m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "joinData": {
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[ChatManagerService] Attempting to join conversation: 321d767c-fa29-4565-88b7-bf2a9c237bc4
[ChatManagerService] Available conversations: []
[31m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError in handleJoinRoom[39m
[31m[Nest] 1874433  - [39m08/09/2025, 1:18:33 PM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError: Conversation 321d767c-fa29-4565-88b7-bf2a9c237bc4 not found[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:34 PM [32m    LOG[39m [38;5;3m[ChatManagerGateway] [39m[32mClient connected: HYv7hQwAQwzpzakiAAAF[39m
[95m[Nest] 1874433  - [39m08/09/2025, 1:18:34 PM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mJoin room data received[39m
[95m[Nest] 1874433  - [39m08/09/2025, 1:18:34 PM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "data": {
    "conversationId": "bb9a404c-d7f8-48e3-88e7-5824edcee08c",
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[95m[Nest] 1874433  - [39m08/09/2025, 1:18:34 PM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mApplied default joinData[39m
[95m[Nest] 1874433  - [39m08/09/2025, 1:18:34 PM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mObject:[39m
{
  "joinData": {
    "userId": "form-marv-user",
    "userRole": "cx-agent"
  }
}

[ChatManagerService] Attempting to join conversation: bb9a404c-d7f8-48e3-88e7-5824edcee08c
[ChatManagerService] Available conversations: []
[31m[Nest] 1874433  - [39m08/09/2025, 1:18:34 PM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError in handleJoinRoom[39m
[31m[Nest] 1874433  - [39m08/09/2025, 1:18:34 PM [31m  ERROR[39m [38;5;3m[ChatManagerGateway] [39m[31mError: Conversation bb9a404c-d7f8-48e3-88e7-5824edcee08c not found[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:49 PM [32m    LOG[39m [38;5;3m[SlackSignatureGuard] [39m[32mSlack signature verified successfully[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:49 PM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32m[768acd43-3de2-467c-b9d8-d77472b48097] Incoming POST /istack-buddy/slack-integration/slack/events[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:49 PM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32mData: {
  "userAgent": "Slackbot 1.0 (+https://api.slack.com/robots)",
  "ip": "::ffff:127.0.0.1",
  "params": {},
  "query": {}
}[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:49 PM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mReceived app mention event[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:49 PM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mDEBUG: Event text: "<@U092RRN555X> please troubleshoot form 5375703", trimmed: "<@U092RRN555X> please troubleshoot form 5375703"[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:49 PM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mAdding reaction :thinking_face: to message 1754763527.428479 in channel C091Y5UNA1M[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:49 PM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mAdded reaction :thinking_face: to message in channel C091Y5UNA1M[39m
[95m[Nest] 1874433  - [39m08/09/2025, 1:18:49 PM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mBroadcasting dashboard event: conversation_created[39m
{
  allConversationMessages: [
    {
      id: 'fb3e748b-a6ac-47ee-869a-2bd2be7c6ec9',
      content: [Object],
      conversationId: '5eead349-1964-4e49-b28d-adb2b96ddfed',
      fromUserId: 'cx-slack-robot',
      fromRole: 'cx-customer',
      toRole: 'cx-agent',
      messageType: 'text',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-09T18:18:49.839Z,
      updatedAt: 2025-08-09T18:18:49.839Z
    }
  ]
}
[95m[Nest] 1874433  - [39m08/09/2025, 1:18:49 PM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mBroadcasting dashboard event: conversation_updated[39m
Gateway: Broadcasting new_message to conversation 5eead349-1964-4e49-b28d-adb2b96ddfed: {
  message: {
    id: 'fb3e748b-a6ac-47ee-869a-2bd2be7c6ec9',
    content: {
      type: 'text/plain',
      payload: '<@U092RRN555X> please troubleshoot form 5375703'
    },
    conversationId: '5eead349-1964-4e49-b28d-adb2b96ddfed',
    fromUserId: 'cx-slack-robot',
    fromRole: 'cx-customer',
    toRole: 'cx-agent',
    messageType: 'text',
    threadId: undefined,
    originalMessageId: undefined,
    createdAt: 2025-08-09T18:18:49.839Z,
    updatedAt: 2025-08-09T18:18:49.839Z
  },
  timestamp: '2025-08-09T18:18:49.839Z'
}
Gateway: Broadcast completed
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:49 PM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mMessage 1: [cx-customer] [object Object][39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:49 PM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mBuilding OpenAI message history:[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:49 PM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mObject:[39m
{
  "historyLength": 0,
  "historyRoles": [],
  "currentMessage": "<@U092RRN555X> please troubleshoot form 5375703"
}

[32m[Nest] 1874433  - [39m08/09/2025, 1:18:49 PM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mAdding current message: <@U092RRN555X> please troubleshoot form 5375703...[39m
[95m[Nest] 1874433  - [39m08/09/2025, 1:18:49 PM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mConversation being sent to robot:[39m
[95m[Nest] 1874433  - [39m08/09/2025, 1:18:49 PM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
[
  {
    "author": "user",
    "content": "<@U092RRN555X> please troubleshoot form 5375703..."
  }
]

[32m[Nest] 1874433  - [39m08/09/2025, 1:18:52 PM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mBuilding OpenAI message history:[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:52 PM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mObject:[39m
{
  "historyLength": 1,
  "historyRoles": [
    {
      "fromRole": "cx-customer",
      "content": "<@U092RRN555X> please troubleshoot form 5375703..."
    }
  ],
  "currentMessage": "<@U092RRN555X> please troubleshoot form 5375703"
}

[32m[Nest] 1874433  - [39m08/09/2025, 1:18:52 PM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mProcessing message with role: cx-customer[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:52 PM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mAdding customer message: <@U092RRN555X> please troubleshoot form 5375703...[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:52 PM [32m    LOG[39m [38;5;3m[SlackyOpenAiAgent] [39m[32mCurrent message already in history, skipping[39m
[95m[Nest] 1874433  - [39m08/09/2025, 1:18:52 PM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mConversation being sent to robot:[39m
[95m[Nest] 1874433  - [39m08/09/2025, 1:18:52 PM [95m  DEBUG[39m [38;5;3m[SlackyOpenAiAgent] [39m[95mObject:[39m
[
  {
    "author": "user",
    "content": "<@U092RRN555X> please troubleshoot form 5375703..."
  }
]

[32m[Nest] 1874433  - [39m08/09/2025, 1:18:52 PM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32m[768acd43-3de2-467c-b9d8-d77472b48097] Response POST /istack-buddy/slack-integration/slack/events 200 - 2832ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:52 PM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32mData: {
  "statusCode": 200,
  "elapsed": "2832ms"
}[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:52 PM [32m    LOG[39m [38;5;3m[SlackSignatureGuard] [39m[32mSlack signature verified successfully[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:52 PM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32m[52f8f268-a4eb-4440-a7d6-c06cb942691f] Incoming POST /istack-buddy/slack-integration/slack/events[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:52 PM [32m    LOG[39m [38;5;3m[HttpRequest] [39m[32mData: {
  "userAgent": "Slackbot 1.0 (+https://api.slack.com/robots)",
  "ip": "::ffff:127.0.0.1",
  "params": {},
  "query": {}
}[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:52 PM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mReceived app mention event[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:52 PM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mDuplicate event detected: Ev099HPYDKKM[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:52 PM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32m[52f8f268-a4eb-4440-a7d6-c06cb942691f] Response POST /istack-buddy/slack-integration/slack/events 200 - 2ms[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:52 PM [32m    LOG[39m [38;5;3m[HttpResponse] [39m[32mData: {
  "statusCode": 200,
  "elapsed": "2ms"
}[39m
{
  allConversationMessages: [
    {
      id: 'fb3e748b-a6ac-47ee-869a-2bd2be7c6ec9',
      content: [Object],
      conversationId: '5eead349-1964-4e49-b28d-adb2b96ddfed',
      fromUserId: 'cx-slack-robot',
      fromRole: 'cx-customer',
      toRole: 'cx-agent',
      messageType: 'text',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-09T18:18:49.839Z,
      updatedAt: 2025-08-09T18:18:49.839Z
    },
    {
      id: '25119fa4-19c0-44fd-8205-6aefbdb77871',
      content: [Object],
      conversationId: '5eead349-1964-4e49-b28d-adb2b96ddfed',
      fromUserId: 'cx-slack-robot',
      fromRole: 'robot',
      toRole: 'cx-customer',
      messageType: 'robot',
      threadId: undefined,
      originalMessageId: undefined,
      createdAt: 2025-08-09T18:18:53.921Z,
      updatedAt: 2025-08-09T18:18:53.921Z
    }
  ]
}
[95m[Nest] 1874433  - [39m08/09/2025, 1:18:53 PM [95m  DEBUG[39m [38;5;3m[ChatManagerGateway] [39m[95mBroadcasting dashboard event: conversation_updated[39m
Gateway: Broadcasting new_message to conversation 5eead349-1964-4e49-b28d-adb2b96ddfed: {
  message: {
    id: '25119fa4-19c0-44fd-8205-6aefbdb77871',
    content: {
      type: 'text/plain',
      payload: "I'll start by gathering an overview of form 5375703, which includes configuration details and related entities. This will help us identify any potential issues.\n" +
        '\n' +
        'Let me get that information for you.'
    },
    conversationId: '5eead349-1964-4e49-b28d-adb2b96ddfed',
    fromUserId: 'cx-slack-robot',
    fromRole: 'robot',
    toRole: 'cx-customer',
    messageType: 'robot',
    threadId: undefined,
    originalMessageId: undefined,
    createdAt: 2025-08-09T18:18:53.921Z,
    updatedAt: 2025-08-09T18:18:53.921Z
  },
  timestamp: '2025-08-09T18:18:53.921Z'
}
Gateway: Broadcast completed
[32m[Nest] 1874433  - [39m08/09/2025, 1:18:54 PM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mMessage sent to Slack channel C091Y5UNA1M[39m
[32m[Nest] 1874433  - [39m08/09/2025, 1:19:33 PM [32m    LOG[39m [38;5;3m[IstackBuddySlackApiService] [39m[32mGarbage collection completed. Cleaned up old events.[39m
